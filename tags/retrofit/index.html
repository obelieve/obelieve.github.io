<!DOCTYPE html>
<html lang="zh" itemscope
  itemtype="http://schema.org/Blog">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" /><title>Tags | Retrofit - Obelieveçš„åšå®¢</title>
  <meta property="og:title" content="Tags | Retrofit" />
  <meta itemprop="headline" content="Tags | Retrofit" />
  <meta property="og:description" content="" />
  <meta name="description" content="" />
  <meta property="og:url" content="https://obelieve.github.io/tags/retrofit/" /><meta name="og:type" content="summary" />
  <meta name="keywords" content="æ³¨æ„åŠ›, è¯»ä¹¦, å·¥å…·åˆ†äº«, çº¯æ–‡æœ¬, è‹±è¯­å­¦ä¹ " />
  <meta name="author" content="Obelieve" />
  <meta itemprop="copyrightYear" content=" 2025" />
  <link rel="icon" href="https://obelieve.github.io/site/images/favicon-32x32.png?h=68480d370330a1370abf" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="https://obelieve.github.io/site/images/apple-icon-57x57.png?h=920192bead2a51cc200b">
  <link rel="apple-touch-icon" sizes="60x60" href="https://obelieve.github.io/site/images/apple-icon-60x60.png?h=a7a48024c2427638d967">
  <link rel="apple-touch-icon" sizes="72x72" href="https://obelieve.github.io/site/images/apple-icon-72x72.png?h=bf72d3c24257c21e2c32">
  <link rel="apple-touch-icon" sizes="76x76" href="https://obelieve.github.io/site/images/apple-icon-76x76.png?h=cc4dba10aa538acb3c49">
  <link rel="apple-touch-icon" sizes="114x114" href="https://obelieve.github.io/site/images/apple-icon-114x114.png?h=1aefbd93c1c89c4cbb8a">
  <link rel="apple-touch-icon" sizes="120x120" href="https://obelieve.github.io/site/images/apple-icon-120x120.png?h=409d89ac71c055f60c18">
  <link rel="apple-touch-icon" sizes="144x144" href="https://obelieve.github.io/site/images/apple-icon-144x144.png?h=5deaaef8a0670003fd10">
  <link rel="apple-touch-icon" sizes="152x152" href="https://obelieve.github.io/site/images/apple-icon-152x152.png?h=71161064c00cec1a4f44">
  <link rel="apple-touch-icon" sizes="180x180" href="https://obelieve.github.io/site/images/apple-icon-180x180.png?h=098b2b0d572b07220509">
  <link rel="icon" type="image/png" sizes="192x192" href="https://obelieve.github.io/site/images/android-icon-192x192.png?h=8fc96efc0d93b2ca4d24">
  <link rel="icon" type="image/png" sizes="32x32" href="https://obelieve.github.io/site/images/favicon-32x32.png?h=68480d370330a1370abf">
  <link rel="icon" type="image/png" sizes="96x96" href="https://obelieve.github.io/site/images/favicon-96x96.png?h=0db83734130603a067c1">
  <link rel="icon" type="image/png" sizes="16x16" href="https://obelieve.github.io/site/images/favicon-16x16.png?h=c5a1bcfc63c8f941cce5">
  <meta name="msapplication-TileColor" content="#fffcf9" />
  <meta name="msapplication-TileImage" content="https://obelieve.github.io/site/images/ms-icon-144x144.png?h=5deaaef8a0670003fd10">
  <meta name="theme-color" content="#fffcf9" />
  <meta property="og:site_name" content="Obelieveçš„åšå®¢" />
  
  
  
  
  <link rel="alternate" type="application/atom+xml" title="tags: Retrofit - Obelieveçš„åšå®¢ RSS" href="https://obelieve.github.io/tags/retrofit/atom.xml">
  <style>@charset "UTF-8";
html,
body,
p,
dt,
dd,
figure,
fieldset,
blockquote,
legend,
textarea,
pre,
iframe,
hr,
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  padding: 0;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-size: 100%;
  font-weight: normal;
}

button,
input,
select {
  margin: 0;
}
div {
  box-sizing: border-box;
}

img,
video {
  height: auto;
  max-width: 100%;
}

iframe {
  border: 0;
}

table {
  text-align: justify;
  width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
  margin-bottom: 1.4em;
}
td,
th {
  padding: 0.5em;
  border-bottom: 1px solid var(--colors-divider);
}

.by {
  font-size: 1.175rem;
  padding-bottom: 0.75rem;
  font-weight: 500;
}

.feed-entry li {
  margin-bottom: 0.5rem;
}

/* --reset end -- */
/*
 #d2bf9e
 #fcfcfc
 #fffff8
 #41403e
 backanother #e6ddd0
 divider: rgb(226, 232, 240);
 code back: edf0f3
 rgb(249, 245, 233)
239
#EFEDEA
/* rgba(0, 0, 0, 0.8)*/
/*#fffef8
c35
f9f5e9
ea4c89
fffef8
#f4ecd8;
#FDF6E3
#faf8f1
background-color:rgb(255, 252, 249);
#272629

  --colors-background: #efedea;
  --colors-text: #18181c;
*/
html {
  font-size: 15px;
  box-sizing: border-box;
  /* --colors-text: rgba(68, 64, 60, 0.8); */
  --colors-text: rgba(34, 34, 34);
  --colors-muted: #718096;
  --colors-primary: #cc3355;
  --colors-divider: rgba(0, 0, 0, 0.06);
  --colors-primary-light: rgba(234, 76, 137, 0.5);
  --colors-background: #f7f2ed;
  --colors-code-background: rgba(0, 0, 0, 0.08);
  /* --colors-quote-background: rgba(255, 255, 255, 0.5); */
  /* --colors-quote-background: rgb(0 0 0/3%); */
  --colors-quote-background: hsla(37, 17%, 85%, 0.5);
  --colors-quote-hover-background: rgba(255, 255, 255, 0.7);
  --colors-blue: #1ca9c9;
  --colors-secondary: #14213d;
  --colors-surface: rgba(0, 0, 0, 0.04);
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    segoe ui,
    Roboto,
    helvetica neue,
    Arial,
    noto sans,
    sans-serif,
    apple color emoji,
    segoe ui emoji,
    segoe ui symbol,
    noto color emoji;
  font-feature-settings: normal;
  font-variation-settings: normal;
}

/* Adds dark mode */
@media (prefers-color-scheme: dark) {
  html {
    --colors-background: #202124;
    --colors-text: rgb(236, 237, 238);
    --colors-code-background: rgba(0, 0, 0, 0.08);
    --colors-quote-background: hsl(226, 15%, 17%);
    --colors-quote-hover-background: hsl(226, 15%, 20%);
  }
}
body {
  color: var(--colors-text);
  background-color: var(--colors-background);
}

#root {
  /* margin-left: auto; */
  /* margin-right: auto; */
  /* max-width: 120rem; */
  position: relative;
}

h1,
h2,
h3 {
  padding-top: 1.4rem;
  padding-bottom: 1.4rem;
  margin-bottom: 1rem;
  line-height: 1;
  position: relative;
}
h4,
h5,
h6 {
  padding-top: 1.1rem;
  padding-bottom: 1.1rem;
  margin-bottom: 0.5rem;
  line-height: 1.1;
  font-weight: 400;
  position: relative;
}

.relative {
  position: relative;
}

.bold {
  font-weight: 600;
}
.mb-absolute {
  margin-bottom: -0.8rem;
}

.no-border {
  border: none;
}

.tweet-box {
  box-sizing: border-box;
  overflow: hidden;
  word-wrap: break-word;
  border-width: 1px;
  border-style: solid;
  border-color: var(--colors-divider);
  padding-left: 1rem;
  padding-right: 1rem;
  padding-bottom: 1.5rem;
  padding-top: 1.5rem;
  background: var(--colors-quote-background);
}

.tweet-box .overlay {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  right: 0;
}
.tweet-box .overlay:hover {
  background-color: var(--colors-quote-hover-background);
}
.tweet-box .inner {
  position: relative;
  pointer-events: none;
  z-index: 1;
}

.tweet-box .inner a {
  pointer-events: all;
  position: relative;
}
p.tweet-content {
  line-height: 1.5rem !important;
  padding-right: 2rem;
  margin-bottom: 0.6rem;
  font-size: 0.9rem !important;
}
.tweet-content a:link,
.tweet-content a:visited {
  -webkit-text-decoration: none;
  text-decoration: none;
  color: rgb(27, 149, 224);
}
.tweet-avatar-wrapper {
  margin-right: 0.5rem;
  margin-bottom: 0;
  width: 48px;
  min-width: 48px;
  border-radius: 9999px;
}
.tweet-icon {
  box-sizing: border-box;
  margin: 0;
  min-width: 0;
  -webkit-text-decoration: none;
  text-decoration: none;
  position: absolute;
  right: 0;
  top: 0.2rem;
}
.tweet-icon-svg {
  width: 25px;
  height: 25px;
  color: rgb(27, 149, 224);
  fill: currentcolor;
}

h1 {
  font-size: 2.4rem;
}

h2 {
  font-size: 1.675rem;
  font-weight: 500;
}

.feed-entry h2 {
  font-size: 1.125rem;
}
.feed-entry h2.entry-title {
  font-size: 1.6rem;
  font-style: normal;
  font-weight: 500;
}

.feed-entry h3 {
  font-size: 1.05rem;
  font-style: normal;
}
p,
li,
ul,
ol {
  font-size: 1rem;
  line-height: 1.8rem;
}

h3 {
  font-size: 1.375rem;
  font-style: italic;
}

article {
  margin-bottom: 4rem;
}
article:last-child {
  margin-bottom: 0;
}
pre {
  background-color: var(--colors-quote-background);
  margin-top: 0px;
  margin-bottom: 1rem;
  padding: 1.5rem 1rem;
  border: 0px;
  border-radius: 0.5rem;
  overflow: auto;
}

code {
  border-radius: 0.25rem;
  padding: 0.375rem 0.5rem;
  background-color: var(--colors-code-background);
}

pre > code {
  font-size: 0.9rem;
  display: block;
}

pre code {
  background: none;
}

code,
pre > code {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 1rem;
  line-height: 1.42;
  -webkit-text-size-adjust: 100%;
  /* Prevent adjustments of font size after orientation changes in iOS. See https://github.com/edwardtufte/tufte-css/issues/81#issuecomment-261953409 */
}

hr {
  display: block;
  height: 1px;
  width: 55%;
  border: 0;
  border-top: 1px solid var(--colors-divider);
  margin: 2rem 0;
  padding: 0;
}

ul {
  margin-bottom: 0.8rem;
}

ul > details > summary {
  margin-left: -1.4rem;
}

p {
  margin-bottom: 1.4rem;
  padding-right: 0;
  vertical-align: baseline;
}

blockquote {
  margin: 2rem 0;
  position: relative;
  border-radius: 10px;
  background-color: var(--colors-quote-background);
  /* background-color: #efefef; */
  /* background-color: hsl(60, 9%, 87%); */
  padding: 1.4rem 1.4rem 0rem 1.4rem;
  /* border-top: 1px solid var(--colors-divider); */
  box-sizing: border-box;
  overflow: auto;
}

/* blockquote p { */
/*   font-size: 1.2rem; */
/*   line-height: 2.1rem; */
/* } */
/**/
/* blockquote p:lang(en) { */
/*   font-size: 1.3rem; */
/* } */
/* blockquote::before{ */
/*   position: absolute; */
/*   content:"\201C";  */
/*   top: 0.875rem; */
/*   font-size: 2.5rem; */
/*   color: var(--colors-primary); */
/*   line-height: .1em; */
/*   vertical-align: -.4em; */
/*   font-weight: bold; */
/*   font-family: Courier, monospace; */
/* } */
/* blockquote > p:first-child { */
/*   text-indent: 2rem; */
/* } */
p,
dl,
ol,
ul {
  line-height: 1.5rem;
}
p {
  line-height: 2.1rem;
}

p:lang(en),
dl:lang(en),
ol:lang(en),
ul:lang(en) {
  font-size: 1.2rem;
  line-height: 1.75rem;
}

button,
input[type="submit"] {
  border-bottom-left-radius: 15px 255px;
  border-bottom-right-radius: 225px 15px;
  border-top-left-radius: 255px 15px;
  border-top-right-radius: 15px 225px;
  transition: all 235ms ease 0s;
  box-shadow: 15px 28px 25px -18px rgb(0 0 0 / 20%);
  transition: all 235ms ease-in-out 0s;
  align-self: center;
  background: 0 0;
  border: 2px solid var(--colors-text);
  color: var(--colors-text);
  cursor: pointer;
  display: inline-block;
  font-size: 1rem;
  outline: 0;
  padding: 0.75rem;
  font-family: Neucha, sans-serif;
}

button,
input[type="submit"]:hover {
  transform: translate3d(0, 2px, 0);
  box-shadow: 2px 8px 8px -5px rgb(0 0 0 / 30%);
}

input[type="url"],
input[type="text"],
input[type="search"] {
  /* -webkit-appearance: none; */
  background: none;
  border: 2px solid var(--colors-text);
  border-bottom-left-radius: 15px 255px;
  border-bottom-right-radius: 225px 15px;
  border-top-left-radius: 255px 15px;
  border-top-right-radius: 15px 225px;
  color: var(--colors-text);
  font-size: 1rem;
  outline: 0;
  padding: 0.75rem;
  box-shadow: 15px 28px 25px -18px rgb(0 0 0 / 20%);

  /* -webkit-border-radius: 0px; */
}
.display-block {
  display: block;
}

input[type="url"]:focus,
input[type="text"]:focus,
input[type="search"]:focus {
  border: 2px solid var(--colors-blue);
}

#search-bar-input {
  width: 80%;
  min-width: 260px;
}

.meilisearch-autocomplete {
  display: block !important;
}
.meilisearch-autocomplete .dsb-dropdown-menu {
  max-height: 400px;
  overflow-y: auto;
  min-width: 300px;
  width: 100%;
}
input:focus:not(:focus-visible) {
  border: 2px solid var(--colors-text);
}
input:focus-visible {
  border: 2px solid var(--colors-blue);
}
.no-underline {
  text-decoration: none;
}

.meilisearch-autocomplete {
  display: block;
}
a {
  word-break: break-all;
}
a:link,
a:visited {
  -webkit-transition: color 200ms ease;
  transition: color 200ms ease;
  text-decoration: underline;
  color: inherit;
  text-decoration-thickness: 1px;
}

:target {
  scroll-margin-top: 56px;
}

.no-underline:link,
.no-underline:visited,
.sidebar a:link,
.sidebar a:visited {
  text-decoration: none;
}
.sidebar {
  overflow-x: visible;
  padding-bottom: 1.4rem;
}
.no-underline:hover,
a:hover {
  color: var(--colors-primary);
  text-decoration: underline;
}

.no-hover-underline:hover {
  text-decoration: none;
}

.muted,
a.muted,
.muted:link,
.muted:visited {
  color: var(--colors-muted);
}

.text {
  font-size: 1.125rem;
}

.text-color,
.text-color:link,
.text-color:visited {
  color: var(--colors-text);
}

.flex {
  display: flex;
}

.flex-3 {
  flex: 3;
}

.flex-1 {
  flex: 1;
}

.flex-1-auto {
  flex: 1 1 auto;
}

.flex-wrap {
  flex-wrap: wrap;
}

.justify-between {
  justify-content: space-between;
}

.justify-center {
  justify-content: center;
}

.items-center {
  align-items: center;
}

.list-none {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.border-muted {
  border: 1px solid var(--colors-muted);
}

.rounded-full {
  border-radius: 999rem;
}

.rounded {
  border-radius: 0.25rem;
}

.rounded-lg {
  border-radius: 1rem;
}

.w-full {
  width: 100%;
}

.p-sm {
  padding: 0.25rem;
}

.icon {
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 999rem;
}

.inline-block {
  display: inline-block;
}

.menu li:not(:last-child) {
  margin-right: 0.6rem;
}

.m-l-2 {
  margin-left: 0.5rem;
}

.py {
  padding-top: 1.4rem;
  padding-bottom: 1.4rem;
}
.pt0 {
  padding-top: 0;
}

.pb0 {
  padding-bottom: 0;
}
.flex-shrink-0 {
  flex-shrink: 0;
}
.py-sm {
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
}

.px-sm {
  padding-left: 0.5rem;
  padding-right: 0.5rem;
}

.my {
  margin-top: 1.4rem;
  margin-bottom: 1.4rem;
}

.my-2 {
  margin-top: 2.4rem;
  margin-bottom: 2.4rem;
}

.px {
  padding-left: 1.4rem;
  padding-right: 1.4rem;
}
.px-2xl {
  padding-left: 5rem;
  padding-right: 5rem;
}
.pr-sm {
  padding-right: 0.5rem;
}

.pl-sm {
  padding-left: 0.5rem;
}

.pt {
  padding-top: 1.4rem;
}

.pl {
  padding-left: 1.4rem;
}

.list-none {
  list-style: none;
}

.navbar {
  position: static;
  top: 0;
  left: 0;
  background-color: var(--colors-background);
}

.navbar-inner {
  padding: 0.5rem 1.4rem;
  box-sizing: border-box;
  display: flex;
}

.zola-anchor {
  margin-left: 0.5rem;
  text-decoration: none;
}

.zola-anchor:link,
.zola-anchor:visited {
  text-decoration: none;
}

li.inline {
  display: inline-block;
  margin-right: 0.5rem;
}

.text-bigger {
  font-size: 1rem;
}
.text-lg {
  font-size: 1.5rem;
}

.text-sm {
  font-size: 0.9rem;
}

.text-sm p {
  font-size: 0.9rem;
}
p.text-sm:lang(en),
dl.text-sm:lang(en),
ol.text-sm:lang(en),
ul.text-sm:lang(en) {
  font-size: 0.9rem;
}

.pb {
  padding-bottom: 1.4rem;
}

.pb-lg {
  padding-bottom: 3rem;
}
.pb-sm {
  padding-bottom: 0.5rem;
}

.p0 {
  padding: 0;
}

.no-toc {
  width: auto;
}
.text-center {
  text-align: center;
}

.sidebar ul {
  margin-top: 0;
  padding-left: 1rem;
}

.sidebar li {
  font-size: 1rem;
}

.nav-divider {
  border-right: 2px solid var(--colors-divider);
  height: 24px;
  margin: 0 1rem 0 0rem;
}

.h-card {
  display: flex;
  align-items: center;
}

.display-none {
  display: none;
}

.mb {
  margin-bottom: 1.4rem;
}

.mb-li {
  margin-bottom: 1rem;
}

.mb-lg {
  margin-bottom: 2.4rem;
}

.mr {
  margin-right: 1.4rem;
}

.mr-sm {
  margin-right: 0.5rem;
}

.card {
  /* background: #fff; */
  background: var(--colors-surface);
}

.body-zone {
  padding-left: 1.4rem;
  padding-right: 1.4rem;
}
.header {
  padding-top: 1.4rem;
  max-width: 74rem;
  margin: 0 auto;
}
.post-header {
}
.header-inner {
  max-width: 52rem;
}
.mt {
  margin-top: 1.4rem;
}
.mb-lg {
  margin-bottom: 2.4rem;
}

@media (min-width: 48rem) {
  .navbar {
    position: fixed;
  }
  .nav-divider {
    border-top: 2px solid var(--colors-divider);
    width: 24px;
    margin: 0.6rem 0 1.6rem 0;
    height: 0;
    border-right: none;
  }

  .navbar {
    height: 100%;
    width: 4rem;
    /*
    border-right: 1px solid var(--colors-divider);
 */
  }

  .navbar-inner {
    padding: 1.4rem 0.5rem;
    flex-direction: column;
    height: 100vh;
  }

  .menu {
    flex-direction: column;
  }

  .menu li:not(:last-child) {
    margin-bottom: 1rem;
    margin-right: 0;
  }

  .body-zone {
    padding-left: 5.4rem;
    max-width: 74rem;
    margin: 0 auto;
  }
}

@media (min-width: 52rem) {
  h1::after,
  h2::after,
  h3::after {
    background-color: var(--colors-background);
  }
  .main {
    margin-right: 19rem;
  }
  .main-inner {
    max-width: 44rem;
    padding: 0;
  }
  .no-toc {
    width: 20rem;
  }

  .main-toc {
    display: none;
  }

  .sidebar {
    position: absolute;
    right: 0;
    top: 0;
    border-top: none;
    width: 16rem;
  }

  .sidebar ul {
    border-left: 1px solid var(--colors-divider);
    list-style: none;
  }

  .sidebar li {
    font-size: 0.9rem;
  }

  .sidebar h2,
  .sidebar h3 {
    margin-bottom: 0;
    font-size: 1rem;
    /* font-weight: 400; */
    padding-bottom: 1rem;
    border: none;
  }
}
.index-intro {
  font-size: 1rem;
}
/*å¤‡æ¡ˆåœ°å€æ ·å¼*/
a.theme-link-gray {
    text-decoration: none;
    font-size: 12px;
    color: #ccc;
}
.theme-info {
    display: inline-block;
    text-align: center;
    width: 100%;
    padding: 10px 0;
    font-size: 12px;
}</style><style>html {
  font-family: "Noto Serif SC", Roboto, Helvetica, Tahoma, Arial, "PingFang SC",
    "Hiragino Sans GB", "Microsoft YaHei", "Noto Sans CJK",
    "WenQuanYi Micro Hei", sans-serif;
}
</style><link rel="manifest" href="https://obelieve.github.io/site/images/manifest.json">
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-W03M6ZDZWG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "G-W03M6ZDZWG");
  </script>
  
  
</head>

<body>
  <div id="top"></div>
  <div id="root">
    <div class="body-zone">
      
      <header id="overview" class="pt">
      <div class="">
        <a href="https://obelieve.github.io/">Obelieve&#x27;s Blog</a>
        <span class="divider">&nbsp;&gt;&nbsp;</span>
          <a href="&#x2F;categories/">All tags</a>
          <span class="divider">&nbsp;&gt;&nbsp;</span>
          Retrofit
        </div>
    </header>
  
      <div class="main-zone relative">
        <div class="main">
          <div class="main-inner">
            
    <div class="taxonomy-single-page main-box-block h-feed hfeed">
      <div class="display-none">
        <div class="p-name site-title">Obelieveçš„åšå®¢</div>
        <p class="p-summary site-description"></p>
      </div>
      <div>
        
          
            
  <article class="h-entry hentry feed-entry">
    <h2 class="no-border pb-sm entry-title">
      <a class="no-underline  u-url p-name entry-title" rel="bookmark" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;retrofityuan-ma-fen-xi-2-10-0-snapshot&#x2F;">Retrofitæºç åˆ†æ 2.10.0-SNAPSHOT</a> <a href="#index-1" id="index-1" class="zola-anchor"></a>
    </h2>
    <p><img src="https://obelieve.top/site/images/retrofit%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="æµç¨‹å›¾.png" /></p>
<h2 id="1-jie-shao">1. ä»‹ç»<a class="zola-anchor" href="#1-jie-shao" aria-label="Anchor link for: 1-jie-shao">ğŸ”—</a></h2>
<p>Retrofitä¸»è¦æ˜¯åŸºäºOKHttpè¿›ä¸€æ­¥å°è£…çš„ç½‘ç»œè¯·æ±‚çš„æ¡†æ¶ã€‚å®ƒé‡‡ç”¨äº†ä¸€ç§æ¥å£æ–¹æ³•å£°æ˜è¯·æ±‚çš„æ–¹å¼ï¼Œä½¿ç”¨æ–¹æ³•æ³¨è§£å’Œæ–¹æ³•å‚æ•°æ³¨è§£è¿›è¡Œæ ‡è®°è¯·æ±‚ä¿¡æ¯ï¼Œé€šè¿‡åŠ¨æ€ä»£ç†è®¿é—®æ¥å£æ–¹æ³•å¹¶è§£æMethodï¼Œæœ€åå°†è¯·æ±‚ä¿¡æ¯æ±‡æ€»ç»„è£…æˆokhttp3.Requestå¯¹è±¡ï¼Œå†æ ¹æ®æ¥å£æ–¹æ³•è¿”å›å€¼ç±»å‹å†³å®šè°ƒç”¨é€‚é…å™¨(CallAdapter)ï¼Œå†…éƒ¨é€šè¿‡okhttp3.Call.enqueue(..) æˆ–okhttp3.Call.execute() åŒæ­¥/å¼‚æ­¥è¯·æ±‚ï¼Œè¯·æ±‚å“åº”åé€šè¿‡è½¬æ¢å™¨(Converter)æŠŠokhttp3.ResponseBodyæ•°æ®å†è¿›è¡Œä¸€æ¬¡è½¬æ¢å¾—åˆ°æœ€åçš„æ•°æ®ã€‚</p>
<h2 id="2-suspend-guan-jian-zi-kotlin-xie-cheng-fang-shi-shi-yong">2.suspend å…³é”®å­—ï¼ŒKotlin åç¨‹æ–¹å¼ä½¿ç”¨<a class="zola-anchor" href="#2-suspend-guan-jian-zi-kotlin-xie-cheng-fang-shi-shi-yong" aria-label="Anchor link for: 2-suspend-guan-jian-zi-kotlin-xie-cheng-fang-shi-shi-yong">ğŸ”—</a></h2>
<p>æ¥å£æ–¹æ³•æ ‡è®°ä¸ºsuspendï¼Œä¼šæŠŠè¿”å›ç±»å‹T åŒ…è£…æˆCall<T>ï¼Œç„¶åä½¿ç”¨å¼‚æ­¥(enqueue)ï¼Œé€šè¿‡KotlinExtensions.ktä¸‹çš„Call<T>.await()åŒ…è£…æˆåç¨‹æ‰§è¡Œï¼ˆè¯·æ±‚æ—¶æŒ‚èµ·åç¨‹ï¼Œå“åº”ååç¨‹resumeç»§ç»­æ‰§è¡Œï¼‰ã€‚</p>
<h2 id="3-calladaptershi-xian-lei-jie-shao">3.CallAdapterå®ç°ç±»ä»‹ç»<a class="zola-anchor" href="#3-calladaptershi-xian-lei-jie-shao" aria-label="Anchor link for: 3-calladaptershi-xian-lei-jie-shao">ğŸ”—</a></h2>
<ul>
<li><code>RxJava2CallAdapterFactory</code>.create(isAsync);//isAsync = true or falseæ¥åˆ¤æ–­æ˜¯å¦æ˜¯å¼‚æ­¥æˆ–åŒæ­¥è¯·æ±‚ã€‚é»˜è®¤æ˜¯åŒæ­¥è¯·æ±‚ä¹Ÿå°±æ˜¯falseã€‚</li>
<li>é»˜è®¤çš„CallAdapterå®ç°ç±»
<ul>
<li><code>DefaultCallAdapterFactory</code>ï¼š<code>Call&lt;T&gt;ç±»å‹çš„ï¼Œè°ƒç”¨åŒæ­¥(execute)æˆ–å¼‚æ­¥(enqueue)ã€‚</code></li>
<li><code>CompletableFutureCallAdapterFactory</code>ï¼š<code>CompletableFuture&lt;T&gt;ç±»å‹çš„ï¼Œä½¿ç”¨å¼‚æ­¥(enqueue)ã€‚</code></li>
</ul>
</li>
</ul>
<h2 id="4-yong-fa">4.ç”¨æ³•<a class="zola-anchor" href="#4-yong-fa" aria-label="Anchor link for: 4-yong-fa">ğŸ”—</a></h2>
<p>è¿™ä¸€å°èŠ‚é€šè¿‡ä¸€ç³»åˆ—ä¸åŒè¯·æ±‚æ–¹å¼çš„ä»£ç æ¥å±•ç¤ºç›¸å…³çš„ç”¨æ³•ã€‚
ä¸»è¦åˆ†ä¸º6ä¸ªæ–‡ä»¶ï¼Œå…·ä½“ä»£ç æ–‡ä»¶åœ¨æœ€åé¢ã€‚</p>
<ul>
<li>ServiceInterface.kt å£°æ˜æ¥å£è¯·æ±‚</li>
<li>Main.kt æµ‹è¯•æ¥å£è¯·æ±‚</li>
<li>ApiConverterFactory.java è½¬æ¢å™¨å·¥å‚ç±»</li>
<li>ApiRequestBodyConverter.java  è½¬ä¸ºRequestBodyå¯¹è±¡è½¬æ¢å™¨ç±» ï¼ˆ@Part å‚æ•°å¯¹è±¡è½¬ä¸ºRequestBodyï¼‰</li>
<li>ApiResponseBodyConverter.java  ResponseBodyå¯¹è±¡è½¬æ¢å™¨ç±»</li>
<li>HttpBinResponse.java  ResponseBodyè£…å¥½åçš„æ•°æ®ç±»</li>
</ul>
<h3 id="4-1-ji-ben-yong-fa">4.1 åŸºæœ¬ç”¨æ³•<a class="zola-anchor" href="#4-1-ji-ben-yong-fa" aria-label="Anchor link for: 4-1-ji-ben-yong-fa">ğŸ”—</a></h3>
<ul>
<li>1.GET è¯·æ±‚ä¸‹è½½æ–‡ä»¶</li>
<li>2.GET è¯·æ±‚</li>
<li>3.GET è¯·æ±‚ æŸ¥è¯¢?name=value</li>
<li>4.GET è¯·æ±‚ æŸ¥è¯¢?name</li>
<li>5.POST è¯·æ±‚</li>
<li>6.POST è¯·æ±‚  è¡¨å•æ•°æ®æäº¤ name="åå­—"&amp;content="å†…å®¹"</li>
<li>7.POST è¯·æ±‚  å¤šéƒ¨åˆ†è¡¨å•æäº¤ multipart/form-data</li>
</ul>
<h3 id="4-2-jin-jie-yong-fa">4.2 è¿›é˜¶ç”¨æ³•<a class="zola-anchor" href="#4-2-jin-jie-yong-fa" aria-label="Anchor link for: 4-2-jin-jie-yong-fa">ğŸ”—</a></h3>
<ul>
<li>1.é€šè¿‡@URL è¯·æ±‚ä¸€ä¸ªä¸åŒåœ°å€çš„URL</li>
<li>2.é€šè¿‡Interceptoræ‹¦æˆªå™¨ï¼Œå®ç°åŠ¨æ€è®¾ç½®ä¸åŒBaseUrl</li>
</ul>
<h2 id="5-yuan-ma-ju-ti-shi-li-fen-xi">5. æºç å…·ä½“ç¤ºä¾‹åˆ†æ<a class="zola-anchor" href="#5-yuan-ma-ju-ti-shi-li-fen-xi" aria-label="Anchor link for: 5-yuan-ma-ju-ti-shi-li-fen-xi">ğŸ”—</a></h2>
<p>è¿™ä¸€å°èŠ‚ï¼Œé€šè¿‡ä¸€ä¸ªpostè¡¨å•æäº¤æ¢³ç†ä¸‹æ‰§è¡Œæµç¨‹ã€‚ä»¥ä¸‹æ˜¯è¿™ä¸ªpostè¯·æ±‚çš„ä»£ç ï¼šåˆ†ä¸ºä¸‰éƒ¨åˆ†</p>
<ul>
<li>1.æ¥å£è¯·æ±‚å£°æ˜éƒ¨åˆ†</li>
<li>2.Retrofitç±»æ„å»ºï¼Œå¹¶è¿”å›æ¥å£çš„å®ç°ç±»éƒ¨åˆ†</li>
<li>3.æ¥å£è¯·æ±‚æµ‹è¯•éƒ¨åˆ†</li>
</ul>
<pre><code>interface ServiceInterface {
...
companion object {
        var BASE_URL = &quot;http:&#x2F;&#x2F;www.httpbin.org&#x2F;&quot;
    }
@POST(&quot;&#x2F;post&quot;)
    @FormUrlEncoded
    fun post(@Field(&quot;name&quot;) name:String,@Field(&quot;content&quot;) content:String): Call&lt;ResponseBody&gt;
...
}
public class Main {
...
private static ServiceInterface sServiceInterface
 = new Retrofit.Builder()
.baseUrl(ServiceInterface.Companion.getBASE_URL())
.client(new OkHttpClient.Builder().build())
.addCallAdapterFactory(RxJava2CallAdapterFactory.create())
.addConverterFactory(ApiConverterFactory.create())
.build()
.create(ServiceInterface.class);
&#x2F;**
     * Postè¯·æ±‚ï¼Œè¡¨å•æäº¤ @FormUrlEncoded @Field
     *&#x2F;
    @Test
    public void testPostFormUrlEncoded(){
        String s = null;
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.post(&quot;åå­—&quot;,&quot;å†…å®¹&quot;).execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }
...
}
</code></pre>
<p>ä»<code>sServiceInterface.post("åå­—","å†…å®¹").execute();</code>å¼€å§‹åˆ†æ
1.å…ˆçœ‹çœ‹<code>sServiceInterface</code>æ˜¯æ€ä¹ˆåˆ›å»ºçš„?
2.å†çœ‹çœ‹è°ƒç”¨<code>post("åå­—","å†…å®¹")</code>æ–¹æ³•æ˜¯æ€ä¹ˆå›äº‹?
3.æœ€åçœ‹ä¸‹æ‰§è¡Œ<code>execute()</code>æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ</p>
<h3 id="kai-shi-fen-xi-1">å¼€å§‹åˆ†æ1.<a class="zola-anchor" href="#kai-shi-fen-xi-1" aria-label="Anchor link for: kai-shi-fen-xi-1">ğŸ”—</a></h3>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">&#x2F;&#x2F;å…ˆè¿›å…¥Retrofit#create(..)æ–¹æ³•
public &lt;T&gt; T create(final Class&lt;T&gt; service) {
    return (T)
        Proxy.newProxyInstance(
            service.getClassLoader(),
            new Class&lt;?&gt;[] {service},
            new InvocationHandler() {
            ...
              @Override
              public @Nullable Object invoke(Object proxy, Method method, @Nullable Object[] args)
                  throws Throwable {
               ...
                return platform.isDefaultMethod(method)
                    ? platform.invokeDefaultMethod(method, service, proxy, args)
                    : loadServiceMethod(method).invoke(args); &#x2F;&#x2F;çœ‹é‡ç‚¹éƒ¨åˆ†
              }
            });
&#x2F;&#x2F;åˆ†æ1ç»“æŸï¼Œé€šè¿‡Proxy.newProxyInstance(..)åŠ¨æ€ä»£ç†è·å–æ¥å£ServiceInterfaceä»£ç†å¯¹è±¡ã€‚
</code></pre>
<h3 id="kai-shi-fen-xi-2">å¼€å§‹åˆ†æ2.<a class="zola-anchor" href="#kai-shi-fen-xi-2" aria-label="Anchor link for: kai-shi-fen-xi-2">ğŸ”—</a></h3>
<p>ä»ä¸Šä¸€æ­¥çš„<code>loadServiceMethod(method).invoke(args)</code>å¼€å§‹åˆ†ä¸º2ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>2.1 <code>loadServiceMethod(method)</code></li>
<li>2.2 è°ƒç”¨<code>invoke(args)</code>æ–¹æ³•</li>
</ul>
<h4 id="kai-shi-fen-xi-2-1-loadservicemethod-method">å¼€å§‹åˆ†æ2.1 <code>loadServiceMethod(method)</code><a class="zola-anchor" href="#kai-shi-fen-xi-2-1-loadservicemethod-method" aria-label="Anchor link for: kai-shi-fen-xi-2-1-loadservicemethod-method">ğŸ”—</a></h4>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java"> &#x2F;&#x2F;ä»Retrofit#loadServiceMethod(..)å¼€å§‹
  ServiceMethod&lt;?&gt; loadServiceMethod(Method method) {
       ...
        result = ServiceMethod.parseAnnotations(this, method);
       ...
    }
    return result;
  }
&#x2F;&#x2F;ServiceMethod#parseAnnotations(..)
  static &lt;T&gt; ServiceMethod&lt;T&gt; parseAnnotations(Retrofit retrofit, Method method) {
    &#x2F;&#x2F;è§£æç”ŸæˆRequestFactoryå¯¹è±¡ï¼Œå…·ä½“æµç¨‹åœ¨ã€æµç¨‹å›¾ã€‘å›¾ç‰‡æœ‰æè¿°
    RequestFactory requestFactory = RequestFactory.parseAnnotations(retrofit, method);
    return HttpServiceMethod.parseAnnotations(retrofit, method, requestFactory);
  }

&#x2F;&#x2F;HttpServiceMethod.parseAnnotations(..)
  static &lt;ResponseT, ReturnT&gt; HttpServiceMethod&lt;ResponseT, ReturnT&gt; parseAnnotations(
      Retrofit retrofit, Method method, RequestFactory requestFactory) {
    ...
      adapterType = method.getGenericReturnType();
    ...
  &#x2F;&#x2F;è·å–è°ƒç”¨é€‚é…å™¨CallAdapterå¯¹è±¡ï¼Œå…·ä½“æµç¨‹åœ¨ã€æµç¨‹å›¾ã€‘å›¾ç‰‡æœ‰æè¿°
    CallAdapter&lt;ResponseT, ReturnT&gt; callAdapter =
        createCallAdapter(retrofit, method, adapterType, annotations);
    Type responseType = callAdapter.responseType();
    ...
  &#x2F;&#x2F;è·å–è½¬æ¢å™¨Converterå¯¹è±¡ï¼Œå…·ä½“æµç¨‹åœ¨ã€æµç¨‹å›¾ã€‘å›¾ç‰‡æœ‰æè¿°
    Converter&lt;ResponseBody, ResponseT&gt; responseConverter =
        createResponseConverter(retrofit, method, responseType);
  ...
  okhttp3.Call.Factory callFactory = retrofit.callFactory;
  return new CallAdapted&lt;&gt;(requestFactory, callFactory, responseConverter, callAdapter);
  ...
  }
&#x2F;**CallAdapted extends HttpServiceMethod&lt;ResponseT, ReturnT&gt;
HttpServiceMethod&lt;ResponseT, ReturnT&gt; extends ServiceMethod&lt;ReturnT&gt;
**&#x2F;
&#x2F;&#x2F;æœ€åè¿”å›CallAdaptedå¯¹è±¡ï¼Œåˆ†æ2.1ç»“æŸã€‚
</code></pre>
<h4 id="kai-shi-fen-xi-2-2-diao-yong-invoke-args-fang-fa">å¼€å§‹åˆ†æ 2.2  è°ƒç”¨<code>invoke(args)</code>æ–¹æ³•<a class="zola-anchor" href="#kai-shi-fen-xi-2-2-diao-yong-invoke-args-fang-fa" aria-label="Anchor link for: kai-shi-fen-xi-2-2-diao-yong-invoke-args-fang-fa">ğŸ”—</a></h4>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">&#x2F;**CallAdaptedä¸­æ²¡æœ‰invokeæ–¹æ³•ï¼Œinvokeæ–¹æ³•çš„å®ç°ä½äºå®ƒçš„çˆ¶ç±»HttpServiceMethodä¸­**&#x2F;
&#x2F;&#x2F;HttpServiceMethod#invoke(..)
 @Override
  final @Nullable ReturnT invoke(Object[] args) {
    Call&lt;ResponseT&gt; call = new OkHttpCall&lt;&gt;(requestFactory, args, callFactory, responseConverter);
    return adapt(call, args);
  }
&#x2F;&#x2F;adapt(call, args)æ–¹æ³•çš„å®ç°ä½äºCallAdaptedä¸­
&#x2F;&#x2F;CallAdapted#adapt(..)
    @Override
    protected ReturnT adapt(Call&lt;ResponseT&gt; call, Object[] args) {
      return callAdapter.adapt(call);
    }
&#x2F;**è°ƒç”¨åˆ°CallAdapter#adapt(call)æ–¹æ³•ï¼Œç”±äºä¹‹å‰è¯·æ±‚æ¥å£æ–¹æ³•è¿”å›å€¼æ˜¯Call&lt;ResponseBody&gt;ï¼Œæ‰€ä»¥è°ƒç”¨DefaultCallAdapterFactory#get(..)è¿”å›callAdapterå¯¹è±¡
**&#x2F;
&#x2F;&#x2F;DefaultCallAdapterFactory#get(..)
  @Override
  public @Nullable CallAdapter&lt;?, ?&gt; get(
      Type returnType, Annotation[] annotations, Retrofit retrofit) {
    ...
    return new CallAdapter&lt;Object, Call&lt;?&gt;&gt;() {
      @Override
      public Type responseType() {
        return responseType;
      }
      @Override
      public Call&lt;Object&gt; adapt(Call&lt;Object&gt; call) {
        return executor == null ? call : new ExecutorCallbackCall&lt;&gt;(executor, call);
      }
    };
  }
&#x2F;&#x2F;æœ€åè¿”å›ExecutorCallbackCallå¯¹è±¡ï¼Œåˆ†æ2.2ç»“æŸ
</code></pre>
<h3 id="kai-shi-fen-xi-3">å¼€å§‹åˆ†æ3.<a class="zola-anchor" href="#kai-shi-fen-xi-3" aria-label="Anchor link for: kai-shi-fen-xi-3">ğŸ”—</a></h3>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">&#x2F;&#x2F;ä»ä¸Šä¸€æ­¥æœ€åè¿”å›ExecutorCallbackCallå¯¹è±¡ï¼Œå¼€å§‹åˆ†æ
&#x2F;&#x2F;åœ¨ExecutorCallbackCallç±»ä¸­
...
   ExecutorCallbackCall(Executor callbackExecutor, Call&lt;T&gt; delegate) {
      this.callbackExecutor = callbackExecutor;
      this.delegate = delegate;
    }
&#x2F;&#x2F;ExecutorCallbackCall#execute()
    @Override
    public Response&lt;T&gt; execute() throws IOException {
      return delegate.execute();
    }
&#x2F;&#x2F;ç”±ä¸Šå¯çŸ¥delegateæ˜¯OkHttpCallå¯¹è±¡
&#x2F;&#x2F;OkHttpCall#execute()
  @Override
  public Response&lt;T&gt; execute() throws IOException {
    okhttp3.Call call;
    ...
      &#x2F;&#x2F;è·å–okhttp3.Callå¯¹è±¡ï¼Œå…·ä½“æµç¨‹åœ¨ã€æµç¨‹å›¾ã€‘å›¾ç‰‡æœ‰æè¿°
      call = getRawCall();
    }
    ...
    return parseResponse(call.execute());
  }
&#x2F;&#x2F;OkHttpCall#parseResponse(call.execute())
  Response&lt;T&gt; parseResponse(okhttp3.Response rawResponse) throws IOException {
    ResponseBody rawBody = rawResponse.body();
    ...
    ExceptionCatchingResponseBody catchingBody = new ExceptionCatchingResponseBody(rawBody);
    try {
      &#x2F;&#x2F;Converterè½¬æ¢å™¨è½¬æ¢æ•°æ®ï¼Œç„¶åè¿”å›
      T body = responseConverter.convert(catchingBody);
      return Response.success(body, rawResponse);
    } catch (RuntimeException e) {
      catchingBody.throwIfCaught();
      throw e;
    }
  }
&#x2F;&#x2F;æœ€åConverterè½¬æ¢å™¨è½¬æ¢æ•°æ®ï¼Œç„¶åè¿”å›retrofit2.Responseå¯¹è±¡ï¼Œåˆ†æ3ç»“æŸã€‚
</code></pre>
<h3 id="zong-jie">æ€»ç»“<a class="zola-anchor" href="#zong-jie" aria-label="Anchor link for: zong-jie">ğŸ”—</a></h3>
<p><code>sServiceInterface.post("åå­—","å†…å®¹").execute();</code></p>
<ul>
<li>1.<code>sServiceInterface</code>é€šè¿‡Proxy.newProxyInstance(..)åŠ¨æ€ä»£ç†è·å–æ¥å£ServiceInterfaceä»£ç†å¯¹è±¡ã€‚</li>
<li>2.è°ƒç”¨<code>post("åå­—","å†…å®¹")</code>æ–¹æ³•æ—¶ï¼Œå¼€å§‹æ‰§è¡ŒåŠ¨æ€ä»£ç†å†…éƒ¨æ–¹æ³•ï¼Œé€šè¿‡å±‚å±‚è§£æè¿”å›ExecutorCallbackCallç±»ï¼Œå…¶ä¸­åŒ…å«OkHttpCallå¯¹è±¡å˜é‡ï¼ŒOkHttpCallä¸­ä¸»è¦åŒ…å«äº†ä¸€äº›okhttp3.Requestã€okhttp3.Call.execute()ç­‰å¤„ç†ã€‚</li>
<li>3.æ‰§è¡Œ<code>execute()</code>ï¼Œæœ€åå°±æ˜¯æ‰§è¡Œäº†okhttp3.Call.execute()ã€‚</li>
</ul>
<h3 id="qi-ta">å…¶ä»–<a class="zola-anchor" href="#qi-ta" aria-label="Anchor link for: qi-ta">ğŸ”—</a></h3>
<ul>
<li>1.å¯¹äºsuperå’Œextendsçš„ä¸Šç•Œä¸‹ç•Œï¼š
List&lt;? super Food&gt; è¡¨ç¤ºFoodçš„è¶…ç±»ï¼Œè¯´æ˜Foodæ˜¯?çš„ä¸‹ç•Œ ï¼ˆåªèƒ½addï¼Œä¸èƒ½getï¼‰
List&lt;? extends Fruit&gt; è¡¨ç¤ºFruitçš„å­ç±»ï¼Œè¯´æ˜Fruitæ˜¯?çš„ä¸Šç•Œ ï¼ˆåªèƒ½getï¼Œä¸èƒ½addï¼‰
class Food{}
class Fruit extends Food {}</li>
</ul>
<hr />
<h2 id="6-fu-lu">6. é™„å½•<a class="zola-anchor" href="#6-fu-lu" aria-label="Anchor link for: 6-fu-lu">ğŸ”—</a></h2>
<p>ã€4ã€‘ç”¨æ³•ç¤ºä¾‹æºç </p>
<pre data-lang="kotlin" class="language-kotlin "><code class="language-kotlin" data-lang="kotlin">interface ServiceInterface {

    companion object {
        var BASE_URL = &quot;http:&#x2F;&#x2F;www.httpbin.org&#x2F;&quot;
    }

    @Streaming
    @GET
    fun downloadFile(
        @Header(&quot;RANGE&quot;) downParam: String,
        @Url fileUrl: String
    ): Call&lt;ResponseBody&gt;

    @GET(&quot;&#x2F;&quot;)
    fun get(): Call&lt;ResponseBody&gt;

    @GET(&quot;&#x2F;get&quot;)
    fun get(@Query(&quot;name&quot;)name:String,@Query(&quot;content&quot;)content: String): Call&lt;HttpBinResponse&gt;

    @GET(&quot;&#x2F;get&quot;)
    fun get(@QueryName name:String): Call&lt;ResponseBody&gt;

    @POST(&quot;&#x2F;post&quot;)
    fun post(): Call&lt;ResponseBody&gt;

    @POST(&quot;&#x2F;post&quot;)
    @FormUrlEncoded
    fun post(@Field(&quot;name&quot;) name:String,@Field(&quot;content&quot;) content:String): Call&lt;ResponseBody&gt;

    @POST(&quot;&#x2F;post&quot;)
    @Multipart
    fun post(@Part(&quot;va&quot;) va:RequestBody,@Part(&quot;name\&quot;; filename=\&quot;name.png&quot;)name: File, @Part(&quot;name2\&quot;; filename=\&quot;name2.png&quot;)name2: File): Call&lt;ResponseBody&gt;
}
</code></pre>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">public class Main {

    private static ServiceInterface sServiceInterface = new Retrofit.Builder().baseUrl(ServiceInterface.Companion.getBASE_URL()).client(
            new OkHttpClient.Builder().addInterceptor(new Interceptor() {

                private volatile String host;

                public void setHost(String host) {
                    this.host = host;
                }

                @NotNull
                @Override
                public okhttp3.Response intercept(@NotNull Chain chain) throws IOException {
                        Request request = chain.request();
                    String host = this.host;
                    if (host != null) {
                        HttpUrl newUrl = request.url().newBuilder().host(host).build();
                        request = request.newBuilder().url(newUrl).build();
                    }
                    return chain.proceed(request);
                }
            }).build())
            .addCallAdapterFactory(RxJava2CallAdapterFactory.create())
            .addConverterFactory(ApiConverterFactory.create())
            .build().create(ServiceInterface.class);

    {
&#x2F;&#x2F;        System.setProperty(&quot;http.proxyHost&quot;, &quot;127.0.0.1&quot;);
&#x2F;&#x2F;        System.setProperty(&quot;https.proxyHost&quot;, &quot;127.0.0.1&quot;);
&#x2F;&#x2F;        System.setProperty(&quot;http.proxyPort&quot;, &quot;8888&quot;);
&#x2F;&#x2F;        System.setProperty(&quot;https.proxyPort&quot;, &quot;8888&quot;);
    }

    public static void main(String[] args) throws Exception {
    }

    &#x2F;**
     * Getè¯·æ±‚,
     *&#x2F;
    @Test
    public void testGet(){
        String s = null;
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.get().execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }

    &#x2F;**
     * Getè¯·æ±‚ä¸‹è½½ï¼Œå¸¦æœ‰ @Streaming
     *&#x2F;
    @Test
    public void testGetDownload(){
        String url = &quot;https:&#x2F;&#x2F;www.httpbin.org&#x2F;image&#x2F;png&quot;;
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.downloadFile(&quot;Range: bytes=0-&quot;,url).execute();
            BufferedSink sink = Okio.buffer(Okio.sink(new File(&quot;C:\\Users\\Administrator\\Desktop&quot;, &quot;testImage.png&quot;)));
            sink.writeAll(response.body().source());
            sink.close();
            System.out.println(&quot;reqå›¾ç‰‡&quot;);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }


    &#x2F;**
     * Getè¯·æ±‚,å¸¦æœ‰@QueryName ?name
     *&#x2F;
    @Test
    public void testGetQueryName(){
        String s = null;
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.get(&quot;name&quot;).execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }

    &#x2F;**
     * Getè¯·æ±‚,å¸¦æœ‰@Query ?name=value&amp;name2=value2
     *&#x2F;
    @Test
    public void testGetQuery(){
        String s = null;
        try {
            Response&lt;HttpBinResponse&gt; response = sServiceInterface.get(&quot;åå­—&quot;,&quot;å†…å®¹&quot;).execute();
            s = response.body().getData();
            System.out.println(&quot;url=&quot;+new Gson().fromJson(s,HttpBinResponse.Entity.class).getUrl()+&quot; \n&quot;+s);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    &#x2F;**
     * Postè¯·æ±‚
     *&#x2F;
    @Test
    public void testPost(){
        String s = null;
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.post().execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }

    &#x2F;**
     * Postè¯·æ±‚ï¼Œè¡¨å•æäº¤ @FormUrlEncoded @Field
     *&#x2F;
    @Test
    public void testPostFormUrlEncoded(){
        String s = null;
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.post(&quot;åå­—&quot;,&quot;å†…å®¹&quot;).execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }

    &#x2F;**
     * Postè¯·æ±‚ï¼Œå¤šéƒ¨åˆ†è¡¨å•æäº¤ @Multipart @Part
     *&#x2F;
    @Test
    public void testPostMultipart() {
        RequestBody aa = RequestBody.create(&quot;name=11&amp;value=22&quot;, MediaType.parse(&quot;text&#x2F;plain&quot;));
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.post(aa,new File(&quot;C:\\Users\\Administrator\\Desktop\\1.png&quot;),new File(&quot;C:\\Users\\Administrator\\Desktop\\2.png&quot;)).execute();
            String s = response.body().string();
            System.out.println(s);
            HttpBinResponse.Entity entity = new Gson().fromJson(s, HttpBinResponse.Entity.class);
            String name = entity.getFile().get(&quot;name&quot;).replace(&quot;data:image&#x2F;png;base64,&quot;,&quot;&quot;);
            File file = new File(&quot;C:\\Users\\Administrator\\Desktop\\multipart.png&quot;);
            FileOutputStream out = new FileOutputStream(file);
            out.write(Base64.getDecoder().decode(name));
            out.flush();
            out.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">public class ApiConverterFactory extends Converter.Factory{

    public static ApiConverterFactory create(){
        return new ApiConverterFactory();
    }

    @Nullable
    @Override
    public Converter&lt;?, RequestBody&gt; requestBodyConverter(Type type, Annotation[] parameterAnnotations, Annotation[] methodAnnotations, Retrofit retrofit) {
        return new ApiRequestBodyConverter();
    }

    @Nullable
    @Override
    public Converter&lt;ResponseBody, ?&gt; responseBodyConverter(Type type, Annotation[] annotations, Retrofit retrofit) {
        return new ApiResponseBodyConverter();
    }
}
</code></pre>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">public class ApiRequestBodyConverter implements Converter&lt;File, RequestBody&gt; {
    @Nullable
    @Override
    public RequestBody convert(File value) throws IOException {
        if(value.getAbsolutePath().contains(&quot;.png&quot;)){
            RequestBody bodyParams = RequestBody.create(value,MediaType.parse(&quot;image&#x2F;png&quot;));
            return bodyParams;
        }
        return null;
    }
}
</code></pre>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">public class ApiResponseBodyConverter implements Converter&lt;ResponseBody, HttpBinResponse&gt; {

    @Nullable
    @Override
    public HttpBinResponse convert(ResponseBody value) throws IOException {
        String json = value.string();
        HttpBinResponse response = new HttpBinResponse();
        try{
            response.setCode(1);
            response.setMessage(&quot;Success&quot;);
            response.setData(json);
        }catch (Exception e){
            e.printStackTrace();
        }
        return response;
    }
}
</code></pre>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">public class HttpBinResponse {

    private String message;
    private int code;
    private Entity entity;
    private String data;

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }

    public int getCode() {
        return code;
    }

    public void setCode(int code) {
        this.code = code;
    }

    public Entity getEntity() {
        return entity;
    }

    public void setEntity(Entity entity) {
        this.entity = entity;
    }

    public String getData() {
        return data;
    }

    public void setData(String data) {
        this.data = data;
    }

    public static class Entity{
        private Object args;
        private String data;
        private Map&lt;String,String&gt; files;
        private Map&lt;String,String&gt; form;
        private Map&lt;String,String&gt; headers;
        private String json;
        private String origin;
        private String url;

        public Object getArg() {
            return args;
        }

        public void setArg(Object arg) {
            args = arg;
        }

        public String getData() {
            return data;
        }

        public void setData(String data) {
            this.data = data;
        }

        public Map&lt;String,String&gt; getFile() {
            return files;
        }

        public void setFile(Map&lt;String,String&gt; file) {
            files = file;
        }

        public Map&lt;String, String&gt; getForm() {
            return form;
        }

        public void setForm(Map&lt;String, String&gt; form) {
            this.form = form;
        }

        public Map&lt;String, String&gt; getHeader() {
            return headers;
        }

        public void setHeader(Map&lt;String, String&gt; header) {
            headers = header;
        }

        public String getJson() {
            return json;
        }

        public void setJson(String json) {
            this.json = json;
        }

        public String getOrigin() {
            return origin;
        }

        public void setOrigin(String origin) {
            this.origin = origin;
        }

        public String getUrl() {
            return url;
        }

        public void setUrl(String url) {
            this.url = url;
        }

        @Override
        public String toString() {
            return &quot;Data{&quot; +
                    &quot;args=&quot; + args +
                    &quot;, data=&#x27;&quot; + data + &#x27;\&#x27;&#x27; +
                    &quot;, files=&quot; + files +
                    &quot;, form=&quot; + form +
                    &quot;, headers=&quot; + headers +
                    &quot;, json=&#x27;&quot; + json + &#x27;\&#x27;&#x27; +
                    &quot;, origin=&#x27;&quot; + origin + &#x27;\&#x27;&#x27; +
                    &quot;, url=&#x27;&quot; + url + &#x27;\&#x27;&#x27; +
                    &#x27;}&#x27;;
        }
    }
}
</code></pre>

    <div class="muted text-sm">
      <a title="2022-03-06" class="no-underline u-url p-name entry-title" rel="bookmark" href="https://obelieve.github.io/blog/retrofityuan-ma-fen-xi-2-10-0-snapshot/">
        <time class="dt-published published" datetime="2022-03-06">2022.03.06</time>
      </a>
      
      <span>&nbsp;on</span>
      <a title="Notes" class="no-underline p-category" rel="category tag" href="https://obelieve.github.io/categories/notes/">
          Notes
        </a>
      

    </div>
  </article>
  
          
          
    <div class="pagination py">
      <ul class="list-none flex justify-between">
        
          <li class="disabled">
            <a title="First" class="no-underline" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;retrofit&#x2F;">&larrb;</a>
          </li>
        
        
          <li class="disabled">
            <a title="Previous"  class="no-underline" href="#">&larr;</a>
          </li>
        
        <li>
          <a title="All Posts" class="no-underline" href="https://obelieve.github.io/archive/">1/1</a>
        </li>
        
          <li class="disabled">
            <a title="Next" class="no-underline" href="#">&rarr;</a>
          </li>
        
        
          <li class="disabled">
            <a title="Last" class="no-underline" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;retrofit&#x2F;">&rarrb;</a>
          </li>
        
      </ul>
    </div>
  
        
      </div>
    </div>
  
          </div>
        </div>
        
        <aside class="sidebar px">
          

          
          <h2 id="zhong-yao-lian-jie">é‡è¦é“¾æ¥</h2>
<ul>
<li><a href="https://github.com/obelieve">Github ä¸»é¡µ</a></li>
</ul>
<h2 id="guan-yu">å…³äº</h2>
<ul>
<li><a href="/about/">å…³äºæˆ‘</a></li>
</ul>
<h2 id="dao-hang">å¯¼èˆª</h2>
<ul>
<li><a href="https://obelieve.github.io/blog/quotes/">é˜…è¯»æ‘˜è¦</a></li>
<li><a href="https://obelieve.github.io/blog/askill/">æ”¶é›†å°æŠ€å·§</a></li>
</ul>

          <div class="taxonomy-list-page pt">
            <div class="main-box-block">
              <div class="by">æŒ‰ <a href="/categories/">åˆ†ç±»</a> æŸ¥çœ‹ï¼š</div>
              
              <details class="pb-sm">
                <summary class="text-bigger">Notes&nbsp;(<a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;categories&#x2F;notes&#x2F;">10</a>)</summary>
                <ul>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;android-zi-yuan-xian-ding-fu&#x2F;">Android èµ„æºé™å®šç¬¦</a>
    <span class="muted text-sm">2025-12-21</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;kotlin-re-liu-he-leng-liu&#x2F;">Kotlin çƒ­æµå’Œå†·æµ</a>
    <span class="muted text-sm">2025-12-04</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;bian-cheng-yu-yan-chang-yong-de-shu-ju-jie-gou-api&#x2F;">ç¼–ç¨‹è¯­è¨€å¸¸ç”¨çš„æ•°æ®ç»“æ„api</a>
    <span class="muted text-sm">2025-11-25</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;celeryku&#x2F;">Celery åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—</a>
    <span class="muted text-sm">2025-09-04</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;askill&#x2F;">æ”¶é›†å°æŠ€å·§</a>
    <span class="muted text-sm">2025-09-03</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;quotes&#x2F;">é˜…è¯»æ‘˜è¦</a>
    <span class="muted text-sm">2025-09-18</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;guan-yu-http&#x2F;">å…³äºHTTP</a>
    <span class="muted text-sm">2025-09-16</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;uijiao-hu-she-ji-yuan-ze&#x2F;">UIäº¤äº’è®¾è®¡åŸåˆ™</a>
    <span class="muted text-sm">2025-09-07</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;retrofityuan-ma-fen-xi-2-10-0-snapshot&#x2F;">Retrofitæºç åˆ†æ 2.10.0-SNAPSHOT</a>
    <span class="muted text-sm">2025-09-03</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;pythonyu-fa&#x2F;">Pythonè¯­æ³•</a>
    <span class="muted text-sm">2025-09-03</span>
  </li>
                  
                </ul>
              </details>
              
            </div>
          </div>

          <div class="taxonomy-list-page pt">
            <div class="main-box-block">
              <div class="main-box-block">
                <div class="by">æŒ‰ <a href="/archive/">å½’æ¡£</a> æŸ¥çœ‹ï¼š</div>
                
                <details class="pb-sm">
                  <summary class="text-bigger">2025</summary>
                  <ul>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;android-zi-yuan-xian-ding-fu&#x2F;">Android èµ„æºé™å®šç¬¦</a>
    <span class="muted text-sm">2025-12-21</span>
  </li>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;kotlin-re-liu-he-leng-liu&#x2F;">Kotlin çƒ­æµå’Œå†·æµ</a>
    <span class="muted text-sm">2025-12-04</span>
  </li>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;bian-cheng-yu-yan-chang-yong-de-shu-ju-jie-gou-api&#x2F;">ç¼–ç¨‹è¯­è¨€å¸¸ç”¨çš„æ•°æ®ç»“æ„api</a>
    <span class="muted text-sm">2025-11-25</span>
  </li>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;celeryku&#x2F;">Celery åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—</a>
    <span class="muted text-sm">2025-09-04</span>
  </li>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;askill&#x2F;">æ”¶é›†å°æŠ€å·§</a>
    <span class="muted text-sm">2025-09-03</span>
  </li>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;quotes&#x2F;">é˜…è¯»æ‘˜è¦</a>
    <span class="muted text-sm">2025-09-18</span>
  </li>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;guan-yu-http&#x2F;">å…³äºHTTP</a>
    <span class="muted text-sm">2025-09-16</span>
  </li>
                    
                  </ul>
                </details>
                
                <details class="pb-sm">
                  <summary class="text-bigger">2024</summary>
                  <ul>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;uijiao-hu-she-ji-yuan-ze&#x2F;">UIäº¤äº’è®¾è®¡åŸåˆ™</a>
    <span class="muted text-sm">2025-09-07</span>
  </li>
                    
                  </ul>
                </details>
                
                <details class="pb-sm">
                  <summary class="text-bigger">2022</summary>
                  <ul>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;retrofityuan-ma-fen-xi-2-10-0-snapshot&#x2F;">Retrofitæºç åˆ†æ 2.10.0-SNAPSHOT</a>
    <span class="muted text-sm">2025-09-03</span>
  </li>
                    
                  </ul>
                </details>
                
                <details class="pb-sm">
                  <summary class="text-bigger">2021</summary>
                  <ul>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;blog&#x2F;pythonyu-fa&#x2F;">Pythonè¯­æ³•</a>
    <span class="muted text-sm">2025-09-03</span>
  </li>
                    
                  </ul>
                </details>
                
              </div>
            </div>
          </div>


          <h2>
            <a class="no-underline" title="æ ‡ç­¾"
              href="&#x2F;tags/">æ ‡ç­¾</a>
          </h2>
          <ul class="list-none text-sm">
            
            <li class="inline">
              <a class="no-underline" title="About" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;about&#x2F;">About(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="Android" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;android&#x2F;">Android(2)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="api" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;api&#x2F;">api(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="Book" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;book&#x2F;">Book(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="http" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;http&#x2F;">http(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="Kotlin" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;kotlin&#x2F;">Kotlin(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="Okhttp" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;okhttp&#x2F;">Okhttp(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="Python" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;python&#x2F;">Python(2)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="Retrofit" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;retrofit&#x2F;">Retrofit(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="Shell" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;shell&#x2F;">Shell(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="UI" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;ui&#x2F;">UI(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="èµ„æºé™å®šç¬¦" href="https:&#x2F;&#x2F;obelieve.github.io&#x2F;tags&#x2F;zi-yuan-xian-ding-fu&#x2F;">èµ„æºé™å®šç¬¦(1)</a>
            </li>
            
          </ul>
        </aside>
        
      </div>
    </div>
    </div>
  <div id="bottom"></div>
  </body>

</html>