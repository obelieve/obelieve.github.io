<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh">
    <title>Obelieveçš„åšå®¢ - Android</title>
    <link rel="self" type="application/atom+xml" href="https://obelieve.github.io/tags/android/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://obelieve.github.io"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2026-02-07T00:00:00+00:00</updated>
    <id>https://obelieve.github.io/tags/android/atom.xml</id>
    <entry xml:lang="zh">
        <title>Android æ¨¡æ‹Ÿå™¨åˆ›å»ºç³»ç»Ÿåº”ç”¨</title>
        <published>2026-02-07T00:00:00+00:00</published>
        <updated>2026-02-07T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Obelieve
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://obelieve.github.io/blog/android-mo-ni-qi-chuang-jian-xi-tong-ying-yong/"/>
        <id>https://obelieve.github.io/blog/android-mo-ni-qi-chuang-jian-xi-tong-ying-yong/</id>
        
        <content type="html" xml:base="https://obelieve.github.io/blog/android-mo-ni-qi-chuang-jian-xi-tong-ying-yong/">&lt;p&gt;Androidåº”ç”¨ä½¿ç”¨åˆ°ç³»ç»Ÿçº§çš„APIï¼Œéœ€è¦å¯¹apkè¿›è¡Œç³»ç»Ÿçº§ç­¾åï¼Œæœ¬æ–‡è®°å½•ä¸‹åœ¨Android æ¨¡æ‹Ÿå™¨ä¸­åˆ›å»ºç³»ç»Ÿåº”ç”¨çš„æµç¨‹ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;1-aospjing-xiang-chuang-jian-mo-ni-qi&quot;&gt;1.AOSPé•œåƒåˆ›å»ºæ¨¡æ‹Ÿå™¨&lt;a class=&quot;zola-anchor&quot; href=&quot;#1-aospjing-xiang-chuang-jian-mo-ni-qi&quot; aria-label=&quot;Anchor link for: 1-aospjing-xiang-chuang-jian-mo-ni-qi&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;åœ¨Android Studioä¸­çš„Tools-&amp;gt;Device Manager-&amp;gt;Add Deviceï¼Œé€‰æ‹©Android Open Sourceåˆ›å»ºæ¨¡æ‹Ÿå™¨ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;2-sheng-cheng-aospde-xi-tong-qian-ming-wen-jian&quot;&gt;2.ç”ŸæˆAOSPçš„ç³»ç»Ÿç­¾åæ–‡ä»¶&lt;a class=&quot;zola-anchor&quot; href=&quot;#2-sheng-cheng-aospde-xi-tong-qian-ming-wen-jian&quot; aria-label=&quot;Anchor link for: 2-sheng-cheng-aospde-xi-tong-qian-ming-wen-jian&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;ç”Ÿæˆjksç­¾åæ–‡ä»¶ä½¿ç”¨åˆ°&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;getfatday&#x2F;keytool-importkeypair&quot;&gt;keytool-importkeypair&lt;&#x2F;a&gt;ï¼Œç”Ÿæˆç³»ç»Ÿç­¾åæ–‡ä»¶ã€‚&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;obelieve&#x2F;AOSP-jks&quot;&gt;AOSP-jks&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre data-lang=&quot;shell&quot; class=&quot;language-shell &quot;&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;keytool-importkeypairÂ [-k keystore] [-p storepass] -pk8 pk8 -cert cert -alias key_alias
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;gradleæ–‡ä»¶é…ç½®ç­¾åæ–‡ä»¶&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre data-lang=&quot;groovy&quot; class=&quot;language-groovy &quot;&gt;&lt;code class=&quot;language-groovy&quot; data-lang=&quot;groovy&quot;&gt;signingConfigs {  
    getByName(&amp;quot;debug&amp;quot;) {  
        keyAlias = &amp;quot;aa&amp;quot;  
        keyPassword = &amp;quot;123456&amp;quot;  
        storeFile = file(&amp;quot;..&amp;#x2F;keystore&amp;#x2F;platform_123456_aa_.jks&amp;quot;)  
        storePassword = &amp;quot;123456&amp;quot;  
    }  
    create(&amp;quot;release&amp;quot;) {  
        keyAlias = &amp;quot;aa&amp;quot;  
        keyPassword = &amp;quot;123456&amp;quot;  
        storeFile = file(&amp;quot;..&amp;#x2F;keystore&amp;#x2F;platform_123456_aa_.jks&amp;quot;)  
        storePassword = &amp;quot;123456&amp;quot;  
    }  
  
}  
  
buildTypes {  
    release {  
        proguardFiles(getDefaultProguardFile(&amp;quot;proguard-android-optimize.txt&amp;quot;), &amp;quot;proguard-rules.pro&amp;quot;)  
        signingConfig = signingConfigs.getByName(&amp;quot;release&amp;quot;)  
    }  
    debug {  
        signingConfig = signingConfigs.getByName(&amp;quot;debug&amp;quot;)  
    }  
}
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;fu-apkjin-xing-xi-tong-ji-qian-ming&quot;&gt;é™„ï¼š apkè¿›è¡Œç³»ç»Ÿçº§ç­¾å&lt;a class=&quot;zola-anchor&quot; href=&quot;#fu-apkjin-xing-xi-tong-ji-qian-ming&quot; aria-label=&quot;Anchor link for: fu-apkjin-xing-xi-tong-ji-qian-ming&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ç§æ˜¯å¯¹apkç›´æ¥ç³»ç»Ÿçº§ç­¾åï¼Œè¿™ä¸ªè¿˜æ²¡è¯•è¿‡ï¼Œæš‚ä¸”è®°å½•ä¸‹ğŸ“ã€‚&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;android.googlesource.com&#x2F;platform&#x2F;build&#x2F;+&#x2F;master&#x2F;target&#x2F;product&#x2F;security&quot;&gt;AOSPæºç &lt;&#x2F;a&gt;ä¸­æ‰¾åˆ°ç­¾åæ–‡ä»¶platform.pk8 å’Œ platform.x509.pem&lt;&#x2F;li&gt;
&lt;li&gt;åœ¨Android SDKä¸­æ‰¾åˆ°$ANDROID_HOME&#x2F;build-tools&#x2F;33.0.0ï¼ˆé€‰æ‹©å…¶ä¸­ä¸€ä¸ªç‰ˆæœ¬ï¼‰ï¼Œæ‰¾åˆ°apksigner ç¨‹åºæ‰§è¡Œä¸‹é¢å‘½ä»¤ç›´æ¥ç­¾åapkã€‚
&lt;code&gt;apksigner sign --key platform.pk8 --cert platform.x509.pem &amp;lt;path of YourAPK&amp;gt;&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;3-dao-ru-apkdao-xi-tong-jing-xiang&quot;&gt;3.å¯¼å…¥apkåˆ°ç³»ç»Ÿé•œåƒ&lt;a class=&quot;zola-anchor&quot; href=&quot;#3-dao-ru-apkdao-xi-tong-jing-xiang&quot; aria-label=&quot;Anchor link for: 3-dao-ru-apkdao-xi-tong-jing-xiang&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;shell&quot; class=&quot;language-shell &quot;&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;#å¯åŠ¨æ¨¡æ‹Ÿå™¨ï¼Œç½®ä¸ºå¯å†™çŠ¶æ€
emulator -avd &amp;lt;YourAVDNameHere&amp;gt; -writable-system
#å¯¼å…¥apkåˆ°ç³»ç»Ÿç›®å½•ä¸‹
adb root 
adb remount 
adb shell mkdir &amp;#x2F;system&amp;#x2F;app&amp;#x2F;&amp;lt;YourAppFolder&amp;gt; 
adb push &amp;lt;YourAPK&amp;gt; &amp;#x2F;system&amp;#x2F;app&amp;#x2F;&amp;lt;YourAppFolder&amp;gt;&amp;#x2F; 
adb reboot
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;4-ying-yong-zhong-shi-yong-uid&quot;&gt;4.åº”ç”¨ä¸­ä½¿ç”¨uid&lt;a class=&quot;zola-anchor&quot; href=&quot;#4-ying-yong-zhong-shi-yong-uid&quot; aria-label=&quot;Anchor link for: 4-ying-yong-zhong-shi-yong-uid&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;xml&quot; class=&quot;language-xml &quot;&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&amp;lt;manifest xmlns:tools=&amp;quot;http:&amp;#x2F;&amp;#x2F;schemas.android.com&amp;#x2F;tools&amp;quot;  
    package=&amp;quot;com.zxy.demo&amp;quot;  
          xmlns:android=&amp;quot;http:&amp;#x2F;&amp;#x2F;schemas.android.com&amp;#x2F;apk&amp;#x2F;res&amp;#x2F;android&amp;quot;  
    android:sharedUserId=&amp;quot;android.uid.system&amp;quot;&amp;gt;
&amp;lt;&amp;#x2F;manifest&amp;gt;
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="zh">
        <title>Android èµ„æºé™å®šç¬¦</title>
        <published>2025-12-21T00:00:00+00:00</published>
        <updated>2025-12-21T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Obelieve
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://obelieve.github.io/blog/android-zi-yuan-xian-ding-fu/"/>
        <id>https://obelieve.github.io/blog/android-zi-yuan-xian-ding-fu/</id>
        
        <content type="html" xml:base="https://obelieve.github.io/blog/android-zi-yuan-xian-ding-fu/">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;developer.android.com&#x2F;guide&#x2F;topics&#x2F;resources&#x2F;providing-resources?hl=zh-cn#BestMatch&quot;&gt;å®˜æ–¹èµ„æºé™å®šç¬¦æŸ¥æ‰¾é¡ºåº&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;sw-n-dp&quot;&gt;&lt;code&gt;sw&amp;lt;N&amp;gt;dp&lt;&#x2F;code&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#sw-n-dp&quot; aria-label=&quot;Anchor link for: sw-n-dp&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;åº”ç”¨å¯ç”¨å±å¹•åŒºåŸŸçš„æœ€çŸ­å°ºå¯¸ï¼Œç³»ç»Ÿä¼šé€‰æ‹©æœ€æ¥è¿‘ï¼ˆä½†ä¸è¶…è¿‡ï¼‰è®¾å¤‡çš„å€¼ã€‚&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é™å®šç¬¦é¡ºåºï¼š&lt;code&gt;drawable-sw300dp-xhdpi&lt;&#x2F;code&gt;ï¼Œä¸ç„¶ä¼šæŠ¥é”™ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹äº &lt;code&gt;drawable&lt;&#x2F;code&gt; èµ„æºï¼šå¦‚æœåªæœ‰ä¸€ä¸ªèµ„æºï¼Œåªåœ¨æŸä¸ª&lt;code&gt;drawable-sw&amp;lt;N&amp;gt;dp&lt;&#x2F;code&gt;ç›®å½•ä¸‹ï¼Œç¼–è¯‘æ—¶ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å¦‚æœswä¸åŒ¹é…ï¼Œåº”ç”¨ä¼šåˆ¤å®šæ‰¾ä¸åˆ°èµ„æºï¼Œ&lt;code&gt;åº”ç”¨ä¼šå¥”æºƒ&lt;&#x2F;code&gt;ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹äº &lt;code&gt;values&lt;&#x2F;code&gt; èµ„æºï¼šå¦‚æœåªæœ‰ä¸€ä¸ªèµ„æºï¼Œåªåœ¨æŸä¸ª&lt;code&gt;values-sw&amp;lt;N&amp;gt;dp&lt;&#x2F;code&gt;å®šä¹‰IDEä¼šæç¤ºæŠ¥é”™ï¼Œå¿…é¡» &lt;code&gt;values&lt;&#x2F;code&gt; è¦æœ‰å®šä¹‰åŒåçš„èµ„æºã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="zh">
        <title>Retrofitæºç åˆ†æ 2.10.0-SNAPSHOT</title>
        <published>2022-03-06T00:00:00+00:00</published>
        <updated>2025-09-03T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Obelieve
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://obelieve.github.io/blog/retrofityuan-ma-fen-xi-2-10-0-snapshot/"/>
        <id>https://obelieve.github.io/blog/retrofityuan-ma-fen-xi-2-10-0-snapshot/</id>
        
        <content type="html" xml:base="https://obelieve.github.io/blog/retrofityuan-ma-fen-xi-2-10-0-snapshot/">&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;obelieve.top&#x2F;site&#x2F;images&#x2F;retrofit%E6%B5%81%E7%A8%8B%E5%9B%BE.png&quot; alt=&quot;æµç¨‹å›¾.png&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;1-jie-shao&quot;&gt;1. ä»‹ç»&lt;a class=&quot;zola-anchor&quot; href=&quot;#1-jie-shao&quot; aria-label=&quot;Anchor link for: 1-jie-shao&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Retrofitä¸»è¦æ˜¯åŸºäºOKHttpè¿›ä¸€æ­¥å°è£…çš„ç½‘ç»œè¯·æ±‚çš„æ¡†æ¶ã€‚å®ƒé‡‡ç”¨äº†ä¸€ç§æ¥å£æ–¹æ³•å£°æ˜è¯·æ±‚çš„æ–¹å¼ï¼Œä½¿ç”¨æ–¹æ³•æ³¨è§£å’Œæ–¹æ³•å‚æ•°æ³¨è§£è¿›è¡Œæ ‡è®°è¯·æ±‚ä¿¡æ¯ï¼Œé€šè¿‡åŠ¨æ€ä»£ç†è®¿é—®æ¥å£æ–¹æ³•å¹¶è§£æMethodï¼Œæœ€åå°†è¯·æ±‚ä¿¡æ¯æ±‡æ€»ç»„è£…æˆokhttp3.Requestå¯¹è±¡ï¼Œå†æ ¹æ®æ¥å£æ–¹æ³•è¿”å›å€¼ç±»å‹å†³å®šè°ƒç”¨é€‚é…å™¨(CallAdapter)ï¼Œå†…éƒ¨é€šè¿‡okhttp3.Call.enqueue(..) æˆ–okhttp3.Call.execute() åŒæ­¥&#x2F;å¼‚æ­¥è¯·æ±‚ï¼Œè¯·æ±‚å“åº”åé€šè¿‡è½¬æ¢å™¨(Converter)æŠŠokhttp3.ResponseBodyæ•°æ®å†è¿›è¡Œä¸€æ¬¡è½¬æ¢å¾—åˆ°æœ€åçš„æ•°æ®ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;2-suspend-guan-jian-zi-kotlin-xie-cheng-fang-shi-shi-yong&quot;&gt;2.suspend å…³é”®å­—ï¼ŒKotlin åç¨‹æ–¹å¼ä½¿ç”¨&lt;a class=&quot;zola-anchor&quot; href=&quot;#2-suspend-guan-jian-zi-kotlin-xie-cheng-fang-shi-shi-yong&quot; aria-label=&quot;Anchor link for: 2-suspend-guan-jian-zi-kotlin-xie-cheng-fang-shi-shi-yong&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;æ¥å£æ–¹æ³•æ ‡è®°ä¸ºsuspendï¼Œä¼šæŠŠè¿”å›ç±»å‹T åŒ…è£…æˆCall&lt;T&gt;ï¼Œç„¶åä½¿ç”¨å¼‚æ­¥(enqueue)ï¼Œé€šè¿‡KotlinExtensions.ktä¸‹çš„Call&lt;T&gt;.await()åŒ…è£…æˆåç¨‹æ‰§è¡Œï¼ˆè¯·æ±‚æ—¶æŒ‚èµ·åç¨‹ï¼Œå“åº”ååç¨‹resumeç»§ç»­æ‰§è¡Œï¼‰ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;3-calladaptershi-xian-lei-jie-shao&quot;&gt;3.CallAdapterå®ç°ç±»ä»‹ç»&lt;a class=&quot;zola-anchor&quot; href=&quot;#3-calladaptershi-xian-lei-jie-shao&quot; aria-label=&quot;Anchor link for: 3-calladaptershi-xian-lei-jie-shao&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;RxJava2CallAdapterFactory&lt;&#x2F;code&gt;.create(isAsync);&#x2F;&#x2F;isAsync = true or falseæ¥åˆ¤æ–­æ˜¯å¦æ˜¯å¼‚æ­¥æˆ–åŒæ­¥è¯·æ±‚ã€‚é»˜è®¤æ˜¯åŒæ­¥è¯·æ±‚ä¹Ÿå°±æ˜¯falseã€‚&lt;&#x2F;li&gt;
&lt;li&gt;é»˜è®¤çš„CallAdapterå®ç°ç±»
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;DefaultCallAdapterFactory&lt;&#x2F;code&gt;ï¼š&lt;code&gt;Call&amp;lt;T&amp;gt;ç±»å‹çš„ï¼Œè°ƒç”¨åŒæ­¥(execute)æˆ–å¼‚æ­¥(enqueue)ã€‚&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;CompletableFutureCallAdapterFactory&lt;&#x2F;code&gt;ï¼š&lt;code&gt;CompletableFuture&amp;lt;T&amp;gt;ç±»å‹çš„ï¼Œä½¿ç”¨å¼‚æ­¥(enqueue)ã€‚&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;4-yong-fa&quot;&gt;4.ç”¨æ³•&lt;a class=&quot;zola-anchor&quot; href=&quot;#4-yong-fa&quot; aria-label=&quot;Anchor link for: 4-yong-fa&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;è¿™ä¸€å°èŠ‚é€šè¿‡ä¸€ç³»åˆ—ä¸åŒè¯·æ±‚æ–¹å¼çš„ä»£ç æ¥å±•ç¤ºç›¸å…³çš„ç”¨æ³•ã€‚
ä¸»è¦åˆ†ä¸º6ä¸ªæ–‡ä»¶ï¼Œå…·ä½“ä»£ç æ–‡ä»¶åœ¨æœ€åé¢ã€‚&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;ServiceInterface.kt å£°æ˜æ¥å£è¯·æ±‚&lt;&#x2F;li&gt;
&lt;li&gt;Main.kt æµ‹è¯•æ¥å£è¯·æ±‚&lt;&#x2F;li&gt;
&lt;li&gt;ApiConverterFactory.java è½¬æ¢å™¨å·¥å‚ç±»&lt;&#x2F;li&gt;
&lt;li&gt;ApiRequestBodyConverter.java  è½¬ä¸ºRequestBodyå¯¹è±¡è½¬æ¢å™¨ç±» ï¼ˆ@Part å‚æ•°å¯¹è±¡è½¬ä¸ºRequestBodyï¼‰&lt;&#x2F;li&gt;
&lt;li&gt;ApiResponseBodyConverter.java  ResponseBodyå¯¹è±¡è½¬æ¢å™¨ç±»&lt;&#x2F;li&gt;
&lt;li&gt;HttpBinResponse.java  ResponseBodyè£…å¥½åçš„æ•°æ®ç±»&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;4-1-ji-ben-yong-fa&quot;&gt;4.1 åŸºæœ¬ç”¨æ³•&lt;a class=&quot;zola-anchor&quot; href=&quot;#4-1-ji-ben-yong-fa&quot; aria-label=&quot;Anchor link for: 4-1-ji-ben-yong-fa&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;1.GET è¯·æ±‚ä¸‹è½½æ–‡ä»¶&lt;&#x2F;li&gt;
&lt;li&gt;2.GET è¯·æ±‚&lt;&#x2F;li&gt;
&lt;li&gt;3.GET è¯·æ±‚ æŸ¥è¯¢?name=value&lt;&#x2F;li&gt;
&lt;li&gt;4.GET è¯·æ±‚ æŸ¥è¯¢?name&lt;&#x2F;li&gt;
&lt;li&gt;5.POST è¯·æ±‚&lt;&#x2F;li&gt;
&lt;li&gt;6.POST è¯·æ±‚  è¡¨å•æ•°æ®æäº¤ name=&quot;åå­—&quot;&amp;amp;content=&quot;å†…å®¹&quot;&lt;&#x2F;li&gt;
&lt;li&gt;7.POST è¯·æ±‚  å¤šéƒ¨åˆ†è¡¨å•æäº¤ multipart&#x2F;form-data&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;4-2-jin-jie-yong-fa&quot;&gt;4.2 è¿›é˜¶ç”¨æ³•&lt;a class=&quot;zola-anchor&quot; href=&quot;#4-2-jin-jie-yong-fa&quot; aria-label=&quot;Anchor link for: 4-2-jin-jie-yong-fa&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;1.é€šè¿‡@URL è¯·æ±‚ä¸€ä¸ªä¸åŒåœ°å€çš„URL&lt;&#x2F;li&gt;
&lt;li&gt;2.é€šè¿‡Interceptoræ‹¦æˆªå™¨ï¼Œå®ç°åŠ¨æ€è®¾ç½®ä¸åŒBaseUrl&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;5-yuan-ma-ju-ti-shi-li-fen-xi&quot;&gt;5. æºç å…·ä½“ç¤ºä¾‹åˆ†æ&lt;a class=&quot;zola-anchor&quot; href=&quot;#5-yuan-ma-ju-ti-shi-li-fen-xi&quot; aria-label=&quot;Anchor link for: 5-yuan-ma-ju-ti-shi-li-fen-xi&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;è¿™ä¸€å°èŠ‚ï¼Œé€šè¿‡ä¸€ä¸ªpostè¡¨å•æäº¤æ¢³ç†ä¸‹æ‰§è¡Œæµç¨‹ã€‚ä»¥ä¸‹æ˜¯è¿™ä¸ªpostè¯·æ±‚çš„ä»£ç ï¼šåˆ†ä¸ºä¸‰éƒ¨åˆ†&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;1.æ¥å£è¯·æ±‚å£°æ˜éƒ¨åˆ†&lt;&#x2F;li&gt;
&lt;li&gt;2.Retrofitç±»æ„å»ºï¼Œå¹¶è¿”å›æ¥å£çš„å®ç°ç±»éƒ¨åˆ†&lt;&#x2F;li&gt;
&lt;li&gt;3.æ¥å£è¯·æ±‚æµ‹è¯•éƒ¨åˆ†&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre&gt;&lt;code&gt;interface ServiceInterface {
...
companion object {
        var BASE_URL = &amp;quot;http:&amp;#x2F;&amp;#x2F;www.httpbin.org&amp;#x2F;&amp;quot;
    }
@POST(&amp;quot;&amp;#x2F;post&amp;quot;)
    @FormUrlEncoded
    fun post(@Field(&amp;quot;name&amp;quot;) name:String,@Field(&amp;quot;content&amp;quot;) content:String): Call&amp;lt;ResponseBody&amp;gt;
...
}
public class Main {
...
private static ServiceInterface sServiceInterface
 = new Retrofit.Builder()
.baseUrl(ServiceInterface.Companion.getBASE_URL())
.client(new OkHttpClient.Builder().build())
.addCallAdapterFactory(RxJava2CallAdapterFactory.create())
.addConverterFactory(ApiConverterFactory.create())
.build()
.create(ServiceInterface.class);
&amp;#x2F;**
     * Postè¯·æ±‚ï¼Œè¡¨å•æäº¤ @FormUrlEncoded @Field
     *&amp;#x2F;
    @Test
    public void testPostFormUrlEncoded(){
        String s = null;
        try {
            Response&amp;lt;ResponseBody&amp;gt; response = sServiceInterface.post(&amp;quot;åå­—&amp;quot;,&amp;quot;å†…å®¹&amp;quot;).execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }
...
}
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ä»&lt;code&gt;sServiceInterface.post(&quot;åå­—&quot;,&quot;å†…å®¹&quot;).execute();&lt;&#x2F;code&gt;å¼€å§‹åˆ†æ
1.å…ˆçœ‹çœ‹&lt;code&gt;sServiceInterface&lt;&#x2F;code&gt;æ˜¯æ€ä¹ˆåˆ›å»ºçš„?
2.å†çœ‹çœ‹è°ƒç”¨&lt;code&gt;post(&quot;åå­—&quot;,&quot;å†…å®¹&quot;)&lt;&#x2F;code&gt;æ–¹æ³•æ˜¯æ€ä¹ˆå›äº‹?
3.æœ€åçœ‹ä¸‹æ‰§è¡Œ&lt;code&gt;execute()&lt;&#x2F;code&gt;æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ&lt;&#x2F;p&gt;
&lt;h3 id=&quot;kai-shi-fen-xi-1&quot;&gt;å¼€å§‹åˆ†æ1.&lt;a class=&quot;zola-anchor&quot; href=&quot;#kai-shi-fen-xi-1&quot; aria-label=&quot;Anchor link for: kai-shi-fen-xi-1&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;pre data-lang=&quot;java&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&amp;#x2F;&amp;#x2F;å…ˆè¿›å…¥Retrofit#create(..)æ–¹æ³•
public &amp;lt;T&amp;gt; T create(final Class&amp;lt;T&amp;gt; service) {
    return (T)
        Proxy.newProxyInstance(
            service.getClassLoader(),
            new Class&amp;lt;?&amp;gt;[] {service},
            new InvocationHandler() {
            ...
              @Override
              public @Nullable Object invoke(Object proxy, Method method, @Nullable Object[] args)
                  throws Throwable {
               ...
                return platform.isDefaultMethod(method)
                    ? platform.invokeDefaultMethod(method, service, proxy, args)
                    : loadServiceMethod(method).invoke(args); &amp;#x2F;&amp;#x2F;çœ‹é‡ç‚¹éƒ¨åˆ†
              }
            });
&amp;#x2F;&amp;#x2F;åˆ†æ1ç»“æŸï¼Œé€šè¿‡Proxy.newProxyInstance(..)åŠ¨æ€ä»£ç†è·å–æ¥å£ServiceInterfaceä»£ç†å¯¹è±¡ã€‚
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;kai-shi-fen-xi-2&quot;&gt;å¼€å§‹åˆ†æ2.&lt;a class=&quot;zola-anchor&quot; href=&quot;#kai-shi-fen-xi-2&quot; aria-label=&quot;Anchor link for: kai-shi-fen-xi-2&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;ä»ä¸Šä¸€æ­¥çš„&lt;code&gt;loadServiceMethod(method).invoke(args)&lt;&#x2F;code&gt;å¼€å§‹åˆ†ä¸º2ä¸ªéƒ¨åˆ†ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;2.1 &lt;code&gt;loadServiceMethod(method)&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;2.2 è°ƒç”¨&lt;code&gt;invoke(args)&lt;&#x2F;code&gt;æ–¹æ³•&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;kai-shi-fen-xi-2-1-loadservicemethod-method&quot;&gt;å¼€å§‹åˆ†æ2.1 &lt;code&gt;loadServiceMethod(method)&lt;&#x2F;code&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#kai-shi-fen-xi-2-1-loadservicemethod-method&quot; aria-label=&quot;Anchor link for: kai-shi-fen-xi-2-1-loadservicemethod-method&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h4&gt;
&lt;pre data-lang=&quot;java&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt; &amp;#x2F;&amp;#x2F;ä»Retrofit#loadServiceMethod(..)å¼€å§‹
  ServiceMethod&amp;lt;?&amp;gt; loadServiceMethod(Method method) {
       ...
        result = ServiceMethod.parseAnnotations(this, method);
       ...
    }
    return result;
  }
&amp;#x2F;&amp;#x2F;ServiceMethod#parseAnnotations(..)
  static &amp;lt;T&amp;gt; ServiceMethod&amp;lt;T&amp;gt; parseAnnotations(Retrofit retrofit, Method method) {
    &amp;#x2F;&amp;#x2F;è§£æç”ŸæˆRequestFactoryå¯¹è±¡ï¼Œå…·ä½“æµç¨‹åœ¨ã€æµç¨‹å›¾ã€‘å›¾ç‰‡æœ‰æè¿°
    RequestFactory requestFactory = RequestFactory.parseAnnotations(retrofit, method);
    return HttpServiceMethod.parseAnnotations(retrofit, method, requestFactory);
  }

&amp;#x2F;&amp;#x2F;HttpServiceMethod.parseAnnotations(..)
  static &amp;lt;ResponseT, ReturnT&amp;gt; HttpServiceMethod&amp;lt;ResponseT, ReturnT&amp;gt; parseAnnotations(
      Retrofit retrofit, Method method, RequestFactory requestFactory) {
    ...
      adapterType = method.getGenericReturnType();
    ...
  &amp;#x2F;&amp;#x2F;è·å–è°ƒç”¨é€‚é…å™¨CallAdapterå¯¹è±¡ï¼Œå…·ä½“æµç¨‹åœ¨ã€æµç¨‹å›¾ã€‘å›¾ç‰‡æœ‰æè¿°
    CallAdapter&amp;lt;ResponseT, ReturnT&amp;gt; callAdapter =
        createCallAdapter(retrofit, method, adapterType, annotations);
    Type responseType = callAdapter.responseType();
    ...
  &amp;#x2F;&amp;#x2F;è·å–è½¬æ¢å™¨Converterå¯¹è±¡ï¼Œå…·ä½“æµç¨‹åœ¨ã€æµç¨‹å›¾ã€‘å›¾ç‰‡æœ‰æè¿°
    Converter&amp;lt;ResponseBody, ResponseT&amp;gt; responseConverter =
        createResponseConverter(retrofit, method, responseType);
  ...
  okhttp3.Call.Factory callFactory = retrofit.callFactory;
  return new CallAdapted&amp;lt;&amp;gt;(requestFactory, callFactory, responseConverter, callAdapter);
  ...
  }
&amp;#x2F;**CallAdapted extends HttpServiceMethod&amp;lt;ResponseT, ReturnT&amp;gt;
HttpServiceMethod&amp;lt;ResponseT, ReturnT&amp;gt; extends ServiceMethod&amp;lt;ReturnT&amp;gt;
**&amp;#x2F;
&amp;#x2F;&amp;#x2F;æœ€åè¿”å›CallAdaptedå¯¹è±¡ï¼Œåˆ†æ2.1ç»“æŸã€‚
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;kai-shi-fen-xi-2-2-diao-yong-invoke-args-fang-fa&quot;&gt;å¼€å§‹åˆ†æ 2.2  è°ƒç”¨&lt;code&gt;invoke(args)&lt;&#x2F;code&gt;æ–¹æ³•&lt;a class=&quot;zola-anchor&quot; href=&quot;#kai-shi-fen-xi-2-2-diao-yong-invoke-args-fang-fa&quot; aria-label=&quot;Anchor link for: kai-shi-fen-xi-2-2-diao-yong-invoke-args-fang-fa&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h4&gt;
&lt;pre data-lang=&quot;java&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&amp;#x2F;**CallAdaptedä¸­æ²¡æœ‰invokeæ–¹æ³•ï¼Œinvokeæ–¹æ³•çš„å®ç°ä½äºå®ƒçš„çˆ¶ç±»HttpServiceMethodä¸­**&amp;#x2F;
&amp;#x2F;&amp;#x2F;HttpServiceMethod#invoke(..)
 @Override
  final @Nullable ReturnT invoke(Object[] args) {
    Call&amp;lt;ResponseT&amp;gt; call = new OkHttpCall&amp;lt;&amp;gt;(requestFactory, args, callFactory, responseConverter);
    return adapt(call, args);
  }
&amp;#x2F;&amp;#x2F;adapt(call, args)æ–¹æ³•çš„å®ç°ä½äºCallAdaptedä¸­
&amp;#x2F;&amp;#x2F;CallAdapted#adapt(..)
    @Override
    protected ReturnT adapt(Call&amp;lt;ResponseT&amp;gt; call, Object[] args) {
      return callAdapter.adapt(call);
    }
&amp;#x2F;**è°ƒç”¨åˆ°CallAdapter#adapt(call)æ–¹æ³•ï¼Œç”±äºä¹‹å‰è¯·æ±‚æ¥å£æ–¹æ³•è¿”å›å€¼æ˜¯Call&amp;lt;ResponseBody&amp;gt;ï¼Œæ‰€ä»¥è°ƒç”¨DefaultCallAdapterFactory#get(..)è¿”å›callAdapterå¯¹è±¡
**&amp;#x2F;
&amp;#x2F;&amp;#x2F;DefaultCallAdapterFactory#get(..)
  @Override
  public @Nullable CallAdapter&amp;lt;?, ?&amp;gt; get(
      Type returnType, Annotation[] annotations, Retrofit retrofit) {
    ...
    return new CallAdapter&amp;lt;Object, Call&amp;lt;?&amp;gt;&amp;gt;() {
      @Override
      public Type responseType() {
        return responseType;
      }
      @Override
      public Call&amp;lt;Object&amp;gt; adapt(Call&amp;lt;Object&amp;gt; call) {
        return executor == null ? call : new ExecutorCallbackCall&amp;lt;&amp;gt;(executor, call);
      }
    };
  }
&amp;#x2F;&amp;#x2F;æœ€åè¿”å›ExecutorCallbackCallå¯¹è±¡ï¼Œåˆ†æ2.2ç»“æŸ
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;kai-shi-fen-xi-3&quot;&gt;å¼€å§‹åˆ†æ3.&lt;a class=&quot;zola-anchor&quot; href=&quot;#kai-shi-fen-xi-3&quot; aria-label=&quot;Anchor link for: kai-shi-fen-xi-3&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;pre data-lang=&quot;java&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&amp;#x2F;&amp;#x2F;ä»ä¸Šä¸€æ­¥æœ€åè¿”å›ExecutorCallbackCallå¯¹è±¡ï¼Œå¼€å§‹åˆ†æ
&amp;#x2F;&amp;#x2F;åœ¨ExecutorCallbackCallç±»ä¸­
...
   ExecutorCallbackCall(Executor callbackExecutor, Call&amp;lt;T&amp;gt; delegate) {
      this.callbackExecutor = callbackExecutor;
      this.delegate = delegate;
    }
&amp;#x2F;&amp;#x2F;ExecutorCallbackCall#execute()
    @Override
    public Response&amp;lt;T&amp;gt; execute() throws IOException {
      return delegate.execute();
    }
&amp;#x2F;&amp;#x2F;ç”±ä¸Šå¯çŸ¥delegateæ˜¯OkHttpCallå¯¹è±¡
&amp;#x2F;&amp;#x2F;OkHttpCall#execute()
  @Override
  public Response&amp;lt;T&amp;gt; execute() throws IOException {
    okhttp3.Call call;
    ...
      &amp;#x2F;&amp;#x2F;è·å–okhttp3.Callå¯¹è±¡ï¼Œå…·ä½“æµç¨‹åœ¨ã€æµç¨‹å›¾ã€‘å›¾ç‰‡æœ‰æè¿°
      call = getRawCall();
    }
    ...
    return parseResponse(call.execute());
  }
&amp;#x2F;&amp;#x2F;OkHttpCall#parseResponse(call.execute())
  Response&amp;lt;T&amp;gt; parseResponse(okhttp3.Response rawResponse) throws IOException {
    ResponseBody rawBody = rawResponse.body();
    ...
    ExceptionCatchingResponseBody catchingBody = new ExceptionCatchingResponseBody(rawBody);
    try {
      &amp;#x2F;&amp;#x2F;Converterè½¬æ¢å™¨è½¬æ¢æ•°æ®ï¼Œç„¶åè¿”å›
      T body = responseConverter.convert(catchingBody);
      return Response.success(body, rawResponse);
    } catch (RuntimeException e) {
      catchingBody.throwIfCaught();
      throw e;
    }
  }
&amp;#x2F;&amp;#x2F;æœ€åConverterè½¬æ¢å™¨è½¬æ¢æ•°æ®ï¼Œç„¶åè¿”å›retrofit2.Responseå¯¹è±¡ï¼Œåˆ†æ3ç»“æŸã€‚
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;zong-jie&quot;&gt;æ€»ç»“&lt;a class=&quot;zola-anchor&quot; href=&quot;#zong-jie&quot; aria-label=&quot;Anchor link for: zong-jie&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;code&gt;sServiceInterface.post(&quot;åå­—&quot;,&quot;å†…å®¹&quot;).execute();&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;1.&lt;code&gt;sServiceInterface&lt;&#x2F;code&gt;é€šè¿‡Proxy.newProxyInstance(..)åŠ¨æ€ä»£ç†è·å–æ¥å£ServiceInterfaceä»£ç†å¯¹è±¡ã€‚&lt;&#x2F;li&gt;
&lt;li&gt;2.è°ƒç”¨&lt;code&gt;post(&quot;åå­—&quot;,&quot;å†…å®¹&quot;)&lt;&#x2F;code&gt;æ–¹æ³•æ—¶ï¼Œå¼€å§‹æ‰§è¡ŒåŠ¨æ€ä»£ç†å†…éƒ¨æ–¹æ³•ï¼Œé€šè¿‡å±‚å±‚è§£æè¿”å›ExecutorCallbackCallç±»ï¼Œå…¶ä¸­åŒ…å«OkHttpCallå¯¹è±¡å˜é‡ï¼ŒOkHttpCallä¸­ä¸»è¦åŒ…å«äº†ä¸€äº›okhttp3.Requestã€okhttp3.Call.execute()ç­‰å¤„ç†ã€‚&lt;&#x2F;li&gt;
&lt;li&gt;3.æ‰§è¡Œ&lt;code&gt;execute()&lt;&#x2F;code&gt;ï¼Œæœ€åå°±æ˜¯æ‰§è¡Œäº†okhttp3.Call.execute()ã€‚&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;qi-ta&quot;&gt;å…¶ä»–&lt;a class=&quot;zola-anchor&quot; href=&quot;#qi-ta&quot; aria-label=&quot;Anchor link for: qi-ta&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;1.å¯¹äºsuperå’Œextendsçš„ä¸Šç•Œä¸‹ç•Œï¼š
List&amp;lt;? super Food&amp;gt; è¡¨ç¤ºFoodçš„è¶…ç±»ï¼Œè¯´æ˜Foodæ˜¯?çš„ä¸‹ç•Œ ï¼ˆåªèƒ½addï¼Œä¸èƒ½getï¼‰
List&amp;lt;? extends Fruit&amp;gt; è¡¨ç¤ºFruitçš„å­ç±»ï¼Œè¯´æ˜Fruitæ˜¯?çš„ä¸Šç•Œ ï¼ˆåªèƒ½getï¼Œä¸èƒ½addï¼‰
class Food{}
class Fruit extends Food {}&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;hr &#x2F;&gt;
&lt;h2 id=&quot;6-fu-lu&quot;&gt;6. é™„å½•&lt;a class=&quot;zola-anchor&quot; href=&quot;#6-fu-lu&quot; aria-label=&quot;Anchor link for: 6-fu-lu&quot;&gt;ğŸ”—&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;ã€4ã€‘ç”¨æ³•ç¤ºä¾‹æºç &lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;kotlin&quot; class=&quot;language-kotlin &quot;&gt;&lt;code class=&quot;language-kotlin&quot; data-lang=&quot;kotlin&quot;&gt;interface ServiceInterface {

    companion object {
        var BASE_URL = &amp;quot;http:&amp;#x2F;&amp;#x2F;www.httpbin.org&amp;#x2F;&amp;quot;
    }

    @Streaming
    @GET
    fun downloadFile(
        @Header(&amp;quot;RANGE&amp;quot;) downParam: String,
        @Url fileUrl: String
    ): Call&amp;lt;ResponseBody&amp;gt;

    @GET(&amp;quot;&amp;#x2F;&amp;quot;)
    fun get(): Call&amp;lt;ResponseBody&amp;gt;

    @GET(&amp;quot;&amp;#x2F;get&amp;quot;)
    fun get(@Query(&amp;quot;name&amp;quot;)name:String,@Query(&amp;quot;content&amp;quot;)content: String): Call&amp;lt;HttpBinResponse&amp;gt;

    @GET(&amp;quot;&amp;#x2F;get&amp;quot;)
    fun get(@QueryName name:String): Call&amp;lt;ResponseBody&amp;gt;

    @POST(&amp;quot;&amp;#x2F;post&amp;quot;)
    fun post(): Call&amp;lt;ResponseBody&amp;gt;

    @POST(&amp;quot;&amp;#x2F;post&amp;quot;)
    @FormUrlEncoded
    fun post(@Field(&amp;quot;name&amp;quot;) name:String,@Field(&amp;quot;content&amp;quot;) content:String): Call&amp;lt;ResponseBody&amp;gt;

    @POST(&amp;quot;&amp;#x2F;post&amp;quot;)
    @Multipart
    fun post(@Part(&amp;quot;va&amp;quot;) va:RequestBody,@Part(&amp;quot;name\&amp;quot;; filename=\&amp;quot;name.png&amp;quot;)name: File, @Part(&amp;quot;name2\&amp;quot;; filename=\&amp;quot;name2.png&amp;quot;)name2: File): Call&amp;lt;ResponseBody&amp;gt;
}
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;java&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;public class Main {

    private static ServiceInterface sServiceInterface = new Retrofit.Builder().baseUrl(ServiceInterface.Companion.getBASE_URL()).client(
            new OkHttpClient.Builder().addInterceptor(new Interceptor() {

                private volatile String host;

                public void setHost(String host) {
                    this.host = host;
                }

                @NotNull
                @Override
                public okhttp3.Response intercept(@NotNull Chain chain) throws IOException {
                        Request request = chain.request();
                    String host = this.host;
                    if (host != null) {
                        HttpUrl newUrl = request.url().newBuilder().host(host).build();
                        request = request.newBuilder().url(newUrl).build();
                    }
                    return chain.proceed(request);
                }
            }).build())
            .addCallAdapterFactory(RxJava2CallAdapterFactory.create())
            .addConverterFactory(ApiConverterFactory.create())
            .build().create(ServiceInterface.class);

    {
&amp;#x2F;&amp;#x2F;        System.setProperty(&amp;quot;http.proxyHost&amp;quot;, &amp;quot;127.0.0.1&amp;quot;);
&amp;#x2F;&amp;#x2F;        System.setProperty(&amp;quot;https.proxyHost&amp;quot;, &amp;quot;127.0.0.1&amp;quot;);
&amp;#x2F;&amp;#x2F;        System.setProperty(&amp;quot;http.proxyPort&amp;quot;, &amp;quot;8888&amp;quot;);
&amp;#x2F;&amp;#x2F;        System.setProperty(&amp;quot;https.proxyPort&amp;quot;, &amp;quot;8888&amp;quot;);
    }

    public static void main(String[] args) throws Exception {
    }

    &amp;#x2F;**
     * Getè¯·æ±‚,
     *&amp;#x2F;
    @Test
    public void testGet(){
        String s = null;
        try {
            Response&amp;lt;ResponseBody&amp;gt; response = sServiceInterface.get().execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }

    &amp;#x2F;**
     * Getè¯·æ±‚ä¸‹è½½ï¼Œå¸¦æœ‰ @Streaming
     *&amp;#x2F;
    @Test
    public void testGetDownload(){
        String url = &amp;quot;https:&amp;#x2F;&amp;#x2F;www.httpbin.org&amp;#x2F;image&amp;#x2F;png&amp;quot;;
        try {
            Response&amp;lt;ResponseBody&amp;gt; response = sServiceInterface.downloadFile(&amp;quot;Range: bytes=0-&amp;quot;,url).execute();
            BufferedSink sink = Okio.buffer(Okio.sink(new File(&amp;quot;C:\\Users\\Administrator\\Desktop&amp;quot;, &amp;quot;testImage.png&amp;quot;)));
            sink.writeAll(response.body().source());
            sink.close();
            System.out.println(&amp;quot;reqå›¾ç‰‡&amp;quot;);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }


    &amp;#x2F;**
     * Getè¯·æ±‚,å¸¦æœ‰@QueryName ?name
     *&amp;#x2F;
    @Test
    public void testGetQueryName(){
        String s = null;
        try {
            Response&amp;lt;ResponseBody&amp;gt; response = sServiceInterface.get(&amp;quot;name&amp;quot;).execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }

    &amp;#x2F;**
     * Getè¯·æ±‚,å¸¦æœ‰@Query ?name=value&amp;amp;name2=value2
     *&amp;#x2F;
    @Test
    public void testGetQuery(){
        String s = null;
        try {
            Response&amp;lt;HttpBinResponse&amp;gt; response = sServiceInterface.get(&amp;quot;åå­—&amp;quot;,&amp;quot;å†…å®¹&amp;quot;).execute();
            s = response.body().getData();
            System.out.println(&amp;quot;url=&amp;quot;+new Gson().fromJson(s,HttpBinResponse.Entity.class).getUrl()+&amp;quot; \n&amp;quot;+s);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    &amp;#x2F;**
     * Postè¯·æ±‚
     *&amp;#x2F;
    @Test
    public void testPost(){
        String s = null;
        try {
            Response&amp;lt;ResponseBody&amp;gt; response = sServiceInterface.post().execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }

    &amp;#x2F;**
     * Postè¯·æ±‚ï¼Œè¡¨å•æäº¤ @FormUrlEncoded @Field
     *&amp;#x2F;
    @Test
    public void testPostFormUrlEncoded(){
        String s = null;
        try {
            Response&amp;lt;ResponseBody&amp;gt; response = sServiceInterface.post(&amp;quot;åå­—&amp;quot;,&amp;quot;å†…å®¹&amp;quot;).execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }

    &amp;#x2F;**
     * Postè¯·æ±‚ï¼Œå¤šéƒ¨åˆ†è¡¨å•æäº¤ @Multipart @Part
     *&amp;#x2F;
    @Test
    public void testPostMultipart() {
        RequestBody aa = RequestBody.create(&amp;quot;name=11&amp;amp;value=22&amp;quot;, MediaType.parse(&amp;quot;text&amp;#x2F;plain&amp;quot;));
        try {
            Response&amp;lt;ResponseBody&amp;gt; response = sServiceInterface.post(aa,new File(&amp;quot;C:\\Users\\Administrator\\Desktop\\1.png&amp;quot;),new File(&amp;quot;C:\\Users\\Administrator\\Desktop\\2.png&amp;quot;)).execute();
            String s = response.body().string();
            System.out.println(s);
            HttpBinResponse.Entity entity = new Gson().fromJson(s, HttpBinResponse.Entity.class);
            String name = entity.getFile().get(&amp;quot;name&amp;quot;).replace(&amp;quot;data:image&amp;#x2F;png;base64,&amp;quot;,&amp;quot;&amp;quot;);
            File file = new File(&amp;quot;C:\\Users\\Administrator\\Desktop\\multipart.png&amp;quot;);
            FileOutputStream out = new FileOutputStream(file);
            out.write(Base64.getDecoder().decode(name));
            out.flush();
            out.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;java&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;public class ApiConverterFactory extends Converter.Factory{

    public static ApiConverterFactory create(){
        return new ApiConverterFactory();
    }

    @Nullable
    @Override
    public Converter&amp;lt;?, RequestBody&amp;gt; requestBodyConverter(Type type, Annotation[] parameterAnnotations, Annotation[] methodAnnotations, Retrofit retrofit) {
        return new ApiRequestBodyConverter();
    }

    @Nullable
    @Override
    public Converter&amp;lt;ResponseBody, ?&amp;gt; responseBodyConverter(Type type, Annotation[] annotations, Retrofit retrofit) {
        return new ApiResponseBodyConverter();
    }
}
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;java&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;public class ApiRequestBodyConverter implements Converter&amp;lt;File, RequestBody&amp;gt; {
    @Nullable
    @Override
    public RequestBody convert(File value) throws IOException {
        if(value.getAbsolutePath().contains(&amp;quot;.png&amp;quot;)){
            RequestBody bodyParams = RequestBody.create(value,MediaType.parse(&amp;quot;image&amp;#x2F;png&amp;quot;));
            return bodyParams;
        }
        return null;
    }
}
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;java&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;public class ApiResponseBodyConverter implements Converter&amp;lt;ResponseBody, HttpBinResponse&amp;gt; {

    @Nullable
    @Override
    public HttpBinResponse convert(ResponseBody value) throws IOException {
        String json = value.string();
        HttpBinResponse response = new HttpBinResponse();
        try{
            response.setCode(1);
            response.setMessage(&amp;quot;Success&amp;quot;);
            response.setData(json);
        }catch (Exception e){
            e.printStackTrace();
        }
        return response;
    }
}
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;java&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;public class HttpBinResponse {

    private String message;
    private int code;
    private Entity entity;
    private String data;

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }

    public int getCode() {
        return code;
    }

    public void setCode(int code) {
        this.code = code;
    }

    public Entity getEntity() {
        return entity;
    }

    public void setEntity(Entity entity) {
        this.entity = entity;
    }

    public String getData() {
        return data;
    }

    public void setData(String data) {
        this.data = data;
    }

    public static class Entity{
        private Object args;
        private String data;
        private Map&amp;lt;String,String&amp;gt; files;
        private Map&amp;lt;String,String&amp;gt; form;
        private Map&amp;lt;String,String&amp;gt; headers;
        private String json;
        private String origin;
        private String url;

        public Object getArg() {
            return args;
        }

        public void setArg(Object arg) {
            args = arg;
        }

        public String getData() {
            return data;
        }

        public void setData(String data) {
            this.data = data;
        }

        public Map&amp;lt;String,String&amp;gt; getFile() {
            return files;
        }

        public void setFile(Map&amp;lt;String,String&amp;gt; file) {
            files = file;
        }

        public Map&amp;lt;String, String&amp;gt; getForm() {
            return form;
        }

        public void setForm(Map&amp;lt;String, String&amp;gt; form) {
            this.form = form;
        }

        public Map&amp;lt;String, String&amp;gt; getHeader() {
            return headers;
        }

        public void setHeader(Map&amp;lt;String, String&amp;gt; header) {
            headers = header;
        }

        public String getJson() {
            return json;
        }

        public void setJson(String json) {
            this.json = json;
        }

        public String getOrigin() {
            return origin;
        }

        public void setOrigin(String origin) {
            this.origin = origin;
        }

        public String getUrl() {
            return url;
        }

        public void setUrl(String url) {
            this.url = url;
        }

        @Override
        public String toString() {
            return &amp;quot;Data{&amp;quot; +
                    &amp;quot;args=&amp;quot; + args +
                    &amp;quot;, data=&amp;#x27;&amp;quot; + data + &amp;#x27;\&amp;#x27;&amp;#x27; +
                    &amp;quot;, files=&amp;quot; + files +
                    &amp;quot;, form=&amp;quot; + form +
                    &amp;quot;, headers=&amp;quot; + headers +
                    &amp;quot;, json=&amp;#x27;&amp;quot; + json + &amp;#x27;\&amp;#x27;&amp;#x27; +
                    &amp;quot;, origin=&amp;#x27;&amp;quot; + origin + &amp;#x27;\&amp;#x27;&amp;#x27; +
                    &amp;quot;, url=&amp;#x27;&amp;quot; + url + &amp;#x27;\&amp;#x27;&amp;#x27; +
                    &amp;#x27;}&amp;#x27;;
        }
    }
}
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
</feed>
