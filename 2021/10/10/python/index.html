<!DOCTYPE html>




<html class="theme-next pisces" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="语法," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="Python语法[TOC] 注: 跨行字符串使用&#39;&#39;&#39;表示 callable(object)可调用对象判断函数，类是可调用对象，实例需要实现__call__方法 if条件句变式 &lt;A&gt; if &lt;B&gt; else &lt;C&gt; 默认返回A,如果B为False返回C if &lt;A&gt; is not &lt;B&gt;: 字面意思A不是B,为T">
<meta property="og:type" content="article">
<meta property="og:title" content="Python语法">
<meta property="og:url" content="http://yoursite.com/2021/10/10/python/index.html">
<meta property="og:site_name" content="Obelieve">
<meta property="og:description" content="Python语法[TOC] 注: 跨行字符串使用&#39;&#39;&#39;表示 callable(object)可调用对象判断函数，类是可调用对象，实例需要实现__call__方法 if条件句变式 &lt;A&gt; if &lt;B&gt; else &lt;C&gt; 默认返回A,如果B为False返回C if &lt;A&gt; is not &lt;B&gt;: 字面意思A不是B,为T">
<meta property="og:locale">
<meta property="article:published_time" content="2021-10-10T14:37:00.000Z">
<meta property="article:modified_time" content="2023-01-21T04:53:01.188Z">
<meta property="article:author" content="ZXY">
<meta property="article:tag" content="语法">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    sidebar: {"position":"right","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: false,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2021/10/10/python/"/>





  <title>Python语法 | Obelieve</title>
  














<meta name="generator" content="Hexo 6.3.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Obelieve</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/10/10/python/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/obelieve.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Obelieve">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Python语法</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-10-10T22:37:00+08:00">
                2021-10-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2021/10/10/python/" class="leancloud_visitors" data-flag-title="Python语法">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Python语法"><a href="#Python语法" class="headerlink" title="Python语法"></a>Python语法</h1><p>[TOC]</p>
<h2 id="注"><a href="#注" class="headerlink" title="注:"></a>注:</h2><ul>
<li>跨行字符串使用<code>&#39;&#39;&#39;</code>表示</li>
<li><code>callable(object)</code>可调用对象判断函数，类是可调用对象，实例需要实现<code>__call__</code>方法</li>
<li>if条件句变式<ul>
<li><code>&lt;A&gt; if &lt;B&gt; else &lt;C&gt;</code> 默认返回A,如果B为False返回C</li>
<li><code>if &lt;A&gt; is not &lt;B&gt;:</code> 字面意思A不是B,为True</li>
<li><code>if not &lt;A&gt;:</code> A是空(False),为True</li>
</ul>
</li>
<li>一个类中，相同方法名，后面方法覆盖前面方法</li>
<li>魔法方法<ul>
<li><code>__setattr__</code> 拦截赋值 重写该方法，当实例对属性进行赋值时，会调用该方法</li>
<li><code>__getattr__</code> 拦截运算 重写该方法，当实例直接引用不能存在的属性时，会调用该方法</li>
</ul>
</li>
<li><code>//</code> ：做除法并返回不大于结果的整数</li>
<li><code>[cls(**r) for r in rs]</code>,cls表示类接收一个关键字参数，rs表示迭代器。<br>  通过迭代器把关键字参数传入到cls中，然后返回一个list对象</li>
</ul>
<h2 id="1-执行模式"><a href="#1-执行模式" class="headerlink" title="1.执行模式"></a>1.执行模式</h2><h3 id="1-交互式模式-直接输入，并解释"><a href="#1-交互式模式-直接输入，并解释" class="headerlink" title="1.交互式模式(直接输入，并解释)"></a>1.交互式模式(直接输入，并解释)</h3><p><code>&gt;&gt;&gt;print(&quot;hello world&quot;)</code></p>
<h3 id="2-命令行模式"><a href="#2-命令行模式" class="headerlink" title="2.命令行模式"></a>2.命令行模式</h3><ul>
<li><p>2.1内置函数:</p>
<ul>
<li><p>I&#x2F;O<br>  input()<br>  print()</p>
</li>
<li><p>Python3.x使用Unicode编码：<br>  ord() #字符转为整数表示<br>  chr() #整数转为字符表示<br>  PS：ord(‘A’) 输出65<br>  chr(666) 输出’ʚ’</p>
</li>
<li><p>编码&#x2F;解码<br>  “ascii” 是bytes(字节方式,b前缀)，在bytes中，无法显示为ASCII字符的字节，用\x##显示。<br>  “utf-8”<br>  encode() #用什么编码,<br>  decode() #用什么解码<br>  PS： ‘A’.encode(‘ascii’)输出b’A’</p>
</li>
<li><p>其他<br>  len() #字符&#x2F;字节长度<br>  format() #格式化输出<br>  help(<func_name>) #查看函数用法</p>
</li>
<li><p>重新加载模块</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import importlib</span><br><span class="line">importlib.reload(&lt;module_name&gt;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="2-语法-关键字"><a href="#2-语法-关键字" class="headerlink" title="2.语法-关键字"></a>2.语法-关键字</h2><h3 id="2-1变量类型任意-动态语言，变量类型固定-静态语言"><a href="#2-1变量类型任意-动态语言，变量类型固定-静态语言" class="headerlink" title="2.1变量类型任意-动态语言，变量类型固定-静态语言"></a>2.1变量类型任意-动态语言，变量类型固定-静态语言</h3><ul>
<li>1.语句缩进风格，大小写区分</li>
<li>2.数据类型：<br>浮点型：”2e5”表示 2*10的5次方，”2e-5” 表示2*10的-5次方<br>布尔型：”True” 或 “False”<br>逻辑符号： “and”(与)、”or”(或)、”not”(非)<br>空值：”None”</li>
<li>3.除法：”&#x2F;&#x2F;“表示除法最后结果只取整数部分</li>
</ul>
<h3 id="2-2格式化输出"><a href="#2-2格式化输出" class="headerlink" title="2.2格式化输出"></a>2.2格式化输出</h3><ul>
<li>1.使用 “%”<br>PS: print(“Hello,%s”%’World’,”ok%d”%3)<br>输出 Hello,World ok3</li>
<li>2.使用format(),使用占位符{0},{1}…<br>PS：print(“{0},{1}”.format(‘Hello’,’World’))</li>
</ul>
<h3 id="2-3-list-可变数组-lt-中括号-gt-和tuple-不可变数组-lt-小括号-gt"><a href="#2-3-list-可变数组-lt-中括号-gt-和tuple-不可变数组-lt-小括号-gt" class="headerlink" title="2.3  list(可变数组 &lt;中括号&gt; [])和tuple(不可变数组 &lt;小括号&gt; ())"></a>2.3  list(可变数组 <code>&lt;中括号&gt; []</code>)和tuple(不可变数组 <code>&lt;小括号&gt; ()</code>)</h3><ul>
<li>list相关<ul>
<li>1.list定义：  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">num=[1,2,3]</span><br><span class="line">num=[] (空数组)</span><br></pre></td></tr></table></figure></li>
<li>2.访问list：  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">num[0]输出 1</span><br><span class="line">num[1]输出 2</span><br><span class="line">num[-1]输出 3</span><br><span class="line">num[-2]输出 2</span><br><span class="line">num[-3]输出 1</span><br><span class="line">num[-4]报错</span><br></pre></td></tr></table></figure></li>
<li>3.增加list元素：  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">num.append(&quot;a&quot;) 输出 [1,2,3,&#x27;a&#x27;]</span><br><span class="line">num.insert(1,1.1) 输出 [1,1.1,2,3,&#x27;a&#x27;]</span><br><span class="line">num.insert(-1,&#x27;last_1&#x27;) 输出[1,1.1,2,3,&#x27;last_1&#x27;,&#x27;a&#x27;]</span><br></pre></td></tr></table></figure></li>
<li>4.删除list元素：  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">num.pop()输出[1,1.1,2,3,&#x27;last_1&#x27;]</span><br><span class="line">num.pop(1)输出[1,2,3,&#x27;last_1&#x27;]</span><br><span class="line">num.pop(-1)输出[1,2,3]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>   tuple相关<ul>
<li>   1.tuple定义：   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#没有&quot;增加/删除&quot;方法,数组不变</span><br><span class="line">num=[1,2]</span><br><span class="line">finalNum=(1,2,num)</span><br><span class="line">finalNum=()(空数组)</span><br><span class="line">如果定义finalNum=(1)，python防止和表达式歧义，</span><br><span class="line">规定finalNum变量表示数字1。</span><br><span class="line">可以这样表示 finalNum=(1,)</span><br></pre></td></tr></table></figure></li>
<li>2.访问tuple：   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">finalNum[0]输出 1</span><br><span class="line">finalNum[1]输出 2</span><br><span class="line">finalNum[-1]输出 [1,2]</span><br><span class="line">finalNum[-1][0] 输出 1</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="2-4-条件判断"><a href="#2-4-条件判断" class="headerlink" title="2.4 条件判断"></a>2.4 条件判断</h3><ul>
<li>关键字 “if”、”else”、”elif”(else if 缩写)、<code>&quot;:&quot;</code>(冒号)</li>
<li>格式  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;条件判断&gt;:非零数值、非空字符串、非空数组 为True，否则 False</span><br><span class="line">if&lt;条件判断&gt;: #要加冒号 &quot;:&quot;</span><br><span class="line">	&lt;执行&gt;</span><br><span class="line">elif&lt;条件判断&gt;:</span><br><span class="line">	&lt;执行&gt;</span><br><span class="line">else：</span><br><span class="line">	&lt;执行&gt;</span><br></pre></td></tr></table></figure></li>
<li>字符串不能和数字比较  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">b = input() #input()返回是字符串类型，需要转为数字</span><br><span class="line">b = int(b) #int()方法，转为整数</span><br><span class="line">b&gt;100</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-5-循环"><a href="#2-5-循环" class="headerlink" title="2.5 循环"></a>2.5 循环</h3><ul>
<li>   <code>for &lt;指代变量&gt; in &lt;数组&gt;:</code>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">range(100) #返回整数序列的range对象</span><br><span class="line">list(range(100)) #转为数组表示[1,2,...,99]</span><br></pre></td></tr></table></figure></li>
<li>   <code>while &lt;条件&gt;:&lt;缩进&gt; &lt;执行&gt;</code><br>   <code>break</code>   退出循环<br>   <code>continue</code>  停止当前次执行，继续循环判断</li>
</ul>
<h3 id="2-6-数据集合：dict-和-set"><a href="#2-6-数据集合：dict-和-set" class="headerlink" title="2.6 数据集合：dict 和 set"></a>2.6 数据集合：dict 和 set</h3><ul>
<li><p>   <code>dict</code> <code>&lt;大括号&gt; &#123;&#125;</code> (dictionary) <code>Java中的map</code> </p>
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d=&#123;&#x27;a&#x27;:1,&#x27;b&#x27;:2,&quot;c&quot;:3&#125;</span><br><span class="line">d[&#x27;a&#x27;] 输出 1</span><br><span class="line">d[&#x27;a&#x27;] =&#x27;1a&#x27; #赋值</span><br></pre></td></tr></table></figure>
<ul>
<li>是否存在key，返回 True 或 False   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">`&lt;key&gt; in &lt;dict&gt;`</span><br><span class="line">`&lt;dict&gt;.get(&lt;key&gt;)` #不存在返回 None</span><br><span class="line">`&lt;dict&gt;.get(&lt;key&gt;,&lt;defaultValue&gt;)` #不存在返回 &lt;defaultValue&gt;</span><br></pre></td></tr></table></figure></li>
<li>删除 <code>&lt;dict&gt;.pop(&lt;key&gt;)</code></li>
</ul>
</li>
<li><p><code>set</code> <code>&lt;小括号&gt; ()</code></p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">定义	:需要list数组</span><br><span class="line">a = [1,2,3]</span><br><span class="line">b=set(a) 或 b =set([1,2,3]) </span><br></pre></td></tr></table></figure>
<ul>
<li>add <code>&lt;set&gt;.add(&lt;key&gt;)</code></li>
<li>remove <code>&lt;set&gt;.remove(&lt;key&gt;)</code></li>
<li>逻辑操作 <code>&amp;</code>、<code>|</code> 、 <code>-</code>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s1=([1,2,3])</span><br><span class="line">s2=([2,3,4])</span><br><span class="line">s1 &amp; s2 输出 &#123;2,3&#125;</span><br><span class="line">s1 | s2 输出 &#123;1,2,3,4&#125;</span><br><span class="line">s1 - s2 输出 &#123;1&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="2-7-函数"><a href="#2-7-函数" class="headerlink" title="2.7 函数"></a>2.7 函数</h3><ul>
<li>   1.函数定义：  <code>def</code> <method_name>(params)<code>:</code></li>
<li>   2.空函数： <code>def</code> <method_name>()<code>:</code> <code>pass</code></li>
<li>   3.return： <ul>
<li>   1.return表示结束,等价于 return None</li>
<li>   2.不写默认返回 return None </li>
<li>   3.返回tuple类型可省略<code>()</code>,PS: return (x,y) 变为 return x,y</li>
</ul>
</li>
<li>   4.导入模块(.py文件)：<ul>
<li>   1.引入整个模块：<code>import</code> math 说明导入math包<br>   PS:自定义文件tri.py，<code>import tri</code>引入tri文件到内存 通过 tri.&lt;mothod&gt;()访问</li>
<li>   2.导入模块中的某个方法：<ul>
<li>某个函数：  <code>from</code> &lt;文件名&gt; <code>import</code> &lt;函数名&gt;</li>
<li>全部函数：<code>from</code> &lt;文件名&gt; import *</li>
</ul>
</li>
</ul>
</li>
<li>   5.参数：</li>
<li><ul>
<li>必选参数</li>
<li>1.默认参数，<code>参数</code>&#x3D;<code>值</code></li>
<li><code>默认参数必须指向不变对象</code>，如果值是<code>[]</code>，那么每次调用都是原来的<code>[]</code>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def power(x,n=2):</span><br><span class="line">	pass</span><br><span class="line">调用方式：</span><br><span class="line">1.power(5),默认n=2</span><br><span class="line">2.power(5,3)</span><br></pre></td></tr></table></figure></li>
<li>2.可变参数： <code>*</code>params   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def count(*params):</span><br><span class="line">	sum = 0;</span><br><span class="line">	for p in params:</span><br><span class="line">		sum = sum +p</span><br><span class="line">	return sum</span><br><span class="line">调用方式：</span><br><span class="line">1.count(1) 输出 1</span><br><span class="line">2.count(1,2,3) 输出 6</span><br><span class="line">3.count(*[1,2,3]) 输出 6</span><br></pre></td></tr></table></figure></li>
<li>3.关键字参数： <code>**</code>params   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def student(name,age,**params):</span><br><span class="line">	print(&quot;name&quot;,name,&#x27;age&#x27;,age,&#x27;params&#x27;,params)</span><br><span class="line">调用：</span><br><span class="line">1.student(&#x27;a&#x27;,12) 输出  name a age 12 params &#123;&#125;</span><br><span class="line">2.student(&#x27;b&#x27;,12,a=122,b=1223) 输出 name b age 12 params &#123;&#x27;a&#x27;: 122, &#x27;b&#x27;: 1223&#125;</span><br><span class="line">3.student(1,2,**&#123;&#x27;a&#x27;:2&#125;) 输出 name 1 age 2 params &#123;&#x27;a&#x27;: 2&#125;</span><br></pre></td></tr></table></figure></li>
<li>4.命令关键字参数： <code>*,&lt;key1&gt;,&lt;key2&gt;</code> (PS:如果前面有可变参数，可不用加<code>*,</code>)   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def student(name,age,*,gender,city):</span><br><span class="line">	print(&#x27;name&#x27;,name,&#x27;age&#x27;,age,gender,city)</span><br><span class="line">调用：</span><br><span class="line">1.student(&#x27;a&#x27;,110) 输出 TypeError..</span><br><span class="line">2.student(&#x27;a&#x27;,123,gender=&#x27;male&#x27;,city=&#x27;fz&#x27;) 输出 name 1 age 2 male fz</span><br></pre></td></tr></table></figure>
<pre><code>- 5.参数组合：顺序- 必选参数-&gt;默认参数-&gt;可变参数-&gt;命令关键字参数-&gt;关键字参数
</code></pre>
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def s(a,b,c=0,*d,city,**kw):</span><br><span class="line">	print(&#x27;a=&#x27;,a,&#x27;b=&#x27;,b,&#x27;c=&#x27;,c,&#x27;d=&#x27;,d,&#x27;city=&#x27;,city,&#x27;kw=&#x27;,kw)</span><br><span class="line">调用：</span><br><span class="line">1.s(1,2,city=22)</span><br><span class="line">输出 a= 1 b= 2 c= 0 d= () city=22 kw= &#123;&#125;</span><br><span class="line">2.s(1,2,3,4,5,city=22,a=1,b=2)	</span><br><span class="line">输出 a= 1 b= 2 c= 3 d= (4, 5) city= 22 kw= &#123;&#x27;d&#x27;: 1, &#x27;e&#x27;: 2&#125;</span><br><span class="line">3.s(1,2,3,4,5) 输出TypeError：missing city</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="2-8高级特性"><a href="#2-8高级特性" class="headerlink" title="2.8高级特性"></a>2.8高级特性</h3><ul>
<li>1.切片(Slice)：取数组元素的简便方式<ul>
<li>默认是索引0开始并且递增速度1,可反向索引</li>
<li><code>[0:3]</code>或<code>[:3]</code> 取数组 [0],[1],[2]</li>
<li><code>[-1:]</code> 取数组 [2]</li>
<li><code>[:]</code> 取全部</li>
<li><code>[::5]</code> 在全部中，每个5个取一个</li>
<li><code>[:10:2]</code> 在数组0~9的元素中每隔2个取一个</li>
</ul>
</li>
<li>2.列表生成式：列表的每个元素进行一次表达式计算<ul>
<li>格式： <code>[&lt;变量的表达式&gt; for &lt;变量&gt; in &lt;序列&gt;]</code>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def L2(L):</span><br><span class="line">	L2 = []</span><br><span class="line">	for x in L:</span><br><span class="line">		L2.append(x*x)</span><br><span class="line">	return L2</span><br><span class="line">调用： [1,2,3] -&gt;[1,4,9]</span><br><span class="line">1.sum2(list(range(1,4)))</span><br><span class="line">2.列表生成式: [x*x for x in range(1,4)]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>3.生成器(Generator)：动态生成列表的每个元素，可通过<code>next(&lt;Generator&gt;)</code>进行访问<ul>
<li>1.列表表达式改为小括号 <code>(&lt;变量的表达式&gt; for &lt;变量&gt; in &lt;序列&gt;)</code></li>
<li>2.设置函数中的<code>yield</code>，变成一个Generator，函数每次调用返回一个新的Generator</li>
<li><code>g.send(&lt;参数&gt;)</code>:传入值，并调用<code>next(g)</code>,g&#x3D;Generator</li>
<li>return时，StopIteration  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">杨辉三角： C(n,i)=C(n-1,i-1)+C(n-1,i)</span><br><span class="line">递归关系式 (n&gt;1,1&lt;=i&lt;=n n表示行,i表示第n行的第i个数) C(1,1)=1</span><br><span class="line">	def triangles():</span><br><span class="line">	L = [1]</span><br><span class="line">	while True:</span><br><span class="line">		yield L</span><br><span class="line">		L = [sum(i) for i in zip([0]+L,L+[0])] #补[0]作用：行项+1，每个项是[n-1,n]队列</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="2-9-函数式编程"><a href="#2-9-函数式编程" class="headerlink" title="2.9 函数式编程"></a>2.9 函数式编程</h3><ul>
<li>   1.定义：一种抽象程度很高的程序范式，纯粹的函数式编程没有变量。任意函数输入确定，那么输出<br>   也确定，称为没有副作用。对于有变量的相同输入，可能有不同输出，称为有副作用。</li>
<li>   2.高阶函数：<ul>
<li>特点：<ul>
<li><pre><code>1.允许函数作为一个`变量`、函数`返回值`。
</code></pre>
</li>
<li>   2.<code>函数名变量</code>：函数名作为变量</li>
<li>   3.<code>函数参数</code>：可接收另一个函数作为参数</li>
</ul>
</li>
<li>map&#x2F;reduce<ul>
<li><code>map(&lt;method_name&gt;,&lt;Iterable&gt;)</code><br>  <code>return &lt;Iterator&gt;，需要list(&lt;Iterator&gt;)变为列表</code><br>  其中<code>&lt;Iterable&gt;</code>的每个元素都被<code>&lt;method_name&gt;</code>作用一次</li>
<li><code>reduce(&lt;method_name&gt;,&lt;Iterable&gt;)</code> <ul>
<li>1.需要引入 <code>from functools import reduce</code></li>
<li>2.<code>&lt;method_name&gt;</code>需要2个参数，<br>  返回的值继续和<code>&lt;Iterable&gt;</code>的下一个值进行函数计算</li>
</ul>
</li>
</ul>
</li>
<li>filter：<code>filter(&lt;method_name&gt;,&lt;Iterable&gt;)</code>和<code>map</code>函数类似<br>   不同的是<code>&lt;method_name&gt;</code>根据返回True&#x2F;False，<code>&lt;Iterable&gt;</code>过滤False的item</li>
<li>sorted: <code>sorted(&lt;Iterable&gt;,**kw)</code>，<code>&lt;Iterable&gt;</code>进行排序<br>   其中<code>**kw</code>，可选择接受 <code>key=&lt;method_name&gt;</code>(PS:abs,str.lower)自定义排序，<br>   reverse&#x3D;True反向排序</li>
</ul>
</li>
<li>   3.返回函数：<ul>
<li>   返回函数，需要变量进行函数调用，每次调用返回新的函数</li>
<li>   闭包：能够读取函数内部变量的函数（定义在函数内部的函数）<br>   <code>返回函数不要引用引起变化的局部变量</code></li>
</ul>
</li>
<li>   4.匿名函数：<code>lambda &lt;变量&gt;:&lt;表达式&gt;</code>只是个表达式，可被变量引用</li>
<li>   5.装饰器：在原有函数定义不需要改变下，增加新内容并返回函数的引用<ul>
<li><code>__name__</code>函数名称</li>
<li>1.<code>@</code> 修饰符   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">def log(f):</span><br><span class="line">	@functools.wraps(f)</span><br><span class="line">	def wrapper(*args,**kw):</span><br><span class="line">		print(&#x27;wrapper %s func&#x27;%f.__name__)</span><br><span class="line">		return f(*args,**kw)</span><br><span class="line">	return wrapper</span><br><span class="line">@log</span><br><span class="line">def now():</span><br><span class="line">	print(&#x27;now&#x27;)</span><br><span class="line">其中，@log修饰 等价于  now = log(now)</span><br></pre></td></tr></table></figure></li>
<li>2.原始函数的一些属性复制到装饰器函数<ul>
<li>import functools</li>
<li>@functools.wraps(<func_params>)</li>
</ul>
</li>
</ul>
</li>
<li>   6.偏函数：<code>functools.partial(&lt;method_name&gt;,*args,**kw)</code><br>   其中*args在前**kw在后   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import functools</span><br><span class="line">int(&#x27;100&#x27;,2) 输出4</span><br><span class="line">int(&#x27;100&#x27;,base=2) 输出4</span><br><span class="line">int2 = functools.partial(int,base=2) #默认int函数是10进制</span><br><span class="line">int2(&#x27;100&#x27;)输出4</span><br><span class="line">PS:</span><br><span class="line">int2 = functools.partial(int,2)?</span><br><span class="line">int2(&#x27;100&#x27;) 输出 TypeError，因为调用int2(&#x27;100&#x27;) 等价于 int(2,&#x27;100&#x27;)</span><br></pre></td></tr></table></figure>

   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">functools.partial源码</span><br><span class="line">def partial(func, *args, **keywords):</span><br><span class="line">	def newfunc(*fargs, **fkeywords):</span><br><span class="line">		newkeywords = keywords.copy()</span><br><span class="line">        newkeywords.update(fkeywords)</span><br><span class="line">        return func(*args, *fargs, **newkeywords)</span><br><span class="line">    newfunc.func = func</span><br><span class="line">    newfunc.args = args</span><br><span class="line">    newfunc.keywords = keywords</span><br><span class="line">    return newfunc</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-10-使用模块"><a href="#2-10-使用模块" class="headerlink" title="2.10 使用模块"></a>2.10 使用模块</h3><ul>
<li>   1.导入模块: PS:import sys 就可以使用sys变量来访问模块全部内容</li>
<li>2.模块内部：<ul>
<li><p>   1.模块特殊变量<code>__name__</code>，当运行当前模块文件<code>__name__</code> &#x3D;&#x3D;<code>__main__</code>是True，否则False</p>
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hello.py</span><br><span class="line"></span><br><span class="line">def test():</span><br><span class="line">	print(&quot;hello world&quot;)</span><br><span class="line">if __name__ ==&#x27;__main__&#x27;</span><br><span class="line">	test()</span><br><span class="line">当 python hello.py</span><br><span class="line">	输出 hello world </span><br><span class="line">当 import hello 将不会执行 test()</span><br></pre></td></tr></table></figure></li>
<li><p>2.类似<code>__xxx__</code>这样的变量是特殊变量，可以被直接引用，但是有特殊用途</p>
</li>
<li><p>3.类似<code>_xxx和__xxx</code>这样的变量或函数就是非公开的（private 模块内部使用）,规定不能访问</p>
</li>
<li><p>(只是内部改变了变量命名名称，python无法完全限制访问)</p>
</li>
</ul>
</li>
<li>3.安装第三方模块：pip install <module_name><ul>
<li>添加模块搜索路径  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">sys.path 查看模块</span><br><span class="line">sys.path.append(&quot;路径&quot;)</span><br></pre></td></tr></table></figure></li>
<li>设置PYTHON_PATH</li>
</ul>
</li>
</ul>
<h3 id="2-11-面向对象编程"><a href="#2-11-面向对象编程" class="headerlink" title="2.11 面向对象编程"></a>2.11 面向对象编程</h3><ul>
<li>   1.类和实例<ul>
<li>定义： <code>class &lt;class_name&gt;(object):</code> 表示<code>&lt;class_name&gt;</code>继承自object</li>
<li><code>__init__(self,params)</code> 对象创建时，如果必须传递的参数params，可以使用该方法</li>
<li>类的方法，第一个参数固定是self，其他和函数定义一样</li>
</ul>
</li>
<li>   2.访问限制<ul>
<li>   <code>__xx__</code>标识特殊变量，可以访问</li>
<li>   <code>__xx</code>标识变量，表示private,不允许访问</li>
<li>   <code>_xx</code>标识变量，约定成俗，表示private<br>   (只是python解释器会把这种变量解释成不一样名称防止外部直接访问)</li>
</ul>
</li>
<li>   3.继承和多态<ul>
<li><code>class &lt;class_name&gt;(&lt;继承的类&gt;)</code>，继承父类方法和父类中<code>__init__</code>方法设置的变量，覆写父类方法<br>   -<code>鸭子类型</code>(file-like object),只有变量对象有这个<code>方法</code>、<code>变量</code>就可以，不管这个对象是否是子类</li>
</ul>
</li>
<li>   4.获取对象信息<ul>
<li><p><code>type(&lt;参数&gt;)</code>函数：获取<code>参数</code>的类型。</p>
</li>
<li><p><code>import types</code> 导入types模块<br>  一些类型，可进行判断<br>  <code>types.FunctionType</code><br>  <code>types.BuiltinFunctionType</code><br>  <code>types.LambdaType</code><br>  <code>types.GeneratorType</code></p>
</li>
<li><p><code>isinstance(变量,类型)</code>，可用于判断自定义的类，方法类型<br>   <code>isinstance(变量,(类型1,类型2))</code>,可用于判断是否是<code>类型1</code>，<code>类型2</code>之一</p>
</li>
<li><p><code>dir(&lt;对象实例&gt;)</code>,获取对象所有属性和方法</p>
<ul>
<li><code>len(&#39;ABC&#39;)等价于&#39;ABC&#39;.__len__()</code></li>
<li><code>hasattr(&lt;对象实例&gt;,&lt;属性&gt;)</code>,判断是否存在这个<code>&lt;属性&gt;</code></li>
<li><code>setattr(&lt;对象实例&gt;,&lt;属性&gt;,[属性默认值])</code>,设置<code>&lt;属性&gt;</code>值</li>
<li><code>getattr(&lt;对象实例&gt;,&lt;属性&gt;)</code>,获取<code>&lt;属性&gt;</code></li>
</ul>
</li>
<li><p>类属性和实例属性</p>
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class A(object):</span><br><span class="line">	name = &#x27;A&#x27; #类属性，直接通过 A.name访问</span><br><span class="line">	def __init__(self,a):</span><br><span class="line">	 	self.a =a #实例属性</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="2-12-面向对象高级编程"><a href="#2-12-面向对象高级编程" class="headerlink" title="2.12 面向对象高级编程"></a>2.12 面向对象高级编程</h3><ul>
<li><p>1.动态绑定<code>变量</code>和<code>方法</code></p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from types import MethodType </span><br><span class="line">def hao():</span><br><span class="line">	print(&#x27;hh&#x27;)</span><br><span class="line">class A(object):</span><br><span class="line">	pass</span><br><span class="line">a = A()</span><br><span class="line">a.name=&#x27;aa&#x27; #动态绑定变量，只作用当前实例</span><br><span class="line">a.hao=MethodType(hao,a) #动态绑定方法，只作用当前实例</span><br><span class="line">A.hao=hao #类的所有实例绑定方法</span><br><span class="line">print(a.name)</span><br></pre></td></tr></table></figure></li>
<li><p>2.使用<code>__slots__</code> 限制实例绑定的属性</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class A(object):</span><br><span class="line">	__slots__=(&#x27;name&#x27;,&#x27;age&#x27;) #tuple类型，表示只允许添加name和age的属性</span><br><span class="line">class A2(A):</span><br><span class="line">	pass</span><br><span class="line">a = A()</span><br><span class="line">a.name=&#x27;a&#x27;</span><br><span class="line">a.age=&#x27;b&#x27;</span><br><span class="line">a.sc=&#x27;c&#x27;#AttributeError</span><br><span class="line">a = A2()</span><br><span class="line">a.sc = &#x27;c&#x27; #子类，不受影响</span><br><span class="line">#如果A2增加`__slots__=(&#x27;sc&#x27;)`那么A2将限制包括父类的name,age和sc，3个属性</span><br></pre></td></tr></table></figure></li>
<li><p>3.<code>@property</code>，修饰一个方法，用于属性直接可读操作，<br>并且生成<code>@&lt;方法名&gt;.setter</code>进行直接可写操作。<br>在不用调用(set&#x2F;get)方法下，直接操作属性并进行检查判断。（等价于动态绑定属性+属性检查）</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class A(object):</span><br><span class="line"></span><br><span class="line">	@property</span><br><span class="line">	def score(self):</span><br><span class="line">		return self.__score</span><br><span class="line">	@score.setter</span><br><span class="line">	def score(self,value):</span><br><span class="line">		if not (isinstance(value,int)):</span><br><span class="line">			raise ValueError(&#x27;score must be an integer!&#x27;)</span><br><span class="line">		if (value&lt;0 or value&gt;100):</span><br><span class="line">			raise ValueError(&#x27;score between 0 and 100!&#x27;)</span><br><span class="line">		self.__score=value</span><br><span class="line">#可以通过直接访问方式</span><br><span class="line">a = A();</span><br><span class="line">a.score=10</span><br><span class="line">print(a.score)</span><br><span class="line">a.score=101 #ValueError</span><br></pre></td></tr></table></figure></li>
<li><p>4.多重继承</p>
<ul>
<li>MixIn：一个类实现多个功能，可通过多继承方式  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class A(object):</span><br><span class="line">	def run(self):</span><br><span class="line">		print(&#x27;A&#x27;)</span><br><span class="line">	def run1(self):</span><br><span class="line">		print(&#x27;run1() A&#x27;)</span><br><span class="line">class B(object):</span><br><span class="line">	def run(self):</span><br><span class="line">		print(&#x27;B&#x27;)</span><br><span class="line">class C(B,A):</span><br><span class="line">	pass</span><br><span class="line">#执行</span><br><span class="line">a = C()</span><br><span class="line">a.run()</span><br><span class="line">a.run1()</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>5.定制类，类中特殊函数覆写</p>
<ul>
<li>   <code>__str__</code>: print(&lt;类对象&gt;)中打印的内容</li>
<li><code>__repr__</code>: 打印类对象的内容</li>
<li><code>__iter__</code>:设置为迭代对象用于<code>for ... in循环</code>，实现<code>__next__</code>方法</li>
<li><code>__getitem__</code>:跟获取数组下标一样获取数据项，<code>&lt;类对象&gt;[0]、&lt;类对象&gt;[1]</code><ul>
<li><code>&lt;类对象&gt;[:]、&lt;类对象&gt;[:2]</code>也可以切片对象，<br>  那么需要判断处理<code>isinstance(&lt;变量&gt;,slice)</code></li>
</ul>
</li>
<li><code>__getattr__</code>:覆写，那么py会先根据这个方法尝试获取属性</li>
<li><code>__call__</code>:类对象可以作为函数调用使用，(PS: s是类对象，那么可以s()进行调用)<ul>
<li><code>callable(&lt;类实例&gt;)</code>：判断类对象是否作为<code>可调用的函数</code></li>
</ul>
</li>
</ul>
</li>
<li><p>6.枚举类</p>
<ul>
<li>定义：<br>  <code>from enum import Enum</code><br>  索引引用[]从1开始</li>
<li><code>Enum(&lt;枚举类型名称&gt;,(&lt;枚举1&gt;,&lt;枚举2&gt;))</code></li>
<li><code>class A(Enum):</code> 枚举自定义派生类  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">from enum import Enum</span><br><span class="line">w = Enum(&#x27;weekly&#x27;,(&#x27;Sun&#x27;,&#x27;Mon&#x27;,&#x27;Tue&#x27;,&#x27;Wed&#x27;,&#x27;Thu&#x27;,&#x27;Fri&#x27;,&#x27;Sat&#x27;))</span><br><span class="line">w(1) #输出 &lt;weekly.Sun:1&gt;</span><br><span class="line">w(1).name #输出&#x27;Sun&#x27;</span><br><span class="line">w(1).value #输出1</span><br><span class="line"></span><br><span class="line">from enum import unique</span><br><span class="line">@unique #防止重复值	</span><br><span class="line">class A(Enum):</span><br><span class="line">	Sun=0 </span><br><span class="line">	Mon=1</span><br><span class="line">	Tue=2</span><br><span class="line">	Wed=3</span><br><span class="line">	Thu=4</span><br><span class="line">	Fri=5</span><br><span class="line">	Sat=6</span><br><span class="line">A.Sun.name #输出&#x27;Sun&#x27;</span><br><span class="line">A.Sun.value #输出0</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>7.使用元类</p>
<ul>
<li><code>type(&lt;类名&gt;,(&lt;父类&gt;,[&lt;父类&gt; 0~n个]),dict(&lt;方法名&gt;=&lt;绑定的方法&gt;))</code>：动态生成class类</li>
<li>metaclass<ul>
<li>使用：<code>class &lt;类名&gt;(&lt;父类&gt;,metaclass=&lt;metaclass类&gt;)</code><br>  其中metaclass&#x3D;<code>&lt;metaclass类&gt;</code>，用于生成&lt;类名&gt;实例<br>  metaclass类<br>  1.继承自<code>type</code><br>  2.实现<code>__new__(cls, name, bases, attrs)</code>方法实现创建新的实例<br>  cls：&lt;metaclass类&gt;<br>  name:创建类的名字<br>  base:创建类继承的父类集合<br>  attr:创建类的属性&#x2F;方法集合  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class Model(type):</span><br><span class="line">	def __new__(cls,name,base,attr):</span><br><span class="line">		print(attr)</span><br><span class="line">		attr[&#x27;ok&#x27;]=&#x27;model gen ok&#x27; #添加属性</span><br><span class="line">		attr[&#x27;add&#x27;]=lambda self,value: self.append(value) #添加方法</span><br><span class="line">		print(attr)</span><br><span class="line">		return type.__new__(cls,name,base,attr)</span><br><span class="line"></span><br><span class="line">class Test(list,metaclass=Model):</span><br><span class="line">	pass</span><br><span class="line"></span><br><span class="line">if(__name__==&#x27;__main__&#x27;):</span><br><span class="line">	a = Test()</span><br><span class="line">	print(a.ok)</span><br><span class="line">	a.add(1)</span><br><span class="line">	print(a)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>8.<code>super(&lt;class_type&gt;,&lt;class_instance&gt;)</code>调用父类函数<br>  按照继承方法的顺序调用，称为MRO(Method Resolution Order)</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class A(object):</span><br><span class="line">	super(A,self).__init__():</span><br><span class="line">	print(&#x27;A&#x27;)</span><br><span class="line">class B(object):</span><br><span class="line">	super(B,self).__init__():</span><br><span class="line">	print(&#x27;B&#x27;)</span><br><span class="line">class C(A,B):</span><br><span class="line">	super(C,self).__init__():</span><br><span class="line">	print(&#x27;C&#x27;)</span><br><span class="line">C.mro() # &lt;class C&gt;,&lt;class A&gt;,&lt;class B&gt;</span><br><span class="line">C() </span><br><span class="line">#输出 B A C</span><br><span class="line">#C()</span><br><span class="line">#开始从C调用super()—&gt;</span><br><span class="line">#下一个指向A,在A中调用super()-&gt;</span><br><span class="line">#下一个指向B,在B中调用super()是object</span><br><span class="line">#最后，打印B-&gt;打印A-&gt;打印C </span><br></pre></td></tr></table></figure></li>
<li><p>9.静态方法、类方法、实例方法</p>
<ul>
<li><code>@staticmethod</code> 静态方法 (类&#x2F;实例)访问，不用写默认参数self,不能调用实例变量、类变量等</li>
<li><code>@classmethod</code>类方法，(类&#x2F;实例)访问，需要有默认参数self，不能调用实例变量。</li>
<li>实例方法，实例访问，需要有默认参数self</li>
</ul>
</li>
</ul>
<h3 id="2-13-错误、调试和测试"><a href="#2-13-错误、调试和测试" class="headerlink" title="2.13 错误、调试和测试"></a>2.13 错误、调试和测试</h3><ul>
<li>1.异常捕获<ul>
<li><code>try...except...as e ... finally...</code>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">try: </span><br><span class="line">&lt;执行&gt;</span><br><span class="line">except &lt;异常类&gt; as e:</span><br><span class="line">	&lt;执行&gt;</span><br><span class="line">finally:</span><br><span class="line">	&lt;执行&gt;</span><br></pre></td></tr></table></figure></li>
<li><code>logging</code> 记录错误</li>
<li><code>raise</code> 抛出错误</li>
</ul>
</li>
<li>2.日志输出<ul>
<li><code>assert</code>代替print<br>  使用<code>python -O &lt;文件名&gt;.py</code>其中 -O大写字母O表示关闭断言<br>  那么,<code>assert</code>将会被<code>pass</code>代替</li>
<li><code>logging</code> 和android logcat类似  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import logging </span><br><span class="line">logging.basicConfig(level=logging.INFO) #添加logging显示等级</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>3.单步调试<code>pdb</code>：python -m pdb xxx.py</li>
<li>4.单元测试 import <code>unittest</code>模块</li>
<li>5.文档测试 import <code>re</code>模块</li>
</ul>
<h3 id="2-14-IO编程"><a href="#2-14-IO编程" class="headerlink" title="2.14 IO编程"></a>2.14 IO编程</h3><ul>
<li><p>1.文件读写</p>
<ul>
<li>1.获取文件对象 <code>open(&lt;路径&gt;,&#39;r&#39;)</code> 获取文件对象，标识符r&#x3D;读，w&#x3D;写 默认读取文本文件</li>
<li>2.读取文件<ul>
<li><code>read()</code>一次性读取文件内容</li>
<li><code>read(size)</code>反复调用读取</li>
<li><code>readlines()</code>读取一行</li>
</ul>
</li>
<li>3.关闭文件<ul>
<li><code>close()</code></li>
<li><code>with open(&lt;路径&gt;,&#39;r&#39;) as f: print(f.read())</code>会自动调用close()，不用自己调用</li>
</ul>
</li>
<li>二进制文件<code>rb</code> 标识符表示</li>
<li>字符编码，读取非UTF-8文件<code>open(&lt;路径&gt;,&#39;r&#39;,encoding=&#39;gbk&#39;,error=&#39;ignore&#39;)</code><br>  error&#x3D;’ignore’用于读取编码错误时，忽略处理</li>
<li>4.写文件<ul>
<li>标识符：<code>w</code>写文本文件，<code>wb</code>写二进制文件 <code>wa</code>(append)追加形式写入(其他是覆盖方式)</li>
<li><code>write()</code></li>
<li><code>close()</code>写完需要关闭，也可以用<code>with open(...) as f:</code>方式自动关闭</li>
</ul>
</li>
</ul>
</li>
<li><p>2.StringIO和BytesIO</p>
<ul>
<li>1.StringIO  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from io import StringIO</span><br><span class="line">f = StringIO() #内存中字符操作</span><br><span class="line">f.write(&#x27;hello &#x27;)</span><br><span class="line">f.write(&#x27;world&#x27;)</span><br><span class="line">f.getValue()# &#x27;hello world&#x27;</span><br><span class="line">while True:</span><br><span class="line">	s = f.readlines()</span><br><span class="line">	if(s==&#x27; &#x27;):</span><br><span class="line">		break</span><br><span class="line">	print(s.strip())#strip()去掉空格</span><br></pre></td></tr></table></figure></li>
<li>2.BytesIO  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from io import BytesIO</span><br><span class="line">f = BytesIO()</span><br><span class="line">f = BytesIO(b&#x27;\xe5\xad\x97\xe8\x8a\x82&#x27;)</span><br><span class="line">f.write(&#x27;字节&#x27;.encode(&#x27;utf-8&#x27;))#写入utf-8编码的字节</span><br><span class="line">f.close()</span><br><span class="line">f.read()</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>3.os模块(系统信息，创建目录)</p>
<ul>
<li><code>import os</code><br>  <code>os.name</code> posix表示类Unit系统(Linux、Unix、Mac OS),nt表示windows<br>  <code>os.uname()</code> posix上提供显示系统信息<br>  <code>os.environ()</code>环境变量<br>  <code>os.environ().get(</code>PATH<code>)</code> 某个环境变量<br>  <code>os.path.abspath(&#39;.&#39;)</code> 当前目录绝对路径<br>  <code>os.path.join(&#39;/User&#39;,&#39;deskDir&#39;)</code> 目录下创建新目录<br>  <code>os.path.isdir(&#39;x&#39;)</code>是否目录<br>  <code>os.path.isfile(&#39;x&#39;)</code>是否文件<br>  <code>os.mkdir(&#39;/User/deskDir&#39;)</code>创建新目录<br>  <code>os.rmdir(&#39;/User/deskDir&#39;)</code>删除目录<br>  <code>os.path.split(&#39;/User/deskDir&#39;)</code>目录和最后一个<code>/</code>的内容分离<br>  <code>os.path.splitext(&#39;/User/deskDir&#39;)</code>目录和<code>文件扩展名</code>分离<br>  <code>os.rename(&#39;file.txt&#39;,&#39;newfile.txt&#39;)</code>文件重命名<br>  <code>os.remove(&#39;file.txt&#39;)</code>删除文件  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[x for x in os.listdir(&#x27;.&#x27;) if os.path.isfile(x)]#过滤掉非文件内容</span><br></pre></td></tr></table></figure></li>
<li>shutil模块 有提供文件复制函数</li>
</ul>
</li>
<li><p>4.序列化</p>
<ul>
<li>pickle模块，序列化和反序列化  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import pickle</span><br><span class="line">d = [1,2,3]</span><br><span class="line">#序列化</span><br><span class="line">b=pickle.dumps(d) #生成序列化bytes</span><br><span class="line">f = open(&#x27;file.txt&#x27;,&#x27;wb&#x27;)</span><br><span class="line">pickle.dump(f,b) #生成序列化bytes，并写入到文件</span><br><span class="line">f.close()</span><br><span class="line">#反序列化</span><br><span class="line">f.open(&#x27;file.txt&#x27;,&#x27;rb&#x27;)</span><br><span class="line">pickle.loads(b) #反序列化bytes</span><br><span class="line">pickle.load(f) #反序列化文件内容</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure></li>
<li>JSON  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#125;  		&lt;--&gt;  dict</span><br><span class="line">[]  		&lt;--&gt;  list</span><br><span class="line">&quot;string&quot;  	&lt;--&gt;  str</span><br><span class="line">1234.56  	&lt;--&gt;  int或float</span><br><span class="line">true/false  &lt;--&gt;  True/False</span><br><span class="line">null 		&lt;--&gt;  None</span><br><span class="line"></span><br><span class="line">import json</span><br><span class="line">d = dict(&#x27;name&#x27;:&#x27;n&#x27;,&#x27;age&#x27;:12)</span><br><span class="line">j = json.dumps(d) #返回json</span><br><span class="line">json.loads(j) #json转为类型</span><br></pre></td></tr></table></figure></li>
<li>class对象 json和反json<br>  <code>json.dumps(&lt;class对象&gt;,default=&lt;转换函数&gt;)</code> 转json<br>  <code>json.loads(&lt;json数据&gt;,object_hook=&lt;转换函数&gt;)</code> 反json</li>
</ul>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import json</span><br><span class="line">def student2dict(stu):</span><br><span class="line">	return &#123;&#x27;name&#x27;:stu.name,&#x27;age&#x27;:stu.age&#125;</span><br><span class="line">def dict2student(d):</span><br><span class="line">	return Student(d[&#x27;name&#x27;],d[&#x27;age&#x27;])</span><br><span class="line">s = Student(&#x27;a&#x27;,22)</span><br><span class="line">j = json.dumps(s,default=&#x27;student2dict&#x27;) #class对象转json</span><br><span class="line">json.loads(j,object_hook=dict2student) #json-&gt;dict对象-&gt;转student对象</span><br></pre></td></tr></table></figure></li>
<li><p>5.进程和线程</p>
<ul>
<li><p>多进程</p>
<ul>
<li><code>fork()</code>在类Unixt系统中，调用1次返回2次，分别是父进程返回和子进程返回。</li>
<li><code>getpid()</code>当前进程id</li>
<li><code>getppid()</code>获得父进程id<br>  子进程返回0<br>  父进程返回子进程id  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">pid = os.fork() #Windows没有fork调用</span><br><span class="line">if pid == 0 : #子进程</span><br><span class="line">if not pid ==0 : #父进程</span><br></pre></td></tr></table></figure></li>
<li>multiprocessing 跨平台多进程模块</li>
</ul>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from multiprocessing import Process</span><br><span class="line">import os </span><br><span class="line">def run_child_proc(name):</span><br><span class="line">	print(&#x27;name %s&#x27;%name)</span><br><span class="line">if(__name__==&#x27;__main__&#x27;):</span><br><span class="line">	#子进程执行函数run_child_proc,args是dict类型所以加,</span><br><span class="line">	p = Process(target=run_child_proc,args=(&#x27;test&#x27;,)) #创建进程</span><br><span class="line">	p.start() #子进程开始启动</span><br><span class="line">	p.join() #等待子进程p执行完成后，用于进程协调同步</span><br><span class="line">	print(&#x27;child proc closed&#x27;)</span><br></pre></td></tr></table></figure>
<ul>
<li>Pool 多进程  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from multiprocessing import Pool</span><br><span class="line">import os,time</span><br><span class="line">def run_child_proc(name):</span><br><span class="line">	time.sleep(1 * 1)</span><br><span class="line">	print(&#x27;child proc name %s&#x27;%name,&#x27; pid:&#x27;,os.getpid())</span><br><span class="line"></span><br><span class="line">if(__name__==&#x27;__main__&#x27;):</span><br><span class="line">	print(&#x27;parent Process pid = %s&#x27;%os.getpid())</span><br><span class="line">	p = Pool(3)</span><br><span class="line">	for i in range(3):</span><br><span class="line">		p.apply_async(run_child_proc,(i,))#多进程异步执行,进程池限制3个进程 默认4个</span><br><span class="line">	print(&#x27;Wait&#x27;)</span><br><span class="line">	p.close() #不允许添加新的进程</span><br><span class="line">	p.join() #等待进程全部执行完成</span><br><span class="line">	print(&#x27; All child proc closed! &#x27;)</span><br></pre></td></tr></table></figure></li>
<li>子进程<code>subprocess</code>模块</li>
<li>进程间通信通过Queue、Pipes实现</li>
</ul>
</li>
<li><p>多线程</p>
<ul>
<li><code>_thread</code>和<code>threading</code>模块  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import threading</span><br><span class="line"></span><br><span class="line">def new_thread_run():</span><br><span class="line">	print(&#x27;threading:%s&#x27;%threading.current_thread().name)</span><br><span class="line">print(&#x27;main thread:%s&#x27;%threading.current_thread().name)</span><br><span class="line">#不要name，py会自动起名字</span><br><span class="line">t = threading.Thread(target=new_thread_run,name=&#x27;new_thread&#x27;)</span><br><span class="line">t.start()</span><br><span class="line">t.join()</span><br><span class="line">print(&#x27;main thread:%s closed!&#x27;%threading.current_thread().name)</span><br></pre></td></tr></table></figure></li>
<li>Lock 线程上锁  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import threading,time</span><br><span class="line">value=0</span><br><span class="line">lock = threading.Lock() #获得锁对象</span><br><span class="line">def changeValue():</span><br><span class="line">	global value</span><br><span class="line">	value=value+1</span><br><span class="line">	time.sleep(0.0001)</span><br><span class="line">	value=value-1</span><br><span class="line"></span><br><span class="line">def new_thread_run():</span><br><span class="line">	lock.acquire() #获取锁</span><br><span class="line">	for i in range(1000):</span><br><span class="line">		changeValue()</span><br><span class="line">	print(threading.current_thread().name,&#x27;value&#x27;,value)</span><br><span class="line">	lock.release() #释放锁</span><br><span class="line">t1 = threading.Thread(target=new_thread_run)</span><br><span class="line">t2 = threading.Thread(target=new_thread_run)</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line">t1.join()</span><br><span class="line">t2.join()</span><br><span class="line">print(threading.current_thread().name,&#x27;value&#x27;,value)</span><br><span class="line">print(&#x27;main thread closed !&#x27;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>ThreadLocal:每个线程单独存储线程内部使用的变量</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import threading</span><br><span class="line"></span><br><span class="line">global_local = threading.local() #线程本地变量</span><br><span class="line">def process_t():</span><br><span class="line">	print(&#x27;thead: %s tag:%s&#x27;%(threading.current_thread().name,global_local.tag))</span><br><span class="line">def new_thread_run(tag):</span><br><span class="line">	global_local.tag = tag</span><br><span class="line">	process_t()</span><br><span class="line">t1 = threading.Thread(target=new_thread_run,args=(&#x27;OK&#x27;,))</span><br><span class="line">t2 = threading.Thread(target=new_thread_run,args=(&#x27;HAO&#x27;,))</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line">t1.join()</span><br><span class="line">t2.join()</span><br><span class="line">print(&#x27;main thread closed !&#x27;)</span><br><span class="line">	</span><br></pre></td></tr></table></figure>
<ul>
<li>多任务模型，切换作业有代价，就是保存&#x2F;恢复现场</li>
<li>Nginx 支持异步IO的Web服务器</li>
<li>协程：Python语言中，单线程的异步编程模型</li>
</ul>
</li>
<li><p>分布式进程:<code>multiprocessing</code>的子模块<code>managers</code>支持</p>
</li>
</ul>
</li>
</ul>
<h3 id="2-15-正则表达式"><a href="#2-15-正则表达式" class="headerlink" title="2.15 正则表达式"></a>2.15 正则表达式</h3><ul>
<li><code>import re</code>：导入<code>re</code>模块</li>
<li><code>r</code>：正则表达式前面加<code>r</code>忽略python中字符串的转义(PS:<code>\\</code>&#x3D;&#x3D; r<code>\</code>，字符串中输入<code>\</code>要转义)</li>
<li><code>re.match(&lt;正则表达式&gt;,&lt;需要匹配的字符串&gt;)</code>：匹配</li>
<li><code>re.compile(&lt;正则表达式&gt;)</code>：预编译</li>
<li><code>groups()</code>获得所有匹配的组</li>
<li><code>group(0)</code>默认匹配的组</li>
<li><code>group(1)，group(2)</code>表示要提取的组1,2 正则表达式中用<code>()</code>表示提取</li>
<li>正则表达式匹配过程(对于经常匹配的，预编译可以提高效率)<ul>
<li>1.编译正则表达式，如果正则表达式不合法，报错。</li>
<li>2.用编译后的正则表达式去匹配字符串</li>
</ul>
</li>
</ul>
<h3 id="2-16-内建模块"><a href="#2-16-内建模块" class="headerlink" title="2.16 内建模块"></a>2.16 内建模块</h3><ul>
<li>1.<code>datetime</code> 处理日期和时间标准库<ul>
<li><code>from datetime import datetime</code>: datetime.now()获取现在时间</li>
<li><code>import datetime</code>: datetime.datetime.now()获取现在时间</li>
</ul>
</li>
<li>2.<code>collections</code> 集合标准库</li>
<li>3.<code>base64</code> </li>
<li>4.<code>struct</code> 解决bytes和其他数据类型转换的库</li>
<li>5.<code>hashlib</code> 摘要算法库(MD5,SHA1)，生成hash值</li>
<li>6.<code>hmac</code>： (数据+密钥)的方式生成摘要hash值</li>
<li>7.<code>itertools</code>:操作迭代对象的库</li>
<li>8.<code>contextlib</code>:上下文对象，提供一些文件资源释放的便捷操作</li>
<li>9.<code>urllib</code>:操作URL的库，http请求之类的</li>
<li>10.<code>xml</code>:xml操作<ul>
<li>DOM：整个XML一次性读入</li>
<li>SAX：边读边解析</li>
</ul>
</li>
<li>11.<code>HTMLParser</code>：解析Html，解析html中文本、图像等</li>
</ul>
<h3 id="2-17-第三方模块"><a href="#2-17-第三方模块" class="headerlink" title="2.17 第三方模块"></a>2.17 第三方模块</h3><ul>
<li>1.图像处理：切片、旋转、滤镜、模糊、调色板等<ul>
<li><code>PIL</code>(python image library):仅支持python2.7</li>
<li><code>Pillow</code>:支持python3.x，+新特性</li>
<li><code>pip install pillow</code> 安装</li>
</ul>
</li>
<li>2.<code>requests</code> 网络访问库</li>
<li>3.<code>chardet</code> 编码检测库</li>
<li>4.<code>psutil</code>(process system utilies) 获取系统信息工具库</li>
<li>5.<code>virtualenv</code> 建立隔离的运行环境<ul>
<li>每个应用使用不同python版本运行环境处理</li>
</ul>
</li>
<li>6.图形界面库<ul>
<li><code>tkinter</code>：python内置的GUI编程库</li>
<li><code>tk</code>、<code>wxWidgets</code>、<code>Qt</code>、<code>GTK</code>：第三方GUI库</li>
<li>海龟绘图库(Turtle Graphics):python内置,通过指挥一只小海龟在屏幕上绘图<ul>
<li>起源 LOGO语言：专门给儿童学习编程的语言，特色是通过一只小海龟绘图。</li>
<li><code>import turtle import *</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-18-网络编程"><a href="#2-18-网络编程" class="headerlink" title="2.18 网络编程"></a>2.18 网络编程</h3><ul>
<li>TCP&#x2F;UDP编程</li>
<li><code>import socket</code> 引入socket库</li>
</ul>
<h3 id="2-19-电子邮件"><a href="#2-19-电子邮件" class="headerlink" title="2.19 电子邮件"></a>2.19 电子邮件</h3><ul>
<li>SMTP 发送邮件协议(内置模块)<ul>
<li><code>import smtplib</code>：发送邮件模块</li>
<li><code>import email</code>:构造邮件模块</li>
</ul>
</li>
<li>POP3 收取邮件协议(内置模块)(POP协议，最新版本号3)<ul>
<li>1.<code>import poplib</code>：收邮件模块</li>
<li>2.<code>import email</code>:解析原始文本，构成邮件对象</li>
</ul>
</li>
</ul>
<h3 id="2-20-数据库"><a href="#2-20-数据库" class="headerlink" title="2.20 数据库"></a>2.20 数据库</h3><p>(python中,DB-API通用,数据库操作接口类似)</p>
<ul>
<li>SQLite(内置模块)<ul>
<li><code>import sqlite3</code></li>
</ul>
</li>
<li>MySQL<ul>
<li>1.安装MySQL<ul>
<li>windows下，安装选择utf-8</li>
<li>linux,mac os下，需要编辑配置文件修改编码，改为utf-8。<ul>
<li><code>配置文件默认存放在/etc/my.cnf或者/etc/mysql/my.cnf</code></li>
</ul>
</li>
<li>PS:MySQL版本&gt;&#x3D;5.5.3，编码可设置为utf-8mb4(和utf-8兼容)，<br>  还可支持Unicode最新标准，可显示emoji字符</li>
</ul>
</li>
<li>2.安装MySQL驱动<br>  <code>pip install mysql-connector-python --allow-external mysql-connector-python</code><br>  或<code>pip install mysql-connector</code></li>
</ul>
</li>
<li><code>sqlalchemy</code>:第三方ORM(对象关系映射)框架<ul>
<li><code>pip install sqlalchemy</code></li>
</ul>
</li>
</ul>
<h3 id="2-21-Web开发"><a href="#2-21-Web开发" class="headerlink" title="2.21 Web开发"></a>2.21 Web开发</h3><ul>
<li><p>JSP：html+java的脚步代码形式</p>
</li>
<li><p>HTML</p>
<ul>
<li>HTML 网页</li>
<li>CSS(Cascading Style Sheets)层级样式表</li>
<li>JS 执行脚本</li>
</ul>
</li>
<li><p>Web应用流程</p>
<ul>
<li>1.浏览器发送http请求。</li>
<li>2.服务端接收请求，生成html文档。</li>
<li>3.服务端把html文档，作为Body发送给浏览器。</li>
<li>4.浏览器响应，取出Body中的html文档并显示。</li>
<li>现存Http服务器（Apache、Nginx、Lighttpd等）：用于接收用户请求，从文件读取html，响应返回。</li>
<li>Python用于动态生成html文档</li>
</ul>
</li>
<li><p>WSGI接口(Web Server GateWay Interface)</p>
<ul>
<li><code>import wsgiref</code> 内置的WSGI服务器</li>
<li>ctrl + c终止服务器  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#Web应用程序WSGI处理函数</span><br><span class="line">#包含2个参数:environ包含http请求信息的dict对象，start_response发送HTTP响应的函数</span><br><span class="line">#start_response函数包含2个参数：</span><br><span class="line">#1.响应码，2.一组list表示的Http Header，使用str表示的tuple类型</span><br><span class="line">#hello.py</span><br><span class="line">from wsgiref.simple_server import make_server</span><br><span class="line">def application(environ,start_response):</span><br><span class="line">	start_response(&#x27;200 OK&#x27;,[(&#x27;Content-Type&#x27;,&#x27;text/html&#x27;)]) #响应Header</span><br><span class="line">	return [b&#x27;&lt;html&gt;&lt;body&gt;hello world&lt;/body&gt;&lt;/html&gt;&#x27;] #响应Body</span><br><span class="line">httpd = make_server(&#x27;&#x27;,8000,application) #1.ip地址，2.端口，3.处理函数</span><br><span class="line">httpd.server_forever()#监听请求</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>WSGI 第三方框架</p>
<ul>
<li>Flask  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">pip install flask #安装flask</span><br><span class="line">#flask默认在5000端口上</span><br><span class="line">from flask import Flask</span><br><span class="line">from flask import request</span><br><span class="line">app = Flask(__name__)</span><br><span class="line">@app.route(&#x27;/&#x27;,methods=[&#x27;GET&#x27;]) </span><br><span class="line">def index():</span><br><span class="line">	return &#x27;&lt;h&gt;hello world&lt;/h&gt;&#x27;</span><br><span class="line"></span><br><span class="line">@app.route(&#x27;/login&#x27;,methods=[&#x27;GET&#x27;]) #/login选项框</span><br><span class="line">def login():</span><br><span class="line">	return &#x27;&#x27;&#x27;&lt;form action=&quot;/login&quot; method=&quot;post&quot;&gt;</span><br><span class="line">			&lt;p&gt;&lt;input name=&quot;username&quot;&gt;&lt;/p&gt;</span><br><span class="line">			&lt;p&gt;&lt;input name=&quot;password&quot;&gt;&lt;/p&gt;</span><br><span class="line">			&lt;p&gt;&lt;button type=&quot;submit&quot;&gt;Sign In&lt;/button&gt;&lt;/p&gt;</span><br><span class="line">			&lt;/form&gt;&#x27;&#x27;&#x27;</span><br><span class="line">#flask通过request.form[&#x27;name&#x27;]来获取表单的内容</span><br><span class="line">@app.route(&#x27;/login&#x27;,methods=[&#x27;POST&#x27;])#/login输入进行post请求</span><br><span class="line">def loginP():</span><br><span class="line">	if request.form[&#x27;username&#x27;]==&#x27;admin&#x27; and request.form[&#x27;password&#x27;]==&#x27;123456&#x27;:</span><br><span class="line">		return &#x27;&lt;h&gt;hello admin&lt;/h&gt;&#x27;</span><br><span class="line">	return &#x27;&lt;h&gt;login error!&lt;/h&gt;&#x27;</span><br><span class="line">if(__name__==&#x27;__main__&#x27;):</span><br><span class="line">	app.run()</span><br></pre></td></tr></table></figure></li>
<li>Django:全能型Web框架</li>
<li>web.py:小巧的Web框架</li>
<li>Bottle:和Flask类似的Web框架</li>
<li>Tornado:Facebook开源异步Web框架</li>
</ul>
</li>
<li><p>html模板：分离html和业务逻辑 MVC模式</p>
<ul>
<li>模板：独立html文件，内部传入数据变量的格式</li>
<li>flask<ul>
<li>jinja2：默认支持模板  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">`pip install jinja2`</span><br><span class="line">	- `&#123;&#123;name&#125;&#125;`：html中表示变量name</span><br><span class="line">	- `&#123;%...%&#125;`：html中`...`表示指令写的地方</span><br></pre></td></tr></table></figure>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#模板html存放在目录templates,templates和.py运行文件同级目录下</span><br><span class="line">#render_template() 显示模板</span><br><span class="line">#index.html</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h&gt;hello world&lt;/h&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">#login.html</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&#123;% if message %&#125;		</span><br><span class="line">&lt;p&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line">&lt;form action=&quot;/login&quot; method=&quot;post&quot;&gt;</span><br><span class="line">	&lt;p&gt;&lt;input name=&quot;username&quot; value=&quot;&#123;&#123;username&#125;&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;&lt;input name=&quot;password&quot;&gt;&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;&lt;button type=&quot;submit&quot;&gt;Sign In&lt;/button&gt;&lt;/p&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">#login_ok.html</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h&gt;hello &#123;&#123;name&#125;&#125;&lt;/h&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">#index.py</span><br><span class="line">from flask import Flask</span><br><span class="line">from flask import request</span><br><span class="line">from flask import render_template</span><br><span class="line">app = Flask(__name__)</span><br><span class="line">@app.route(&#x27;/&#x27;,methods=[&#x27;GET&#x27;])</span><br><span class="line">def index():</span><br><span class="line">	return render_template(&#x27;index.html&#x27;)</span><br><span class="line"></span><br><span class="line">@app.route(&#x27;/login&#x27;,methods=[&#x27;GET&#x27;])</span><br><span class="line">def login():</span><br><span class="line">	return render_template(&#x27;login.html&#x27;)</span><br><span class="line">@app.route(&#x27;/login&#x27;,methods=[&#x27;POST&#x27;])</span><br><span class="line">def loginP():</span><br><span class="line">	if request.form[&#x27;username&#x27;]==&#x27;admin&#x27; and request.form[&#x27;password&#x27;]==&#x27;123456&#x27;:</span><br><span class="line">		return render_template(&#x27;login_ok.html&#x27;,username=&#x27;admin&#x27;)</span><br><span class="line">	else:</span><br><span class="line">		return render_template(&#x27;login.html&#x27;,message=&#x27;Error username or password!&#x27;,username=request.form[&#x27;username&#x27;])</span><br><span class="line">if(__name__==&#x27;__main__&#x27;):</span><br><span class="line">	app.run()</span><br></pre></td></tr></table></figure></li>
<li>Mako模板<ul>
<li>${name} 变量</li>
<li>&lt;%…%&gt; 指令</li>
</ul>
</li>
<li>Cheetah模板<ul>
<li>${name} 变量</li>
<li>&lt;%…%&gt; 指令</li>
</ul>
</li>
<li>Django  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- &#123;&#123;name&#125;&#125; 变量</span><br><span class="line">- &#123;%...%&#125; 指令</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-22-异步IO"><a href="#2-22-异步IO" class="headerlink" title="2.22 异步IO"></a>2.22 异步IO</h3><ul>
<li><p>异步IO模型：利用主线程消息循环。执行IO操作时，只是发出IO指令不等待结果，继续执行其他代码，等待<br>IO通知后再来处理。</p>
</li>
<li><p>协程：一个线程执行多个函数之间不按顺序调用，切换调用(函数调用一半切换到另一个函数执行)</p>
<ul>
<li>python中通过generator实现了协程。当next(generator),<br>对生成generator函数进行中断处理，然后执行其他函数  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#同一个线程内，边写边读</span><br><span class="line">def read():</span><br><span class="line">	r = &#x27;&#x27;</span><br><span class="line">	while True:</span><br><span class="line">		read = yield r</span><br><span class="line">		if read:</span><br><span class="line">			print(&#x27;read =&#x27;,read)</span><br><span class="line"></span><br><span class="line">def write(r):</span><br><span class="line">	r.send(None)</span><br><span class="line">	i=1</span><br><span class="line">	while i&lt;10:</span><br><span class="line">		print(&#x27;write =&#x27;,i)</span><br><span class="line">		r.send(i)</span><br><span class="line">		i=i+1</span><br><span class="line"></span><br><span class="line">r = read()</span><br><span class="line">write(r)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>asyncio:内置异步IO支持</p>
<ul>
<li><code>@asyncio.coroutine</code> generator标记为coroutine</li>
<li><code>yield from &lt;coroutine&gt;</code>切换协程</li>
<li><code>asyncio.get_event_loop()</code>消息循环</li>
<li><code>loop.run_until_complete(&lt;task()&gt;或asyncio.wait(&lt;tasks&gt;))</code> tasks&#x3D;(task(),task())</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import threading</span><br><span class="line">import asyncio</span><br><span class="line"></span><br><span class="line">@asyncio.coroutine</span><br><span class="line">def hello():</span><br><span class="line">	print(&#x27;Hello world %s!&#x27;%threading.currentThread())</span><br><span class="line">	yield from asyncio.sleep(1) #切换到其他协程延时1秒</span><br><span class="line">	print(&#x27;Hello again %s!&#x27;%threading.currentThread())</span><br><span class="line"></span><br><span class="line">loop = asyncio.get_event_loop() #消息循环</span><br><span class="line">tasks=[hello(),hello()]</span><br><span class="line">loop.run_until_complete(asyncio.wait(tasks)) #或者loop.run_until_complete(hello())运行一个</span><br><span class="line">loop.close()</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">Hello world &lt;_MainThread(MainThread, started 680)&gt;!</span><br><span class="line">Hello world &lt;_MainThread(MainThread, started 680)&gt;!</span><br><span class="line">#暂停1秒后显示下面</span><br><span class="line">Hello again &lt;_MainThread(MainThread, started 680)&gt;!</span><br><span class="line">Hello again &lt;_MainThread(MainThread, started 680)&gt;!</span><br></pre></td></tr></table></figure>
<ul>
<li><code>async/await</code> Python3.5以后新的语法<ul>
<li><code>@asyncio.coroutine</code>替换为<code>async</code></li>
<li><code>yield from</code> 替换为<code>await</code>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import threading</span><br><span class="line">import asyncio</span><br><span class="line"></span><br><span class="line">async def hello():</span><br><span class="line">	print(&#x27;Hello world %s!&#x27;%threading.currentThread())</span><br><span class="line">	await asyncio.sleep(1) #切换到其他协程延时1秒</span><br><span class="line">	print(&#x27;Hello again %s!&#x27;%threading.currentThread())</span><br><span class="line"></span><br><span class="line">loop = asyncio.get_event_loop() #消息循环</span><br><span class="line">tasks=[hello(),hello()]</span><br><span class="line">loop.run_until_complete(asyncio.wait(tasks))</span><br><span class="line">loop.close()</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><code>aiohttp</code>:基于asyncio实现的HTTP框架<ul>
<li><code>pip install aiohttp</code>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import asyncio</span><br><span class="line">from aiohttp import web #pip install aiohttp</span><br><span class="line"></span><br><span class="line">async def index(request):</span><br><span class="line">	await asyncio.sleep(0.5)</span><br><span class="line">	return web.Response(body= (&#x27;hello, %s!&#x27; % request.match_info[&#x27;name&#x27;]))</span><br><span class="line"></span><br><span class="line">async def init(loop):</span><br><span class="line">	app = web.Application(loop=loop)</span><br><span class="line">	app.router.add_route(&#x27;GET&#x27;,&#x27;/&#123;name&#125;&#x27;,index)</span><br><span class="line">	ser =await loop.create_server(app.make_handler(),&#x27;localhost&#x27;,8000)</span><br><span class="line">	print(&#x27;Server started at http://localhost:8000 ...&#x27;)</span><br><span class="line">	return ser</span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line">loop.run_until_complete(init(loop))</span><br><span class="line">loop.run_forever()</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E8%AF%AD%E6%B3%95/" rel="tag"># 语法</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/09/02/hexo/" rel="next" title="Hexo 搭建github博客">
                <i class="fa fa-chevron-left"></i> Hexo 搭建github博客
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2022/03/06/Rertrofit/" rel="prev" title="Retrofit源码分析 2.10.0-SNAPSHOT">
                Retrofit源码分析 2.10.0-SNAPSHOT <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/obelieve.jpg"
               alt="" />
          <p class="site-author-name" itemprop="name"></p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/obelieve" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Python%E8%AF%AD%E6%B3%95"><span class="nav-number">1.</span> <span class="nav-text">Python语法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8"><span class="nav-number">1.1.</span> <span class="nav-text">注:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.2.</span> <span class="nav-text">1.执行模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BA%A4%E4%BA%92%E5%BC%8F%E6%A8%A1%E5%BC%8F-%E7%9B%B4%E6%8E%A5%E8%BE%93%E5%85%A5%EF%BC%8C%E5%B9%B6%E8%A7%A3%E9%87%8A"><span class="nav-number">1.2.1.</span> <span class="nav-text">1.交互式模式(直接输入，并解释)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.命令行模式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E8%AF%AD%E6%B3%95-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">1.3.</span> <span class="nav-text">2.语法-关键字</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E4%BB%BB%E6%84%8F-%E5%8A%A8%E6%80%81%E8%AF%AD%E8%A8%80%EF%BC%8C%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E5%9B%BA%E5%AE%9A-%E9%9D%99%E6%80%81%E8%AF%AD%E8%A8%80"><span class="nav-number">1.3.1.</span> <span class="nav-text">2.1变量类型任意-动态语言，变量类型固定-静态语言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA"><span class="nav-number">1.3.2.</span> <span class="nav-text">2.2格式化输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-list-%E5%8F%AF%E5%8F%98%E6%95%B0%E7%BB%84-lt-%E4%B8%AD%E6%8B%AC%E5%8F%B7-gt-%E5%92%8Ctuple-%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%95%B0%E7%BB%84-lt-%E5%B0%8F%E6%8B%AC%E5%8F%B7-gt"><span class="nav-number">1.3.3.</span> <span class="nav-text">2.3  list(可变数组 &lt;中括号&gt; [])和tuple(不可变数组 &lt;小括号&gt; ())</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="nav-number">1.3.4.</span> <span class="nav-text">2.4 条件判断</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-%E5%BE%AA%E7%8E%AF"><span class="nav-number">1.3.5.</span> <span class="nav-text">2.5 循环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-6-%E6%95%B0%E6%8D%AE%E9%9B%86%E5%90%88%EF%BC%9Adict-%E5%92%8C-set"><span class="nav-number">1.3.6.</span> <span class="nav-text">2.6 数据集合：dict 和 set</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-7-%E5%87%BD%E6%95%B0"><span class="nav-number">1.3.7.</span> <span class="nav-text">2.7 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-8%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7"><span class="nav-number">1.3.8.</span> <span class="nav-text">2.8高级特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-9-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B"><span class="nav-number">1.3.9.</span> <span class="nav-text">2.9 函数式编程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-10-%E4%BD%BF%E7%94%A8%E6%A8%A1%E5%9D%97"><span class="nav-number">1.3.10.</span> <span class="nav-text">2.10 使用模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-11-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B"><span class="nav-number">1.3.11.</span> <span class="nav-text">2.11 面向对象编程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-12-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B"><span class="nav-number">1.3.12.</span> <span class="nav-text">2.12 面向对象高级编程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-13-%E9%94%99%E8%AF%AF%E3%80%81%E8%B0%83%E8%AF%95%E5%92%8C%E6%B5%8B%E8%AF%95"><span class="nav-number">1.3.13.</span> <span class="nav-text">2.13 错误、调试和测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-14-IO%E7%BC%96%E7%A8%8B"><span class="nav-number">1.3.14.</span> <span class="nav-text">2.14 IO编程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-15-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.3.15.</span> <span class="nav-text">2.15 正则表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-16-%E5%86%85%E5%BB%BA%E6%A8%A1%E5%9D%97"><span class="nav-number">1.3.16.</span> <span class="nav-text">2.16 内建模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-17-%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97"><span class="nav-number">1.3.17.</span> <span class="nav-text">2.17 第三方模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-18-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B"><span class="nav-number">1.3.18.</span> <span class="nav-text">2.18 网络编程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-19-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="nav-number">1.3.19.</span> <span class="nav-text">2.19 电子邮件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-20-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.3.20.</span> <span class="nav-text">2.20 数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-21-Web%E5%BC%80%E5%8F%91"><span class="nav-number">1.3.21.</span> <span class="nav-text">2.21 Web开发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-22-%E5%BC%82%E6%AD%A5IO"><span class="nav-number">1.3.22.</span> <span class="nav-text">2.22 异步IO</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZXY</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>



        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("urOdS8XIqz7Kvt6TwSz8RUpL-gzGzoHsz", "FGI16oy4ykvdDc9jyYSdrNsF");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  

  

</body>
</html>
